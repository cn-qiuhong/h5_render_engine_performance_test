(function(s,r,_){var t=_.un,i=_.uns,h=_.static,a=_.class,n=_.getset,e=_.__newvec;var o=laya.display.Animation,f=laya.utils.Browser,l=laya.utils.ClassUtils,c=laya.filters.ColorFilter;var u=laya.components.Component,d=laya.Const,g=laya.utils.Ease,p=laya.events.Event,m=laya.display.Graphics;var v=laya.utils.Handler,y=laya.net.HttpRequest,C=laya.display.Input,b=laya.net.Loader;var S=laya.net.LocalStorage,w=laya.maths.Matrix,x=laya.display.Node,B=laya.maths.Point;var k=laya.maths.Rectangle,I=laya.renders.Render,L=laya.display.Scene,M=laya.utils.SceneUtils;var z=laya.display.Sprite,T=laya.display.Stage,D=laya.display.Text,H=laya.resource.Texture;var O=laya.utils.TimeLine,P=laya.utils.Tween,Y=laya.utils.Utils,A=laya.utils.WeakObject;_.interface("laya.ui.IBox");_.interface("laya.ui.IItem");_.interface("laya.ui.ISelect");_.interface("laya.ui.IRender");var N=function(){function t(){}a(t,"UIConfig");t.touchScrollEnable=true;t.mouseWheelEnable=true;t.showButtons=true;t.popupBgColor="#000000";t.popupBgAlpha=.5;t.closeDialogOnSide=true;return t}();var X=function(){function t(){}a(t,"laya.ui.Styles");t.labelColor="#000000";t.buttonStateNum=3;t.scrollBarMinNum=15;t.scrollBarDelayTime=500;h(t,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]);return t}();var E=function(){function n(){}a(n,"laya.ui.UIUtils");n.fillArray=function(t,i,e){var s=t.concat();if(i){var n=i.split(",");for(var h=0,r=Math.min(s.length,n.length);h<r;h++){var a=n[h];s[h]=a=="true"?true:a=="false"?false:a;if(e!=null)s[h]=e(a)}}return s};n.toColor=function(t){return Y.toHexColor(t)};n.gray=function(t,i){i===void 0&&(i=true);if(i){n.addFilter(t,n.grayFilter)}else{n.clearFilter(t,c)}};n.addFilter=function(t,i){var e=t.filters||[];e.push(i);t.filters=e};n.clearFilter=function(t,i){var e=t.filters;if(e!=null&&e.length>0){for(var s=e.length-1;s>-1;s--){var n=e[s];if(_.__typeof(n,i))e.splice(s,1)}t.filters=e}};n._getReplaceStr=function(t){return n.escapeSequence[t]};n.adptString=function(t){return t.replace(/\\(\w)/g,n._getReplaceStr)};n.getBindFun=function(t){var i=n._funMap.get(t);if(i==null){var e='"'+t+'"';e=e.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"');var s="(function(data){if(data==null)return;with(data){try{\nreturn "+e+"\n}catch(e){}}})";i=_._runScript(s);n._funMap.set(t,i)}return i};h(n,["grayFilter",function(){return this.grayFilter=new c([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new A}]);return n}();var G=function(t){function i(){i.__super.call(this);this._top=NaN;this._bottom=NaN;this._left=NaN;this._right=NaN;this._centerX=NaN;this._centerY=NaN}a(i,"laya.ui.Widget",t);var e=i.prototype;e.onReset=function(){this._top=this._bottom=this._left=this._right=this._centerX=this._centerY=NaN};e._onEnable=function(){if(this.owner.parent)this._onAdded();else this.owner.once("added",this,this._onAdded)};e._onDisable=function(){this.owner.off("added",this,this._onAdded);if(this.owner.parent)this.owner.parent.off("resize",this,this._onParentResize)};e._onAdded=function(){if(this.owner.parent)this.owner.parent.on("resize",this,this._onParentResize);this.resetLayoutX();this.resetLayoutY()};e._onParentResize=function(){if(this.resetLayoutX()||this.resetLayoutY())this.owner.event("resize")};e.resetLayoutX=function(){var t=this.owner;if(!t)return false;var i=t.parent;if(i){if(!isNaN(this.centerX)){t.x=Math.round((i.width-t.displayWidth)*.5+this.centerX+t.pivotX*t.scaleX)}else if(!isNaN(this.left)){t.x=Math.round(this.left+t.pivotX*t.scaleX);if(!isNaN(this.right)){var e=(i._width-this.left-this.right)/(t.scaleX||.01);if(e!=t.width){t.width=e;return true}}}else if(!isNaN(this.right)){t.x=Math.round(i.width-t.displayWidth-this.right+t.pivotX*t.scaleX)}}return false};e.resetLayoutY=function(){var t=this.owner;if(!t)return false;var i=t.parent;if(i){if(!isNaN(this.centerY)){t.y=Math.round((i.height-t.displayHeight)*.5+this.centerY+t.pivotY*t.scaleY)}else if(!isNaN(this.top)){t.y=Math.round(this.top+t.pivotY*t.scaleY);if(!isNaN(this.bottom)){var e=(i._height-this.top-this.bottom)/(t.scaleY||.01);if(e!=t.height){t.height=e;return true}}}else if(!isNaN(this.bottom)){t.y=Math.round(i.height-t.displayHeight-this.bottom+t.pivotY*t.scaleY)}}return false};e.resetLayout=function(){if(this.owner){this.resetLayoutX();this.resetLayoutY()}};n(0,e,"centerX",function(){return this._centerX},function(t){if(this._centerX!=t){this._centerX=t;this.resetLayoutX()}});n(0,e,"top",function(){return this._top},function(t){if(this._top!=t){this._top=t;this.resetLayoutY()}});n(0,e,"bottom",function(){return this._bottom},function(t){if(this._bottom!=t){this._bottom=t;this.resetLayoutY()}});n(0,e,"left",function(){return this._left},function(t){if(this._left!=t){this._left=t;this.resetLayoutX()}});n(0,e,"right",function(){return this._right},function(t){if(this._right!=t){this._right=t;this.resetLayoutX()}});n(0,e,"centerY",function(){return this._centerY},function(t){if(this._centerY!=t){this._centerY=t;this.resetLayoutY()}});h(i,["EMPTY",function(){return this.EMPTY=new i}]);return i}(u);var R=function(t){function i(){i.__super.call(this)}a(i,"laya.ui.UIEvent",t);i.SHOW_TIP="showtip";i.HIDE_TIP="hidetip";return i}(p);var W=function(t){function f(){this.autoCacheCmd=true;this._width=0;this._height=0;this._source=null;this._sizeGrid=null;this._isChanged=false;this._offset=null;f.__super.call(this)}a(f,"laya.ui.AutoBitmap",t);var i=f.prototype;i.destroy=function(){t.prototype.destroy.call(this);this._source=null;this._sizeGrid=null;this._offset=null};i._setChanged=function(){if(!this._isChanged){this._isChanged=true;_.timer.callLater(this,this.changeSource)}};i.changeSource=function(){this._isChanged=false;var t=this._source;if(!t||!t.bitmap)return;var i=this.width;var e=this.height;var s=this._sizeGrid;var n=t.sourceWidth;var h=t.sourceHeight;if(!s||n===i&&h===e){this.clear();this.drawTexture(t,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,i,e)}else{this.clear();var r=s[0];var a=s[1];var o=s[2];var l=s[3];var c=s[4];var u=false;if(i==n){l=a=0}if(e==h){r=o=0}if(l+a>i){var _=i;u=true;i=l+a;this.save();this.clipRect(0,0,_,e)}l&&r&&this.drawImage(f.getTexture(t,0,0,l,r),0,0,l,r);a&&r&&this.drawImage(f.getTexture(t,n-a,0,a,r),i-a,0,a,r);l&&o&&this.drawImage(f.getTexture(t,0,h-o,l,o),0,e-o,l,o);a&&o&&this.drawImage(f.getTexture(t,n-a,h-o,a,o),i-a,e-o,a,o);r&&this.drawBitmap(c,f.getTexture(t,l,0,n-l-a,r),l,0,i-l-a,r);o&&this.drawBitmap(c,f.getTexture(t,l,h-o,n-l-a,o),l,e-o,i-l-a,o);l&&this.drawBitmap(c,f.getTexture(t,0,r,l,h-r-o),0,r,l,e-r-o);a&&this.drawBitmap(c,f.getTexture(t,n-a,r,a,h-r-o),i-a,r,a,e-r-o);this.drawBitmap(c,f.getTexture(t,l,r,n-l-a,h-r-o),l,r,i-l-a,e-r-o);if(u)this.restore()}this._repaint()};i.drawBitmap=function(t,i,e,s,n,h){n===void 0&&(n=0);h===void 0&&(h=0);if(n<.1||h<.1)return;if(t&&(i.width!=n||i.height!=h))this.fillTexture(i,e,s,n,h);else this.drawImage(i,e,s,n,h)};n(0,i,"sizeGrid",function(){return this._sizeGrid},function(t){this._sizeGrid=t;this._setChanged()});n(0,i,"width",function(){if(this._width)return this._width;if(this._source)return this._source.sourceWidth;return 0},function(t){if(this._width!=t){this._width=t;this._setChanged()}});n(0,i,"height",function(){if(this._height)return this._height;if(this._source)return this._source.sourceHeight;return 0},function(t){if(this._height!=t){this._height=t;this._setChanged()}});n(0,i,"source",function(){return this._source},function(t){if(t){this._source=t;this._setChanged()}else{this._source=null;this.clear()}});f.getTexture=function(t,i,e,s,n){if(s<=0)s=1;if(n<=0)n=1;t.$_GID||(t.$_GID=Y.getGID());var h;if(!h||!h._getSource()){h=H.createFromTexture(t,i,e,s,n)}return h};return f}(m);var V=function(i){function t(){this._dataSource=null;this._toolTip=null;this._tag=null;this._disabled=false;this._gray=false;t.__super.call(this);this._anchorX=NaN;this._anchorY=NaN;this._widget=G.EMPTY;this.preinitialize();this.createChildren();this.initialize()}a(t,"laya.ui.UIComponent",i);var e=t.prototype;e.destroy=function(t){t===void 0&&(t=true);i.prototype.destroy.call(this,t);this._dataSource=null;this._tag=null;this._toolTip=null};e.preinitialize=function(){};e.createChildren=function(){};e.initialize=function(){};e.measureWidth=function(){var t=0;this.commitMeasure();for(var i=this.numChildren-1;i>-1;i--){var e=this.getChildAt(i);if(e._visible){t=Math.max(e._x+e.width*e.scaleX,t)}}return t};e.commitMeasure=function(){};e.measureHeight=function(){var t=0;this.commitMeasure();for(var i=this.numChildren-1;i>-1;i--){var e=this.getChildAt(i);if(e._visible){t=Math.max(e._y+e.height*e.scaleY,t)}}return t};e._sizeChanged=function(){if(!isNaN(this._anchorX))this.pivotX=this.anchorX*this.width;if(!isNaN(this._anchorY))this.pivotY=this.anchorY*this.height;this.event("resize");if(this._widget!==G.EMPTY)this._widget.resetLayout()};e.onMouseOver=function(t){_.stage.event("showtip",this._toolTip)};e.onMouseOut=function(t){_.stage.event("hidetip",this._toolTip)};e._getWidget=function(){this._widget===G.EMPTY&&(this._widget=this.addComponent(G));return this._widget};e.onCompResize=function(){this._sizeChanged()};e._childChanged=function(t){this.callLater(this._sizeChanged);i.prototype._childChanged.call(this,t)};n(0,e,"centerY",function(){return this._widget.centerY},function(t){if(t!=this._widget.centerY){this._getWidget().centerY=t}});n(0,e,"width",function(){if(this._width)return this._width;return this.measureWidth()},function(t){if(_.superGet(z,this,"width")==t)return;_.superSet(z,this,"width",t);this.callLater(this._sizeChanged)});n(0,e,"bottom",function(){return this._widget.bottom},function(t){if(t!=this._widget.bottom){this._getWidget().bottom=t}});n(0,e,"height",function(){if(this._height)return this._height;return this.measureHeight()},function(t){if(_.superGet(z,this,"height")==t)return;_.superSet(z,this,"height",t);this.callLater(this._sizeChanged)});n(0,e,"left",function(){return this._widget.left},function(t){if(t!=this._widget.left){this._getWidget().left=t}});n(0,e,"dataSource",function(){return this._dataSource},function(t){this._dataSource=t;for(var i in this._dataSource){if(this.hasOwnProperty(i)&&!(typeof this[i]=="function")){this[i]=this._dataSource[i]}}});n(0,e,"centerX",function(){return this._widget.centerX},function(t){if(t!=this._widget.centerX){this._getWidget().centerX=t}});n(0,e,"top",function(){return this._widget.top},function(t){if(t!=this._widget.top){this._getWidget().top=t}});n(0,e,"right",function(){return this._widget.right},function(t){if(t!=this._widget.right){this._getWidget().right=t}});n(0,e,"tag",function(){return this._tag},function(t){this._tag=t});n(0,e,"toolTip",function(){return this._toolTip},function(t){if(this._toolTip!=t){this._toolTip=t;if(t!=null){this.on("mouseover",this,this.onMouseOver);this.on("mouseout",this,this.onMouseOut)}else{this.off("mouseover",this,this.onMouseOver);this.off("mouseout",this,this.onMouseOut)}}});n(0,e,"gray",function(){return this._gray},function(t){if(t!==this._gray){this._gray=t;E.gray(this,t)}});n(0,e,"disabled",function(){return this._disabled},function(t){if(t!==this._disabled){this.gray=this._disabled=t;this.mouseEnabled=!t}});n(0,e,"scaleX",i.prototype._$get_scaleX,function(t){if(_.superGet(z,this,"scaleX")==t)return;_.superSet(z,this,"scaleX",t);this.event("resize")});n(0,e,"scaleY",i.prototype._$get_scaleY,function(t){if(_.superGet(z,this,"scaleY")==t)return;_.superSet(z,this,"scaleY",t);this.event("resize")});n(0,e,"anchorX",function(){return this._anchorX},function(t){if(this._anchorX!=t){this._anchorX=t;this.callLater(this._sizeChanged)}});n(0,e,"anchorY",function(){return this._anchorY},function(t){if(this._anchorY!=t){this._anchorY=t;this.callLater(this._sizeChanged)}});return t}(z);var U=function(t){function i(){this.lockLayer=null;this.popupEffect=function(t){t.scale(1,1);t._effectTween=P.from(t,{x:_.stage.width/2,y:_.stage.height/2,scaleX:0,scaleY:0},300,g.backOut,v.create(this,this.doOpen,[t]),0,false,false)};this.closeEffect=function(t){t._effectTween=P.to(t,{x:_.stage.width/2,y:_.stage.height/2,scaleX:0,scaleY:0},300,g.strongOut,v.create(this,this.doClose,[t]),0,false,false)};i.__super.call(this);this.maskLayer=new z;this.popupEffectHandler=new v(this,this.popupEffect);this.closeEffectHandler=new v(this,this.closeEffect);this.mouseEnabled=this.maskLayer.mouseEnabled=true;this.zOrder=1e3;_.stage.addChild(this);_.stage.on("resize",this,this._onResize);if(N.closeDialogOnSide)this.maskLayer.on("click",this,this._closeOnSide);this._onResize(null)}a(i,"laya.ui.DialogManager",t);var e=i.prototype;e._closeOnSide=function(){var t=this.getChildAt(this.numChildren-1);if(t instanceof laya.ui.Dialog)t.close()};e.setLockView=function(t){if(!this.lockLayer){this.lockLayer=new j;this.lockLayer.mouseEnabled=true;this.lockLayer.size(_.stage.width,_.stage.height)}this.lockLayer.removeChildren();if(t){t.centerX=t.centerY=0;this.lockLayer.addChild(t)}};e._onResize=function(t){var i=this.maskLayer.width=_.stage.width;var e=this.maskLayer.height=_.stage.height;if(this.lockLayer)this.lockLayer.size(i,e);this.maskLayer.graphics.clear(true);this.maskLayer.graphics.drawRect(0,0,i,e,N.popupBgColor);this.maskLayer.alpha=N.popupBgAlpha;for(var s=this.numChildren-1;s>-1;s--){var n=this.getChildAt(s);if(n.isPopupCenter)this._centerDialog(n)}};e._centerDialog=function(t){t.x=Math.round((_.stage.width-t.width>>1)+t.pivotX);t.y=Math.round((_.stage.height-t.height>>1)+t.pivotY)};e.open=function(t,i,e){i===void 0&&(i=false);e===void 0&&(e=false);if(i)this._closeAll();this._clearDialogEffect(t);if(t.isPopupCenter)this._centerDialog(t);this.addChild(t);if(t.isModal||this._getBit(32))_.timer.callLater(this,this._checkMask);if(e&&t.popupEffect!=null)t.popupEffect.runWith(t);else this.doOpen(t);this.event("open")};e._clearDialogEffect=function(t){if(t._effectTween){P.clear(t._effectTween);t._effectTween=null}};e.doOpen=function(t){t.onOpened(t._param)};e.lock=function(t){if(this.lockLayer){if(t)this.addChild(this.lockLayer);else this.lockLayer.removeSelf()}};e.close=function(t){this._clearDialogEffect(t);if(t.isShowEffect&&t.closeEffect!=null)t.closeEffect.runWith([t]);else this.doClose(t);this.event("close")};e.doClose=function(t){t.removeSelf();t.isModal&&this._checkMask();t.closeHandler&&t.closeHandler.runWith(t.closeType);t.onClosed(t.closeType);if(t.autoDestroyAtClosed)t.destroy()};e.closeAll=function(){this._closeAll();this.event("close")};e._closeAll=function(){for(var t=this.numChildren-1;t>-1;t--){var i=this.getChildAt(t);if(i&&i.close!=null){this.doClose(i)}}};e.getDialogsByGroup=function(t){var i=[];for(var e=this.numChildren-1;e>-1;e--){var s=this.getChildAt(e);if(s&&s.group===t){i.push(s)}}return i};e.closeByGroup=function(t){var i=[];for(var e=this.numChildren-1;e>-1;e--){var s=this.getChildAt(e);if(s&&s.group===t){s.close();i.push(s)}}return i};e._checkMask=function(){this.maskLayer.removeSelf();for(var t=this.numChildren-1;t>-1;t--){var i=this.getChildAt(t);if(i&&i.isModal){this.addChildAt(this.maskLayer,t);return}}};return i}(z);var $=function(i){function e(){this._watchMap={};this._widget=null;this._dataSource=null;this._anchorX=NaN;this._anchorY=NaN;this._widget=G.EMPTY;e.__super.call(this)}a(e,"laya.ui.View",i);var t=e.prototype;t.destroy=function(t){t===void 0&&(t=true);this._watchMap=null;i.prototype.destroy.call(this,t)};t.changeData=function(t){var i=this._watchMap[t];if(!i)return;for(var e=0,s=i.length;e<s;e++){var n=i[e];n.exe(this)}};t._sizeChanged=function(){if(!isNaN(this._anchorX))this.pivotX=this.anchorX*this.width;if(!isNaN(this._anchorY))this.pivotY=this.anchorY*this.height;this.event("resize")};t._getWidget=function(){this._widget===G.EMPTY&&(this._widget=this.addComponent(G));return this._widget};t.loadUI=function(t){var i=e.uiMap[t];e.uiMap&&this.createView(i)};n(0,t,"anchorX",function(){return this._anchorX},function(t){if(this._anchorX!=t){this._anchorX=t;this.callLater(this._sizeChanged)}});n(0,t,"centerX",function(){return this._widget.centerX},function(t){if(t!=this._widget.centerX){this._getWidget().centerX=t}});n(0,t,"top",function(){return this._widget.top},function(t){if(t!=this._widget.top){this._getWidget().top=t}});n(0,t,"bottom",function(){return this._widget.bottom},function(t){if(t!=this._widget.bottom){this._getWidget().bottom=t}});n(0,t,"dataSource",function(){return this._dataSource},function(t){this._dataSource=t;for(var i in t){var e=this.getChildByName(i);if(e instanceof laya.ui.UIComponent)e.dataSource=t[i];else if(this.hasOwnProperty(i)&&!(typeof this[i]=="function"))this[i]=t[i]}});n(0,t,"left",function(){return this._widget.left},function(t){if(t!=this._widget.left){this._getWidget().left=t}});n(0,t,"right",function(){return this._widget.right},function(t){if(t!=this._widget.right){this._getWidget().right=t}});n(0,t,"anchorY",function(){return this._anchorY},function(t){if(this._anchorY!=t){this._anchorY=t;this.callLater(this._sizeChanged)}});n(0,t,"centerY",function(){return this._widget.centerY},function(t){if(t!=this._widget.centerY){this._getWidget().centerY=t}});e.regComponent=function(t,i){l.regClass(t,i)};e.regViewRuntime=function(t,i){l.regClass(t,i)};e.regUI=function(t,i){_.loader.cacheRes(t,i)};e.uiMap={};e.__init$=function(){l.regShortClassName([at,J,kt,it,j,gt,J,ct,tt,K,V,bt,St,q,Q,ft,_t,et,pt,xt,st,nt,It,dt,e,rt,yt,Ct,ut,wt,Bt,z,o,D,mt])};return e}(L);var F=function(t){function i(){this._$4__texture=null;i.__super.call(this);this._width=this._height=200;var t=new H;if(_["Texture2D"]){t.bitmap=new _["Texture2D"];this.texture=t}else{throw new Error("WXOpenDataViewer:webgl not found!")}}a(i,"laya.ui.WXOpenDataViewer",t);var e=i.prototype;e.onEnable=function(){this.postMsg({type:"display",rate:_.stage.frameRate});if(s.wx&&s.sharedCanvas)_.timer.frameLoop(1,this,this._onLoop)};e.onDisable=function(){this.postMsg({type:"undisplay"});_.timer.clear(this,this._onLoop)};e._onLoop=function(){this.texture.bitmap.loadImageSource(s.sharedCanvas)};e._postMsg=function(){var t=new w;t.translate(this.x,this.y);var i=_.stage;t.scale(i._canvasTransform.getScaleX()*this.globalScaleX*i.transform.getScaleX(),i._canvasTransform.getScaleY()*this.globalScaleY*i.transform.getScaleY());this.postMsg({type:"changeMatrix",a:t.a,b:t.b,c:t.c,d:t.d,tx:t.tx,ty:t.ty,w:this.width,h:this.height})};e.postMsg=function(t){if(s.wx&&s.wx.getOpenDataContext){var i=s.wx.getOpenDataContext();i.postMessage(t)}};n(0,e,"x",t.prototype._$get_x,function(t){_.superSet(V,this,"x",t);this.callLater(this._postMsg)});n(0,e,"width",t.prototype._$get_width,function(t){_.superSet(V,this,"width",t);if(s.sharedCanvas)s.sharedCanvas.width=t;this.callLater(this._postMsg)});n(0,e,"height",t.prototype._$get_height,function(t){_.superSet(V,this,"height",t);if(s.sharedCanvas)s.sharedCanvas.height=t;this.callLater(this._postMsg)});n(0,e,"y",t.prototype._$get_y,function(t){_.superSet(V,this,"y",t);this.callLater(this._postMsg)});return i}(V);var j=function(t){function i(){this._bgColor=null;i.__super.call(this)}a(i,"laya.ui.Box",t);var e=i.prototype;_.imps(e,{"laya.ui.IBox":true});e._onResize=function(t){this.graphics.clear();this.graphics.drawRect(0,0,this.width,this.height,this._bgColor)};n(0,e,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t;for(var i in t){var e=this.getChildByName(i);if(e)e.dataSource=t[i];else if(this.hasOwnProperty(i)&&!(typeof this[i]=="function"))this[i]=t[i]}});n(0,e,"bgColor",function(){return this._bgColor},function(t){this._bgColor=t;if(t){this._onResize(null);this.on("resize",this,this._onResize)}else{this.graphics.clear();this.off("resize",this,this._onResize)}});return i}(V);var J=function(i){function e(t,i){this.toggle=false;this._bitmap=null;this._text=null;this._strokeColors=null;this._state=0;this._selected=false;this._skin=null;this._autoSize=true;this._sources=null;this._clickHandler=null;this._stateChanged=false;e.__super.call(this);this._labelColors=X.buttonLabelColors;this._stateNum=X.buttonStateNum;i===void 0&&(i="");this.skin=t;this.label=i}a(e,"laya.ui.Button",i);var t=e.prototype;_.imps(t,{"laya.ui.ISelect":true});t.destroy=function(t){t===void 0&&(t=true);i.prototype.destroy.call(this,t);this._bitmap&&this._bitmap.destroy();this._text&&this._text.destroy(t);this._bitmap=null;this._text=null;this._clickHandler=null;this._labelColors=this._sources=this._strokeColors=null};t.createChildren=function(){this.graphics=this._bitmap=new W};t.createText=function(){if(!this._text){this._text=new D;this._text.overflow="hidden";this._text.align="center";this._text.valign="middle";this._text.width=this._width;this._text.height=this._height}};t.initialize=function(){if(this._mouseState!==1){this.mouseEnabled=true;this._setBit(64,true)}this._createListener("mouseover",this,this.onMouse,null,false,false);this._createListener("mouseout",this,this.onMouse,null,false,false);this._createListener("mousedown",this,this.onMouse,null,false,false);this._createListener("mouseup",this,this.onMouse,null,false,false);this._createListener("click",this,this.onMouse,null,false,false)};t.onMouse=function(t){if(this.toggle===false&&this._selected)return;if(t.type==="click"){this.toggle&&(this.selected=!this._selected);this._clickHandler&&this._clickHandler.run();return}!this._selected&&(this.state=e.stateMap[t.type])};t._skinLoaded=function(){this.callLater(this.changeClips);this._setStateChanged();this._sizeChanged();this.event("loaded")};t.changeClips=function(){var t=b.getRes(this._skin);if(!t){console.log("lose skin",this._skin);return}var i=t.sourceWidth;var e=t.sourceHeight/this._stateNum;t.$_GID||(t.$_GID=Y.getGID());var s=t.$_GID+"-"+this._stateNum;var n=A.I.get(s);if(!Y.isOkTextureList(n)){n=null}if(n)this._sources=n;else{this._sources=[];if(this._stateNum===1){this._sources.push(t)}else{for(var h=0;h<this._stateNum;h++){this._sources.push(H.createFromTexture(t,0,e*h,i,e))}}A.I.set(s,this._sources)}if(this._autoSize){this._bitmap.width=this._width||i;this._bitmap.height=this._height||e;if(this._text){this._text.width=this._bitmap.width;this._text.height=this._bitmap.height}}else{this._text&&(this._text.x=i)}};t.measureWidth=function(){this.runCallLater(this.changeClips);if(this._autoSize)return this._bitmap.width;this.runCallLater(this.changeState);return this._bitmap.width+(this._text?this._text.width:0)};t.measureHeight=function(){this.runCallLater(this.changeClips);return this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height};t.changeState=function(){this._stateChanged=false;this.runCallLater(this.changeClips);var t=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[t]);if(this.label){this._text.color=this._labelColors[t];if(this._strokeColors)this._text.strokeColor=this._strokeColors[t]}};t._setStateChanged=function(){if(!this._stateChanged){this._stateChanged=true;this.callLater(this.changeState)}};n(0,t,"skin",function(){return this._skin},function(t){if(this._skin!=t){this._skin=t;if(t){if(!b.getRes(t)){_.loader.load(this._skin,v.create(this,this._skinLoaded),null,"image",1)}else{this._skinLoaded()}}else{this._skinLoaded()}}});n(0,t,"labelPadding",function(){this.createText();return this._text.padding.join(",")},function(t){this.createText();this._text.padding=E.fillArray(X.labelPadding,t,Number)});n(0,t,"state",function(){return this._state},function(t){if(this._state!=t){this._state=t;this._setStateChanged()}});n(0,t,"text",function(){this.createText();return this._text});n(0,t,"stateNum",function(){return this._stateNum},function(t){if(typeof t=="string"){t=parseInt(t)}if(this._stateNum!=t){this._stateNum=t<1?1:t>3?3:t;this.callLater(this.changeClips)}});n(0,t,"label",function(){return this._text?this._text.text:null},function(t){if(!this._text&&!t)return;this.createText();if(this._text.text!=t){t&&!this._text.parent&&this.addChild(this._text);this._text.text=(t+"").replace(/\\n/g,"\n");this._setStateChanged()}});n(0,t,"labelSize",function(){this.createText();return this._text.fontSize},function(t){this.createText();this._text.fontSize=t});n(0,t,"selected",function(){return this._selected},function(t){if(this._selected!=t){this._selected=t;this.state=this._selected?2:0;this.event("change")}});n(0,t,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(t){this._strokeColors=E.fillArray(X.buttonLabelColors,t,String);this._setStateChanged()});n(0,t,"labelColors",function(){return this._labelColors.join(",")},function(t){this._labelColors=E.fillArray(X.buttonLabelColors,t,String);this._setStateChanged()});n(0,t,"labelStroke",function(){this.createText();return this._text.stroke},function(t){this.createText();this._text.stroke=t});n(0,t,"labelStrokeColor",function(){this.createText();return this._text.strokeColor},function(t){this.createText();this._text.strokeColor=t});n(0,t,"labelBold",function(){this.createText();return this._text.bold},function(t){this.createText();this._text.bold=t});n(0,t,"labelFont",function(){this.createText();return this._text.font},function(t){this.createText();this._text.font=t});n(0,t,"labelAlign",function(){this.createText();return this._text.align},function(t){this.createText();this._text.align=t});n(0,t,"clickHandler",function(){return this._clickHandler},function(t){this._clickHandler=t});n(0,t,"sizeGrid",function(){if(this._bitmap.sizeGrid)return this._bitmap.sizeGrid.join(",");return null},function(t){this._bitmap.sizeGrid=E.fillArray(X.defaultSizeGrid,t,Number)});n(0,t,"width",i.prototype._$get_width,function(t){_.superSet(V,this,"width",t);if(this._autoSize){this._bitmap.width=t;this._text&&(this._text.width=t)}});n(0,t,"height",i.prototype._$get_height,function(t){_.superSet(V,this,"height",t);if(this._autoSize){this._bitmap.height=t;this._text&&(this._text.height=t)}});n(0,t,"dataSource",i.prototype._$get_dataSource,function(t){this._dataSource=t;if(typeof t=="number"||typeof t=="string")this.label=t+"";else _.superSet(V,this,"dataSource",t)});n(0,t,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(t){if(t)this._bitmap._offset=E.fillArray([1,1],t,Number);else this._bitmap._offset=[]});h(e,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]);return e}(V);var q=function(i){function e(t){this._bitmap=null;this._skin=null;this._group=null;e.__super.call(this);this.skin=t}a(e,"laya.ui.Image",i);var t=e.prototype;t.destroy=function(t){t===void 0&&(t=true);i.prototype.destroy.call(this,true);this._bitmap&&this._bitmap.destroy();this._bitmap=null};t.dispose=function(){this.destroy(true);_.loader.clearRes(this._skin)};t.createChildren=function(){this.graphics=this._bitmap=new W;this._bitmap.autoCacheCmd=false};t.setSource=function(t,i){if(t===this._skin&&i){this.source=i;this.onCompResize()}};t.measureWidth=function(){return this._bitmap.width};t.measureHeight=function(){return this._bitmap.height};n(0,t,"dataSource",i.prototype._$get_dataSource,function(t){this._dataSource=t;if(typeof t=="string")this.skin=t;else _.superSet(V,this,"dataSource",t)});n(0,t,"source",function(){return this._bitmap.source},function(t){if(!this._bitmap)return;this._bitmap.source=t;this.event("loaded");this.repaint()});n(0,t,"skin",function(){return this._skin},function(t){if(this._skin!=t){this._skin=t;if(t){var i=b.getRes(t);if(i){this.source=i;this.onCompResize()}else _.loader.load(this._skin,v.create(this,this.setSource,[this._skin]),null,"image",1,true,this._group)}else{this.source=null}}});n(0,t,"sizeGrid",function(){if(this._bitmap.sizeGrid)return this._bitmap.sizeGrid.join(",");return null},function(t){this._bitmap.sizeGrid=E.fillArray(X.defaultSizeGrid,t,Number)});n(0,t,"group",function(){return this._group},function(t){if(t&&this._skin)b.setGroup(this._skin,t);this._group=t});n(0,t,"width",i.prototype._$get_width,function(t){_.superSet(V,this,"width",t);this._bitmap.width=t==0?1e-7:t});n(0,t,"height",i.prototype._$get_height,function(t){_.superSet(V,this,"height",t);this._bitmap.height=t==0?1e-7:t});return e}(V);var Q=function(i){function e(t){this._tf=null;e.__super.call(this);t===void 0&&(t="");this.text=t}a(e,"laya.ui.Label",i);var t=e.prototype;t.destroy=function(t){t===void 0&&(t=true);i.prototype.destroy.call(this,t);this._tf=null};t.createChildren=function(){this.addChild(this._tf=new D)};t.changeText=function(t){this._tf.changeText(t)};t.measureWidth=function(){return this._tf.width};t.measureHeight=function(){return this._tf.height};n(0,t,"padding",function(){return this._tf.padding.join(",")},function(t){this._tf.padding=E.fillArray(X.labelPadding,t,Number)});n(0,t,"bold",function(){return this._tf.bold},function(t){this._tf.bold=t});n(0,t,"align",function(){return this._tf.align},function(t){this._tf.align=t});n(0,t,"text",function(){return this._tf.text},function(t){if(this._tf.text!=t){if(t)t=E.adptString(t+"");this._tf.text=t;this.event("change");if(!this._width||!this._height)this.onCompResize()}});n(0,t,"italic",function(){return this._tf.italic},function(t){this._tf.italic=t});n(0,t,"wordWrap",function(){return this._tf.wordWrap},function(t){this._tf.wordWrap=t});n(0,t,"font",function(){return this._tf.font},function(t){this._tf.font=t});n(0,t,"dataSource",i.prototype._$get_dataSource,function(t){this._dataSource=t;if(typeof t=="number"||typeof t=="string")this.text=t+"";else _.superSet(V,this,"dataSource",t)});n(0,t,"color",function(){return this._tf.color},function(t){this._tf.color=t});n(0,t,"valign",function(){return this._tf.valign},function(t){this._tf.valign=t});n(0,t,"leading",function(){return this._tf.leading},function(t){this._tf.leading=t});n(0,t,"fontSize",function(){return this._tf.fontSize},function(t){this._tf.fontSize=t});n(0,t,"bgColor",function(){return this._tf.bgColor},function(t){this._tf.bgColor=t});n(0,t,"borderColor",function(){return this._tf.borderColor},function(t){this._tf.borderColor=t});n(0,t,"stroke",function(){return this._tf.stroke},function(t){this._tf.stroke=t});n(0,t,"strokeColor",function(){return this._tf.strokeColor},function(t){this._tf.strokeColor=t});n(0,t,"textField",function(){return this._tf});n(0,t,"width",function(){if(this._width||this._tf.text)return _.superGet(V,this,"width");return 0},function(t){_.superSet(V,this,"width",t);this._tf.width=t});n(0,t,"height",function(){if(this._height||this._tf.text)return _.superGet(V,this,"height");return 0},function(t){_.superSet(V,this,"height",t);this._tf.height=t});n(0,t,"overflow",function(){return this._tf.overflow},function(t){this._tf.overflow=t});n(0,t,"underline",function(){return this._tf.underline},function(t){this._tf.underline=t});n(0,t,"underlineColor",function(){return this._tf.underlineColor},function(t){this._tf.underlineColor=t});return e}(V);var K=function(i){function e(t,i){this._visibleNum=6;this._button=null;this._list=null;this._isOpen=false;this._itemSize=12;this._labels=[];this._selectedIndex=-1;this._selectHandler=null;this._itemHeight=NaN;this._listHeight=NaN;this._listChanged=false;this._itemChanged=false;this._scrollBarSkin=null;this._isCustomList=false;this.itemRender=null;e.__super.call(this);this._itemColors=X.comboBoxItemColors;this.skin=t;this.labels=i}a(e,"laya.ui.ComboBox",i);var t=e.prototype;t.destroy=function(t){t===void 0&&(t=true);i.prototype.destroy.call(this,t);this._button&&this._button.destroy(t);this._list&&this._list.destroy(t);this._button=null;this._list=null;this._itemColors=null;this._labels=null;this._selectHandler=null};t.createChildren=function(){this.addChild(this._button=new J);this._button.text.align="left";this._button.labelPadding="0,0,0,5";this._button.on("mousedown",this,this.onButtonMouseDown)};t._createList=function(){this._list=new ft;if(this._scrollBarSkin)this._list.vScrollBarSkin=this._scrollBarSkin;this._setListEvent(this._list)};t._setListEvent=function(t){this._list.selectEnable=true;this._list.on("mousedown",this,this.onListDown);this._list.mouseHandler=v.create(this,this.onlistItemMouse,null,false);if(this._list.scrollBar)this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)};t.onListDown=function(t){t.stopPropagation()};t.onScrollBarDown=function(t){t.stopPropagation()};t.onButtonMouseDown=function(t){this.callLater(this.switchTo,[!this._isOpen])};t.measureWidth=function(){return this._button.width};t.measureHeight=function(){return this._button.height};t.changeList=function(){this._listChanged=false;var t=this.width-2;var i=this._itemColors[2];this._itemHeight=this._itemSize+6;this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:t,height:this._itemHeight,fontSize:this._itemSize,color:i}}]};this._list.repeatY=this._visibleNum;this._list.refresh()};t.onlistItemMouse=function(t,i){var e=t.type;if(e==="mouseover"||e==="mouseout"){if(this._isCustomList)return;var s=this._list.getCell(i);if(!s)return;var n=s.getChildByName("label");if(n){if(e==="mouseover"){n.bgColor=this._itemColors[0];n.color=this._itemColors[1]}else{n.bgColor=null;n.color=this._itemColors[2]}}}else if(e==="click"){this.selectedIndex=i;this.isOpen=false}};t.switchTo=function(t){this.isOpen=t};t.changeOpen=function(){this.isOpen=!this._isOpen};t.changeItem=function(){this._itemChanged=false;this._listHeight=this._labels.length>0?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight;if(!this._isCustomList){var t=this._list.graphics;t.clear(true);t.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}var i=this._list.array||[];i.length=0;for(var e=0,s=this._labels.length;e<s;e++){i.push({label:this._labels[e]})}this._list.height=this._listHeight;this._list.array=i};t.changeSelected=function(){this._button.label=this.selectedLabel};t._onStageMouseWheel=function(t){if(!this._list||this._list.contains(t.target))return;this.removeList(null)};t.removeList=function(t){_.stage.off("mousedown",this,this.removeList);_.stage.off("mousewheel",this,this._onStageMouseWheel);this.isOpen=false};n(0,t,"selectedIndex",function(){return this._selectedIndex},function(t){if(this._selectedIndex!=t){this._selectedIndex=t;if(this._labels.length>0)this.changeSelected();else this.callLater(this.changeSelected);this.event("change",[p.EMPTY.setTo("change",this,this)]);this._selectHandler&&this._selectHandler.runWith(this._selectedIndex)}});n(0,t,"skin",function(){return this._button.skin},function(t){if(this._button.skin!=t){this._button.skin=t;this._listChanged=true}});n(0,t,"visibleNum",function(){return this._visibleNum},function(t){this._visibleNum=t;this._listChanged=true});n(0,t,"width",i.prototype._$get_width,function(t){_.superSet(V,this,"width",t);this._button.width=this._width;this._itemChanged=true;this._listChanged=true});n(0,t,"selectedLabel",function(){return this._selectedIndex>-1&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(t){this.selectedIndex=this._labels.indexOf(t)});n(0,t,"labels",function(){return this._labels.join(",")},function(t){if(this._labels.length>0)this.selectedIndex=-1;if(t)this._labels=t.split(",");else this._labels.length=0;this._itemChanged=true});n(0,t,"height",i.prototype._$get_height,function(t){_.superSet(V,this,"height",t);this._button.height=this._height});n(0,t,"selectHandler",function(){return this._selectHandler},function(t){this._selectHandler=t});n(0,t,"labelBold",function(){return this._button.text.bold},function(t){this._button.text.bold=t});n(0,t,"itemColors",function(){return String(this._itemColors)},function(t){this._itemColors=E.fillArray(this._itemColors,t,String);this._listChanged=true});n(0,t,"itemSize",function(){return this._itemSize},function(t){this._itemSize=t;this._listChanged=true});n(0,t,"scrollBar",function(){return this.list.scrollBar});n(0,t,"isOpen",function(){return this._isOpen},function(t){if(this._isOpen!=t){this._isOpen=t;this._button.selected=this._isOpen;if(this._isOpen){this._list||this._createList();this._listChanged&&!this._isCustomList&&this.changeList();this._itemChanged&&this.changeItem();var i=this.localToGlobal(B.TEMP.setTo(0,0));var e=i.y+this._button.height;e=e+this._listHeight<=_.stage.height?e:i.y-this._listHeight;this._list.pos(i.x,e);this._list.zOrder=1001;_._currentStage.addChild(this._list);_.stage.once("mousedown",this,this.removeList);_.stage.on("mousewheel",this,this._onStageMouseWheel);this._list.selectedIndex=this._selectedIndex}else{this._list&&this._list.removeSelf()}}});n(0,t,"scrollBarSkin",function(){return this._scrollBarSkin},function(t){this._scrollBarSkin=t});n(0,t,"sizeGrid",function(){return this._button.sizeGrid},function(t){this._button.sizeGrid=t});n(0,t,"button",function(){return this._button});n(0,t,"list",function(){this._list||this._createList();return this._list},function(t){if(t){t.removeSelf();this._isCustomList=true;this._list=t;this._setListEvent(t);this._itemHeight=t.getCell(0).height+t.spaceY}});n(0,t,"dataSource",i.prototype._$get_dataSource,function(t){this._dataSource=t;if(typeof t=="number"&&Math.floor(t)==t||typeof t=="string")this.selectedIndex=parseInt(t);else if(t instanceof Array)this.labels=t.join(",");else _.superSet(V,this,"dataSource",t)});n(0,t,"labelColors",function(){return this._button.labelColors},function(t){if(this._button.labelColors!=t){this._button.labelColors=t}});n(0,t,"labelPadding",function(){return this._button.text.padding.join(",")},function(t){this._button.text.padding=E.fillArray(X.labelPadding,t,Number)});n(0,t,"labelSize",function(){return this._button.text.fontSize},function(t){this._button.text.fontSize=t});n(0,t,"labelFont",function(){return this._button.text.font},function(t){this._button.text.font=t});n(0,t,"stateNum",function(){return this._button.stateNum},function(t){this._button.stateNum=t});return e}(V);var Z=function(t){function e(){this._tipBox=null;this._tipText=null;this._defaultTipHandler=null;e.__super.call(this);this._tipBox=new V;this._tipBox.addChild(this._tipText=new D);this._tipText.x=this._tipText.y=5;this._tipText.color=e.tipTextColor;this._defaultTipHandler=this._showDefaultTip;_.stage.on("showtip",this,this._onStageShowTip);_.stage.on("hidetip",this,this._onStageHideTip);this.zOrder=1100}a(e,"laya.ui.TipManager",t);var i=e.prototype;i._onStageHideTip=function(t){_.timer.clear(this,this._showTip);this.closeAll();this.removeSelf()};i._onStageShowTip=function(t){_.timer.once(e.tipDelay,this,this._showTip,[t],true)};i._showTip=function(t){if(typeof t=="string"){var i=String(t);if(Boolean(i)){this._defaultTipHandler(i)}}else if(t instanceof laya.utils.Handler){t.run()}else if(typeof t=="function"){t.apply()}if(true){_.stage.on("mousemove",this,this._onStageMouseMove);_.stage.on("mousedown",this,this._onStageMouseDown)}this._onStageMouseMove(null)};i._onStageMouseDown=function(t){this.closeAll()};i._onStageMouseMove=function(t){this._showToStage(this,e.offsetX,e.offsetY)};i._showToStage=function(t,i,e){i===void 0&&(i=0);e===void 0&&(e=0);var s=t.getBounds();t.x=_.stage.mouseX+i;t.y=_.stage.mouseY+e;if(t._x+s.width>_.stage.width){t.x-=s.width+i}if(t._y+s.height>_.stage.height){t.y-=s.height+e}};i.closeAll=function(){_.timer.clear(this,this._showTip);_.stage.off("mousemove",this,this._onStageMouseMove);_.stage.off("mousedown",this,this._onStageMouseDown);this.removeChildren()};i.showDislayTip=function(t){this.addChild(t);this._showToStage(this);_._currentStage.addChild(this)};i._showDefaultTip=function(t){this._tipText.text=t;var i=this._tipBox.graphics;i.clear(true);i.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,e.tipBackColor);this.addChild(this._tipBox);this._showToStage(this);_._currentStage.addChild(this)};n(0,i,"defaultTipHandler",function(){return this._defaultTipHandler},function(t){this._defaultTipHandler=t});e.offsetX=10;e.offsetY=15;e.tipTextColor="#ffffff";e.tipBackColor="#111111";e.tipDelay=200;return e}(V);var tt=function(i){function s(t,i,e){this._sources=null;this._bitmap=null;this._skin=null;this._clipX=1;this._clipY=1;this._clipWidth=0;this._clipHeight=0;this._autoPlay=false;this._interval=50;this._complete=null;this._isPlaying=false;this._index=0;this._clipChanged=false;this._group=null;this._toIndex=-1;s.__super.call(this);i===void 0&&(i=1);e===void 0&&(e=1);this._clipX=i;this._clipY=e;this.skin=t}a(s,"laya.ui.Clip",i);var t=s.prototype;t.destroy=function(t){t===void 0&&(t=true);i.prototype.destroy.call(this,true);this._bitmap&&this._bitmap.destroy();this._bitmap=null;this._sources=null};t.dispose=function(){this.destroy(true);_.loader.clearRes(this._skin)};t.createChildren=function(){this.graphics=this._bitmap=new W};t._onDisplay=function(t){if(this._isPlaying){if(this._getBit(128))this.play();else this.stop()}else if(this._autoPlay){this.play()}};t._skinLoaded=function(){this._setClipChanged();this._sizeChanged();this.event("loaded")};t.changeClip=function(){this._clipChanged=false;if(!this._skin)return;var t=b.getRes(this._skin);if(t){this.loadComplete(this._skin,t)}else{_.loader.load(this._skin,v.create(this,this.loadComplete,[this._skin]))}};t.loadComplete=function(t,i){if(t===this._skin&&i){var e=this._clipWidth||Math.ceil(i.sourceWidth/this._clipX);var s=this._clipHeight||Math.ceil(i.sourceHeight/this._clipY);var n=this._skin+e+s;var h=A.I.get(n);if(!Y.isOkTextureList(h)){h=null}if(h)this._sources=h;else{this._sources=[];for(var r=0;r<this._clipY;r++){for(var a=0;a<this._clipX;a++){this._sources.push(H.createFromTexture(i,e*a,s*r,e,s))}}A.I.set(n,this._sources)}this.index=this._index;this.event("loaded");this.onCompResize()}};t.measureWidth=function(){this.runCallLater(this.changeClip);return this._bitmap.width};t.measureHeight=function(){this.runCallLater(this.changeClip);return this._bitmap.height};t.play=function(t,i){t===void 0&&(t=0);i===void 0&&(i=-1);this._isPlaying=true;this.index=t;this._toIndex=i;this._index++;_.timer.loop(this.interval,this,this._loop);this.on("display",this,this._onDisplay);this.on("undisplay",this,this._onDisplay)};t._loop=function(){if(this._visible&&this._sources){this._index++;if(this._toIndex>-1&&this._index>=this._toIndex)this.stop();else if(this._index>=this._sources.length)this._index=0;this.index=this._index}};t.stop=function(){this._isPlaying=false;_.timer.clear(this,this._loop);this.event("complete")};t._setClipChanged=function(){if(!this._clipChanged){this._clipChanged=true;this.callLater(this.changeClip)}};n(0,t,"interval",function(){return this._interval},function(t){if(this._interval!=t){this._interval=t;if(this._isPlaying)this.play()}});n(0,t,"skin",function(){return this._skin},function(t){if(this._skin!=t){this._skin=t;if(t){if(!b.getRes(t)){_.loader.load(this._skin,v.create(this,this._skinLoaded),null,"image",1)}else{this._skinLoaded()}}else{this._bitmap.source=null}}});n(0,t,"sources",function(){return this._sources},function(t){this._sources=t;this.index=this._index;this.event("loaded")});n(0,t,"clipX",function(){return this._clipX},function(t){this._clipX=t||1;this._setClipChanged()});n(0,t,"clipY",function(){return this._clipY},function(t){this._clipY=t||1;this._setClipChanged()});n(0,t,"total",function(){this.runCallLater(this.changeClip);return this._sources?this._sources.length:0});n(0,t,"clipWidth",function(){return this._clipWidth},function(t){this._clipWidth=t;this._setClipChanged()});n(0,t,"sizeGrid",function(){if(this._bitmap.sizeGrid)return this._bitmap.sizeGrid.join(",");return null},function(t){this._bitmap.sizeGrid=E.fillArray(X.defaultSizeGrid,t,Number)});n(0,t,"group",function(){return this._group},function(t){if(t&&this._skin)b.setGroup(this._skin,t);this._group=t});n(0,t,"clipHeight",function(){return this._clipHeight},function(t){this._clipHeight=t;this._setClipChanged()});n(0,t,"width",i.prototype._$get_width,function(t){_.superSet(V,this,"width",t);this._bitmap.width=t});n(0,t,"height",i.prototype._$get_height,function(t){_.superSet(V,this,"height",t);this._bitmap.height=t});n(0,t,"index",function(){return this._index},function(t){this._index=t;this._bitmap&&this._sources&&(this._bitmap.source=this._sources[t]);this.event("change")});n(0,t,"autoPlay",function(){return this._autoPlay},function(t){if(this._autoPlay!=t){this._autoPlay=t;t?this.play():this.stop()}});n(0,t,"isPlaying",function(){return this._isPlaying},function(t){this._isPlaying=t});n(0,t,"dataSource",i.prototype._$get_dataSource,function(t){this._dataSource=t;if(typeof t=="number"&&Math.floor(t)==t||typeof t=="string")this.index=parseInt(t);else _.superSet(V,this,"dataSource",t)});n(0,t,"bitmap",function(){return this._bitmap});return s}(V);var it=function(i){function t(){this.changeHandler=null;this._gridSize=11;this._bgColor="#ffffff";this._borderColor="#000000";this._inputColor="#000000";this._inputBgColor="#efefef";this._colorPanel=null;this._colorTiles=null;this._colorBlock=null;this._colorInput=null;this._colorButton=null;this._colors=[];this._selectedColor="#000000";this._panelChanged=false;t.__super.call(this)}a(t,"laya.ui.ColorPicker",i);var e=t.prototype;e.destroy=function(t){t===void 0&&(t=true);i.prototype.destroy.call(this,t);this._colorPanel&&this._colorPanel.destroy(t);this._colorButton&&this._colorButton.destroy(t);this._colorPanel=null;this._colorTiles=null;this._colorBlock=null;this._colorInput=null;this._colorButton=null;this._colors=null;this.changeHandler=null};e.createChildren=function(){this.addChild(this._colorButton=new J);this._colorPanel=new j;this._colorPanel.size(230,166);this._colorPanel.addChild(this._colorTiles=new z);this._colorPanel.addChild(this._colorBlock=new z);this._colorPanel.addChild(this._colorInput=new C)};e.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick);this._colorBlock.pos(5,5);this._colorInput.pos(60,5);this._colorInput.size(60,20);this._colorInput.on("change",this,this.onColorInputChange);this._colorInput.on("keydown",this,this.onColorFieldKeyDown);this._colorTiles.pos(5,30);this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove);this._colorTiles.on("click",this,this.onColorTilesClick);this._colorTiles.size(20*this._gridSize,12*this._gridSize);this._colorPanel.on("mousedown",this,this.onPanelMouseDown);this.bgColor=this._bgColor};e.onPanelMouseDown=function(t){t.stopPropagation()};e.changePanel=function(){this._panelChanged=false;var t=this._colorPanel.graphics;t.clear(true);t.drawRect(0,0,230,166,this._bgColor,this._borderColor);this.drawBlock(this._selectedColor);this._colorInput.borderColor=this._borderColor;this._colorInput.bgColor=this._inputBgColor;this._colorInput.color=this._inputColor;t=this._colorTiles.graphics;t.clear(true);var i=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935];for(var e=0;e<12;e++){for(var s=0;s<20;s++){var n=0;if(s===0)n=i[e];else if(s===1)n=0;else n=(((e*3+s/6)%3<<0)+(e/6<<0)*3)*51<<16|s%6*51<<8|(e<<0)%6*51;var h=E.toColor(n);this._colors.push(h);var r=s*this._gridSize;var a=e*this._gridSize;t.drawRect(r,a,this._gridSize,this._gridSize,h,"#000000")}}};e.onColorButtonClick=function(t){if(this._colorPanel.parent)this.close();else this.open()};e.open=function(){var t=this.localToGlobal(new B);var i=t.x+this._colorPanel.width<=_.stage.width?t.x:_.stage.width-this._colorPanel.width;var e=t.y+this._colorButton.height;e=e+this._colorPanel.height<=_.stage.height?e:t.y-this._colorPanel.height;this._colorPanel.pos(i,e);this._colorPanel.zOrder=1001;_._currentStage.addChild(this._colorPanel);_.stage.on("mousedown",this,this.removeColorBox)};e.close=function(){_.stage.off("mousedown",this,this.removeColorBox);this._colorPanel.removeSelf()};e.removeColorBox=function(t){this.close()};e.onColorFieldKeyDown=function(t){if(t.keyCode==13){if(this._colorInput.text)this.selectedColor=this._colorInput.text;else this.selectedColor=null;this.close();t.stopPropagation()}};e.onColorInputChange=function(t){if(this._colorInput.text)this.drawBlock(this._colorInput.text);else this.drawBlock("#FFFFFF")};e.onColorTilesClick=function(t){this.selectedColor=this.getColorByMouse();this.close()};e.onColorTilesMouseMove=function(t){this._colorInput.focus=false;var i=this.getColorByMouse();this._colorInput.text=i;this.drawBlock(i)};e.getColorByMouse=function(){var t=this._colorTiles.getMousePoint();var i=Math.floor(t.x/this._gridSize);var e=Math.floor(t.y/this._gridSize);return this._colors[e*20+i]};e.drawBlock=function(t){var i=this._colorBlock.graphics;i.clear(true);var e=t?t:"#ffffff";i.drawRect(0,0,50,20,e,this._borderColor);t||i.drawLine(0,0,50,20,"#ff0000")};e.changeColor=function(){var t=this.graphics;t.clear(true);var i=this._selectedColor||"#000000";t.drawRect(0,0,this._colorButton.width,this._colorButton.height,i)};e._setPanelChanged=function(){if(!this._panelChanged){this._panelChanged=true;this.callLater(this.changePanel)}};n(0,e,"inputBgColor",function(){return this._inputBgColor},function(t){this._inputBgColor=t;this._setPanelChanged()});n(0,e,"selectedColor",function(){return this._selectedColor},function(t){if(this._selectedColor!=t){this._selectedColor=this._colorInput.text=t;this.drawBlock(t);this.changeColor();this.changeHandler&&this.changeHandler.runWith(this._selectedColor);this.event("change",p.EMPTY.setTo("change",this,this))}});n(0,e,"skin",function(){return this._colorButton.skin},function(t){this._colorButton.once("loaded",this,this.changeColor);this._colorButton.skin=t});n(0,e,"bgColor",function(){return this._bgColor},function(t){this._bgColor=t;this._setPanelChanged()});n(0,e,"borderColor",function(){return this._borderColor},function(t){this._borderColor=t;this._setPanelChanged()});n(0,e,"inputColor",function(){return this._inputColor},function(t){this._inputColor=t;this._setPanelChanged()});return t}(V);var et=function(i){function e(t){this.changeHandler=null;this._bg=null;this._bar=null;this._skin=null;this._value=.5;e.__super.call(this);this.skin=t}a(e,"laya.ui.ProgressBar",i);var t=e.prototype;t.destroy=function(t){t===void 0&&(t=true);i.prototype.destroy.call(this,t);this._bg&&this._bg.destroy(t);this._bar&&this._bar.destroy(t);this._bg=this._bar=null;this.changeHandler=null};t.createChildren=function(){this.addChild(this._bg=new q);this.addChild(this._bar=new q);this._bar._bitmap.autoCacheCmd=false};t._skinLoaded=function(){this._bg.skin=this._skin;this._bar.skin=this._skin.replace(".png","$bar.png");this.callLater(this.changeValue);this._sizeChanged();this.event("loaded")};t.measureWidth=function(){return this._bg.width};t.measureHeight=function(){return this._bg.height};t.changeValue=function(){if(this.sizeGrid){var t=this.sizeGrid.split(",");var i=Number(t[3]);var e=Number(t[1]);var s=this.width-i-e;var n=s*this._value;this._bar.width=i+e+n;this._bar.visible=this._bar.width>i+e}else{this._bar.width=this.width*this._value}};n(0,t,"dataSource",i.prototype._$get_dataSource,function(t){this._dataSource=t;if(typeof t=="number"||typeof t=="string")this.value=Number(t);else _.superSet(V,this,"dataSource",t)});n(0,t,"skin",function(){return this._skin},function(t){if(this._skin!=t){this._skin=t;if(this._skin&&!b.getRes(this._skin)){_.loader.load(this._skin,v.create(this,this._skinLoaded),null,"image",1)}else{this._skinLoaded()}}});n(0,t,"height",i.prototype._$get_height,function(t){_.superSet(V,this,"height",t);this._bg.height=this._height;this._bar.height=this._height});n(0,t,"bar",function(){return this._bar});n(0,t,"value",function(){return this._value},function(t){if(this._value!=t){t=t>1?1:t<0?0:t;this._value=t;this.callLater(this.changeValue);this.event("change");this.changeHandler&&this.changeHandler.runWith(t)}});n(0,t,"bg",function(){return this._bg});n(0,t,"sizeGrid",function(){return this._bg.sizeGrid},function(t){this._bg.sizeGrid=this._bar.sizeGrid=t});n(0,t,"width",i.prototype._$get_width,function(t){_.superSet(V,this,"width",t);this._bg.width=this._width;this.callLater(this.changeValue)});return e}(V);var st=function(i){function e(t){this.rollRatio=.97;this.changeHandler=null;this.scaleBar=true;this.autoHide=false;this.elasticDistance=0;this.elasticBackTime=500;this.upButton=null;this.downButton=null;this.slider=null;this._scrollSize=1;this._skin=null;this._thumbPercent=1;this._target=null;this._lastPoint=null;this._lastOffset=0;this._checkElastic=false;this._isElastic=false;this._value=NaN;this._hide=false;this._clickOnly=true;this._offsets=null;this.isLockedFun=null;this.triggerDownDragLimit=null;this.triggerUpDragLimit=null;e.__super.call(this);this._showButtons=N.showButtons;this._touchScrollEnable=N.touchScrollEnable;this._mouseWheelEnable=N.mouseWheelEnable;this.skin=t;this.max=1}a(e,"laya.ui.ScrollBar",i);var t=e.prototype;t.destroy=function(t){t===void 0&&(t=true);this.stopScroll();this.target=null;i.prototype.destroy.call(this,t);this.upButton&&this.upButton.destroy(t);this.downButton&&this.downButton.destroy(t);this.slider&&this.slider.destroy(t);this.upButton=this.downButton=null;this.slider=null;this.changeHandler=null;this._offsets=null};t.createChildren=function(){this.addChild(this.slider=new nt);this.addChild(this.upButton=new J);this.addChild(this.downButton=new J)};t.initialize=function(){this.slider.showLabel=false;this.slider.tick=0;this.slider.on("change",this,this.onSliderChange);this.slider.setSlider(0,0,0);this.upButton.on("mousedown",this,this.onButtonMouseDown);this.downButton.on("mousedown",this,this.onButtonMouseDown)};t.onSliderChange=function(){if(this._value!=this.slider.value)this.value=this.slider.value};t.onButtonMouseDown=function(t){var i=t.currentTarget===this.upButton;this.slide(i);_.timer.once(X.scrollBarDelayTime,this,this.startLoop,[i]);_.stage.once("mouseup",this,this.onStageMouseUp)};t.startLoop=function(t){_.timer.frameLoop(1,this,this.slide,[t])};t.slide=function(t){if(t)this.value-=this._scrollSize;else this.value+=this._scrollSize};t.onStageMouseUp=function(t){_.timer.clear(this,this.startLoop);_.timer.clear(this,this.slide)};t._skinLoaded=function(){this.slider.skin=this._skin;this.callLater(this.changeScrollBar);this._sizeChanged();this.event("loaded")};t.changeScrollBar=function(){this.upButton.visible=this._showButtons;this.downButton.visible=this._showButtons;if(this._showButtons){this.upButton.skin=this._skin.replace(".png","$up.png");this.downButton.skin=this._skin.replace(".png","$down.png")}if(this.slider.isVertical)this.slider.y=this._showButtons?this.upButton.height:0;else this.slider.x=this._showButtons?this.upButton.width:0;this.resetPositions();this.repaint()};t._sizeChanged=function(){i.prototype._sizeChanged.call(this);this.repaint();this.resetPositions();this.event("change");this.changeHandler&&this.changeHandler.runWith(this.value)};t.resetPositions=function(){if(this.slider.isVertical)this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0);else this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0);this.resetButtonPosition()};t.resetButtonPosition=function(){if(this.slider.isVertical)this.downButton.y=this.slider._y+this.slider.height;else this.downButton.x=this.slider._x+this.slider.width};t.measureWidth=function(){if(this.slider.isVertical)return this.slider.width;return 100};t.measureHeight=function(){if(this.slider.isVertical)return 100;return this.slider.height};t.setScroll=function(t,i,e){this.runCallLater(this._sizeChanged);this.slider.setSlider(t,i,e);this.slider.bar.visible=i>0;if(!this._hide&&this.autoHide)this.visible=false};t.onTargetMouseWheel=function(t){this.value-=t.delta*this._scrollSize;this.target=this._target};t.onTargetMouseDown=function(t){if(this.isLockedFun&&!this.isLockedFun(t))return;this.event("end");this._clickOnly=true;this._lastOffset=0;this._checkElastic=false;this._lastPoint||(this._lastPoint=new B);this._lastPoint.setTo(_.stage.mouseX,_.stage.mouseY);_.timer.clear(this,this.tweenMove);P.clearTween(this);_.stage.once("mouseup",this,this.onStageMouseUp2);_.stage.once("mouseout",this,this.onStageMouseUp2);_.timer.frameLoop(1,this,this.loop)};t.startDragForce=function(){this._clickOnly=true;this._lastOffset=0;this._checkElastic=false;this._lastPoint||(this._lastPoint=new B);this._lastPoint.setTo(_.stage.mouseX,_.stage.mouseY);_.timer.clear(this,this.tweenMove);P.clearTween(this);_.stage.once("mouseup",this,this.onStageMouseUp2);_.stage.once("mouseout",this,this.onStageMouseUp2);_.timer.frameLoop(1,this,this.loop)};t.cancelDragOp=function(){_.stage.off("mouseup",this,this.onStageMouseUp2);_.stage.off("mouseout",this,this.onStageMouseUp2);_.timer.clear(this,this.tweenMove);_.timer.clear(this,this.loop);this._target.mouseEnabled=true};t.checkTriggers=function(t){t===void 0&&(t=false);if(this.value>=0&&this.value-this._lastOffset<=0){if(this.triggerDownDragLimit&&this.triggerDownDragLimit(t)){this.cancelDragOp();this.value=0;return true}}if(this.value<=this.max&&this.value-this._lastOffset>=this.max){if(this.triggerUpDragLimit&&this.triggerUpDragLimit(t)){this.cancelDragOp();this.value=this.max;return true}}return false};t.startTweenMoveForce=function(t){this._lastOffset=t;_.timer.frameLoop(1,this,this.tweenMove,[200])};t.loop=function(){var t=_.stage.mouseY;var i=_.stage.mouseX;this._lastOffset=this.isVertical?t-this._lastPoint.y:i-this._lastPoint.x;if(this._clickOnly){if(Math.abs(this._lastOffset*(this.isVertical?_.stage._canvasTransform.getScaleY():_.stage._canvasTransform.getScaleX()))>1){this._clickOnly=false;if(this.checkTriggers())return;this._offsets||(this._offsets=[]);this._offsets.length=0;this._target.mouseEnabled=false;if(!this.hide&&this.autoHide){this.alpha=1;this.visible=true}this.event("start")}else return}else{if(this.checkTriggers())return}this._offsets.push(this._lastOffset);this._lastPoint.x=i;this._lastPoint.y=t;if(this._lastOffset===0)return;if(!this._checkElastic){if(this.elasticDistance>0){if(!this._checkElastic&&this._lastOffset!=0){if(this._lastOffset>0&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max){this._isElastic=true;this._checkElastic=true}else{this._isElastic=false}}}else{this._checkElastic=true}}if(this._isElastic){if(this._value<=this.min){if(this._lastOffset>0){this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance)}else{this.value-=this._lastOffset*.5;if(this._value>=this.min)this._checkElastic=false}}else if(this._value>=this.max){if(this._lastOffset<0){this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)}else{this.value-=this._lastOffset*.5;if(this._value<=this.max)this._checkElastic=false}}}else{this.value-=this._lastOffset}};t.onStageMouseUp2=function(t){_.stage.off("mouseup",this,this.onStageMouseUp2);_.stage.off("mouseout",this,this.onStageMouseUp2);_.timer.clear(this,this.loop);if(this._clickOnly){if(this._value>=this.min&&this._value<=this.max)return}this._target.mouseEnabled=true;if(this._isElastic){if(this._value<this.min){P.to(this,{value:this.min},this.elasticBackTime,g.sineOut,v.create(this,this.elasticOver))}else if(this._value>this.max){P.to(this,{value:this.max},this.elasticBackTime,g.sineOut,v.create(this,this.elasticOver))}}else{if(!this._offsets)return;if(this._offsets.length<1){this._offsets[0]=this.isVertical?_.stage.mouseY-this._lastPoint.y:_.stage.mouseX-this._lastPoint.x}var i=0;var e=Math.min(this._offsets.length,3);for(var s=0;s<e;s++){i+=this._offsets[this._offsets.length-1-s]}this._lastOffset=i/e;i=Math.abs(this._lastOffset);if(i<2){this.event("end");return}if(i>250)this._lastOffset=this._lastOffset>0?250:-250;var n=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/150)));_.timer.frameLoop(1,this,this.tweenMove,[n])}};t.elasticOver=function(){this._isElastic=false;if(!this.hide&&this.autoHide){P.to(this,{alpha:0},500)}this.event("end")};t.tweenMove=function(t){this._lastOffset*=this.rollRatio;if(this.checkTriggers(true)){return}var i=NaN;if(t>0){if(this._lastOffset>0&&this.value<=this.min){this._isElastic=true;i=-(this.min-t-this.value)*.5;if(this._lastOffset>i)this._lastOffset=i}else if(this._lastOffset<0&&this.value>=this.max){this._isElastic=true;i=-(this.max+t-this.value)*.5;if(this._lastOffset<i)this._lastOffset=i}}this.value-=this._lastOffset;if(Math.abs(this._lastOffset)<.1){_.timer.clear(this,this.tweenMove);if(this._isElastic){if(this._value<this.min){P.to(this,{value:this.min},this.elasticBackTime,g.sineOut,v.create(this,this.elasticOver))}else if(this._value>this.max){P.to(this,{value:this.max},this.elasticBackTime,g.sineOut,v.create(this,this.elasticOver))}else{this.elasticOver()}return}this.event("end");if(!this.hide&&this.autoHide){P.to(this,{alpha:0},500)}}};t.stopScroll=function(){this.onStageMouseUp2(null);_.timer.clear(this,this.tweenMove);P.clearTween(this)};n(0,t,"thumbPercent",function(){return this._thumbPercent},function(t){this.runCallLater(this.changeScrollBar);this.runCallLater(this._sizeChanged);t=t>=1?.99:t;this._thumbPercent=t;if(this.scaleBar){if(this.slider.isVertical)this.slider.bar.height=Math.max(this.slider.height*t,X.scrollBarMinNum);else this.slider.bar.width=Math.max(this.slider.width*t,X.scrollBarMinNum)}});n(0,t,"dataSource",i.prototype._$get_dataSource,function(t){this._dataSource=t;if(typeof t=="number"||typeof t=="string")this.value=Number(t);else _.superSet(V,this,"dataSource",t)});n(0,t,"skin",function(){return this._skin},function(t){if(t==" ")return;if(this._skin!=t){this._skin=t;if(this._skin&&!b.getRes(this._skin)){_.loader.load([this._skin,this._skin.replace(".png","$up.png"),this._skin.replace(".png","$down.png"),this._skin.replace(".png","$bar.png")],v.create(this,this._skinLoaded))}else{this._skinLoaded()}}});n(0,t,"max",function(){return this.slider.max},function(t){this.slider.max=t});n(0,t,"min",function(){return this.slider.min},function(t){this.slider.min=t});n(0,t,"value",function(){return this._value},function(t){if(t!==this._value){this._value=t;if(!this._isElastic){if(this.slider["_value"]!=t){this.slider["_value"]=t;this.slider.changeValue()}this._value=this.slider["_value"]}this.event("change");this.changeHandler&&this.changeHandler.runWith(this._value)}});n(0,t,"isVertical",function(){return this.slider.isVertical},function(t){this.slider.isVertical=t});n(0,t,"sizeGrid",function(){return this.slider.sizeGrid},function(t){this.slider.sizeGrid=t});n(0,t,"scrollSize",function(){return this._scrollSize},function(t){this._scrollSize=t});n(0,t,"target",function(){return this._target},function(t){if(this._target){this._target.off("mousewheel",this,this.onTargetMouseWheel);this._target.off("mousedown",this,this.onTargetMouseDown)}this._target=t;if(t){this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel);this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown)}});n(0,t,"hide",function(){return this._hide},function(t){this._hide=t;this.visible=!t});n(0,t,"showButtons",function(){return this._showButtons},function(t){this._showButtons=t;this.callLater(this.changeScrollBar)});n(0,t,"touchScrollEnable",function(){return this._touchScrollEnable},function(t){this._touchScrollEnable=t;this.target=this._target});n(0,t,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(t){this._mouseWheelEnable=t;this.target=this._target});n(0,t,"lastOffset",function(){return this._lastOffset});n(0,t,"tick",function(){return this.slider.tick},function(t){this.slider.tick=t});return e}(V);var nt=function(i){function e(t){this.changeHandler=null;this.isVertical=true;this.showLabel=true;this._allowClickBack=false;this._max=100;this._min=0;this._tick=1;this._value=0;this._skin=null;this._bg=null;this._progress=null;this._bar=null;this._tx=NaN;this._ty=NaN;this._maxMove=NaN;this._globalSacle=null;e.__super.call(this);this.skin=t}a(e,"laya.ui.Slider",i);var t=e.prototype;t.destroy=function(t){t===void 0&&(t=true);i.prototype.destroy.call(this,t);this._bg&&this._bg.destroy(t);this._bar&&this._bar.destroy(t);this._progress&&this._progress.destroy(t);this._bg=null;this._bar=null;this._progress=null;this.changeHandler=null};t.createChildren=function(){this.addChild(this._bg=new q);this.addChild(this._bar=new J)};t.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown);this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0";if(this._progress)this._progress.sizeGrid=this._bar.sizeGrid;this.allowClickBack=true};t.onBarMouseDown=function(t){this._globalSacle||(this._globalSacle=new B);this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01);this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width;this._tx=_.stage.mouseX;this._ty=_.stage.mouseY;_.stage.on("mousemove",this,this.mouseMove);_.stage.once("mouseup",this,this.mouseUp);_.stage.once("mouseout",this,this.mouseUp);this.showValueText()};t.showValueText=function(){if(this.showLabel){var t=laya.ui.Slider.label;this.addChild(t);t.textField.changeText(this._value+"");if(this.isVertical){t.x=this._bar._x+20;t.y=(this._bar.height-t.height)*.5+this._bar._y}else{t.y=this._bar._y-20;t.x=(this._bar.width-t.width)*.5+this._bar._x}}};t.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()};t.mouseUp=function(t){_.stage.off("mousemove",this,this.mouseMove);_.stage.off("mouseup",this,this.mouseUp);_.stage.off("mouseout",this,this.mouseUp);this.sendChangeEvent("changed");this.hideValueText()};t.mouseMove=function(t){var i=this._value;if(this.isVertical){this._bar.y+=(_.stage.mouseY-this._ty)/this._globalSacle.y;if(this._bar._y>this._maxMove)this._bar.y=this._maxMove;else if(this._bar._y<0)this._bar.y=0;this._value=this._bar._y/this._maxMove*(this._max-this._min)+this._min;if(this._progress)this._progress.height=this._bar._y+.5*this._bar.height}else{this._bar.x+=(_.stage.mouseX-this._tx)/this._globalSacle.x;if(this._bar._x>this._maxMove)this._bar.x=this._maxMove;else if(this._bar._x<0)this._bar.x=0;this._value=this._bar._x/this._maxMove*(this._max-this._min)+this._min;if(this._progress)this._progress.width=this._bar._x+.5*this._bar.width}this._tx=_.stage.mouseX;this._ty=_.stage.mouseY;if(this._tick!=0){var e=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*e)/e}if(this._value!=i){this.sendChangeEvent()}this.showValueText()};t.sendChangeEvent=function(t){t===void 0&&(t="change");this.event(t);this.changeHandler&&this.changeHandler.runWith(this._value)};t._skinLoaded=function(){this._bg.skin=this._skin;this._bar.skin=this._skin.replace(".png","$bar.png");var t=this._skin.replace(".png","$progress.png");if(b.getRes(t)){if(!this._progress){this.addChild(this._progress=new q);this._progress.sizeGrid=this._bar.sizeGrid;this.setChildIndex(this._progress,1)}this._progress.skin=t}this.setBarPoint();this.callLater(this.changeValue);this._sizeChanged();this.event("loaded")};t.setBarPoint=function(){if(this.isVertical)this._bar.x=Math.round((this._bg.width-this._bar.width)*.5);else this._bar.y=Math.round((this._bg.height-this._bar.height)*.5)};t.measureWidth=function(){return Math.max(this._bg.width,this._bar.width)};t.measureHeight=function(){return Math.max(this._bg.height,this._bar.height)};t._sizeChanged=function(){i.prototype._sizeChanged.call(this);if(this.isVertical)this._bg.height=this.height;else this._bg.width=this.width;this.setBarPoint();this.changeValue()};t.setSlider=function(t,i,e){this._value=-1;this._min=t;this._max=i>t?i:t;this.value=e<t?t:e>i?i:e};t.changeValue=function(){if(this.tick!=0){var t=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*t)/t}this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var i=this._max-this._min;if(i===0)i=1;if(this.isVertical){this._bar.y=(this._value-this._min)/i*(this.height-this._bar.height);if(this._progress)this._progress.height=this._bar._y+.5*this._bar.height}else{this._bar.x=(this._value-this._min)/i*(this.width-this._bar.width);if(this._progress)this._progress.width=this._bar._x+.5*this._bar.width}};t.onBgMouseDown=function(t){var i=this._bg.getMousePoint();if(this.isVertical)this.value=i.y/(this.height-this._bar.height)*(this._max-this._min)+this._min;else this.value=i.x/(this.width-this._bar.width)*(this._max-this._min)+this._min};n(0,t,"dataSource",i.prototype._$get_dataSource,function(t){this._dataSource=t;if(typeof t=="number"||typeof t=="string")this.value=Number(t);else _.superSet(V,this,"dataSource",t)});n(0,t,"skin",function(){return this._skin},function(t){if(this._skin!=t){this._skin=t;if(this._skin&&!b.getRes(this._skin)){_.loader.load([this._skin,this._skin.replace(".png","$bar.png")],v.create(this,this._skinLoaded))}else{this._skinLoaded()}}});n(0,t,"tick",function(){return this._tick},function(t){if(this._tick!=t){this._tick=t;this.callLater(this.changeValue)}});n(0,t,"sizeGrid",function(){return this._bg.sizeGrid},function(t){this._bg.sizeGrid=t;this._bar.sizeGrid=t;if(this._progress)this._progress.sizeGrid=this._bar.sizeGrid});n(0,t,"allowClickBack",function(){return this._allowClickBack},function(t){if(this._allowClickBack!=t){this._allowClickBack=t;if(t)this._bg.on("mousedown",this,this.onBgMouseDown);else this._bg.off("mousedown",this,this.onBgMouseDown)}});n(0,t,"max",function(){return this._max},function(t){if(this._max!=t){this._max=t;this.callLater(this.changeValue)}});n(0,t,"min",function(){return this._min},function(t){if(this._min!=t){this._min=t;this.callLater(this.changeValue)}});n(0,t,"bar",function(){return this._bar});n(0,t,"value",function(){return this._value},function(t){if(this._value!=t){var i=this._value;this._value=t;this.changeValue();if(this._value!=i){this.sendChangeEvent()}}});h(e,["label",function(){return this.label=new Q}]);return e}(V);var ht=function(t){var c,l;function u(t){this.gameStopHD=false;this.iconImgTl=null;this._iconImage=null;this._moreBox=null;this._gameBox=null;this.screenType=0;this._moreGameDataUrl="https://abc.layabox.com/public/more/gamelist2.json";this._iconImageObj=null;this.clickCallBack=null;this.closeCallBack=null;this.isShow=false;this.dinfo=null;this.ErrorUrlHttps="https://elastic.layabox.com/";this.tongjiType="bdm";t===void 0&&(t=0);u.__super.call(this);this.screenType=t;this.init()}a(u,"laya.ui.MoreGame",t);var i=u.prototype;i.getLocalDateString=function(t){t===void 0&&(t=0);var i=this.getDateByTimestamp(t).toLocaleDateString();if(f.onLimixiu||f.onMiniGame){var e=new Date;i=u.toLocaleDateString(e.getTime())}var s=new RegExp("/","g");i=i.replace(s,"-");return i};i.getDateByTimestamp=function(t){t===void 0&&(t=0);if(!t||t=="")return new Date;return new Date(t)};i.reportError=function(t,i,e){i===void 0&&(i="");e=e||{};var s=Date.now();var n=new Date(s+0);e.date=n.toLocaleString();e.etype=t;if(t!="error"){if(t!="statistics"){t="statistics"}}e.version="V0.0.1";e.gameId=10100;e.dinfo=this.dinfo;e.channel=-1e3;e.msg=i;e["@timestamp"]=n.toISOString();e.user=this.getUserId();e.openid=this.getOpenId();var h=u.getDay(n);e.rdate=h;e.day=n.getDate()+"";e.hour=n.getHours()+"";e.minute=n.getMinutes()+"";e.gameurl=r.baseURI;e.regTime=0;if(t=="error"){this.sendLog(e,this.tongjiType+"error-"+h.substring(0,6)+"/"+t+"/",t)}else{this.sendLog(e,this.tongjiType+"-"+h.substring(0,6)+"/"+t+"/",t)}};i.getUserId=function(){var t=parseInt(S.getItem("layauserid")+"")||-1;if(t==-1){t=this.randRange(0,1e9);S.setItem("layauserid",t+"")}return t};i.getOpenId=function(){var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";var i=S.getItem("openid");if(i==null||i==""){i="";for(var e=0,s=32;e<s;e++){var n=this.randRange(0,62);i+=t.charAt(n)}S.setItem("openid",i)}return i};i.sendLog=function(t,i,e){var n=this;var s=new y;s.on("error",this,function(t,i,e){if(e&&e.indexOf("[404]")!=-1){var s=new y;s.send(n.ErrorUrlHttps+"garbage/"+i+"/",JSON.stringify(t),"post","text",["Content-Type","application/json"])}},[t,e]);if(f.onBDMiniGame){t.gameurl=""}s.send(this.ErrorUrlHttps+i,JSON.stringify(t),"post","text",["Content-Type","application/json"])};i.initEvent=function(){this.on("click",this,this.onIconClick)};i.onStageResize=function(){var t=Math.min(_.stage.width/_.stage.designWidth,_.stage.height/_.stage.designHeight);if(_.stage.width<720)t=.9;if(this._moreBox){this._moreBox.scale(t,t)}if(this._gameBox){this._gameBox.scale(t,t)}};i.tada=function(t,i,e,s){e===void 0&&(e=1.1);s===void 0&&(s=1);var n=new O;n.reset();n.to(t,{scaleX:e,scaleY:e,rotation:3},i*.1).to(t,{scaleX:e,scaleY:e,rotation:-3},i*.1).to(t,{scaleX:e,scaleY:e,rotation:3},i*.1).to(t,{scaleX:e,scaleY:e,rotation:-3},i*.1).to(t,{scaleX:e,scaleY:e,rotation:3},i*.1).to(t,{scaleX:e,scaleY:e,rotation:-3},i*.1).to(t,{scaleX:e,scaleY:e,rotation:3},i*.1).to(t,{scaleX:e,scaleY:e,rotation:-3},i*.1).to(t,{scaleX:e,scaleY:e,rotation:3},i*.1).to(t,{scaleX:s,scaleY:s,rotation:0},i*.1);n.play(0);return n};i.dispose=function(){this.removeEvent();this.gameStopHD=true;u._moreGameData=null;this._iconImageObj=null;this.clickCallBack=null;this.closeCallBack=null;if(this.iconImgTl){this.iconImgTl.offAll("complete");this.iconImgTl=null}if(this._moreBox){this._moreBox.removeChildren();this._moreBox=null}if(this._gameBox){this._gameBox.removeChildren();this._gameBox=null}if(this._iconImage){this._iconImage.removeSelf();this._iconImage=null}};i.onSetIconType=function(t){this.gameStopHD=!t;this.visible=t};i.checkIconImgHD=function(){if(!this.iconImgTl)this.iconImgTl=this.tada(this._iconImage,1200,1.1,.9);else this.iconImgTl.play(0);this.iconImgTl.on("complete",this,this.onTlComplete)};i.onTlComplete=function(){if(this.parent){this._iconImage.scale(.9,.9);this._iconImage.rotation=0;if(this.gameStopHD&&this.iconImgTl){this.iconImgTl.offAll("complete");this.iconImgTl=null;return}_.timer.once(1e3,this,this.onYanChiPlay)}else{if(this.iconImgTl){this.iconImgTl.offAll();this.iconImgTl=null}}};i.onYanChiPlay=function(){if(this.parent&&this.iconImgTl){this.iconImgTl.play(0)}else{if(this.iconImgTl){this.iconImgTl.offAll("complete");this.iconImgTl=null}}};i.removeEvent=function(){this.off("click",this,this.onIconClick)};i.onIconClick=function(){this.isShow=true;this.clickCallBack!=null&&this.clickCallBack.run();var t=S.getItem("currentTime");var i=this.getLocalDateString();if(t!=i){S.setItem("currentTime",i);this.reportError(u._moreGameData.statid1)}else{this.reportError(u._moreGameData.statid2)}this.onResLoaded()};i.onResLoaded=function(){if(!this._moreBox){this._moreBox=new j;_.stage.addChild(this._moreBox);this._moreBox.zOrder=99999;this._moreBox.left=this._moreBox.right=this._moreBox.top=this._moreBox.bottom=0;var t=this.onCreateImage(u.onGetAtlasDanImgUrl("img_white_bg"),this._moreBox);t.top=t.left=t.right=t.bottom=0;t.sizeGrid="1,1,1,1,1";var i=this.onCreateImage(u.onGetAtlasDanImgUrl("hengfengexian"),this._moreBox);i.left=i.right=0;i.y=132;i.alpha=.2;var e=this.onCreateImage(u.onGetAtlasDanImgUrl("img_font_jingcai"),this._moreBox);e.on("click",this,this.onJiantouImgClick);if(this.isQMP()&&this.screenType){e.pos(15,70)}else{e.pos(15,45)}var s=new ft;this._moreBox.addChild(s);s.itemRender=c;s.selectEnable=true;s.vScrollBarSkin="";s.scrollBar.autoHide=true;s.scrollBar.elasticDistance=250;s.renderHandler=new v(this,this.onGameListRender);var n=u._moreGameData.marvellousGame.gameList;var h=[];h.push(n[0]);h.push(n[1]);var r=this.RandomNumBoth(h.length,n.length-h.length,n.length);if(!r){this.visible=false;return}try{for(var a=0,o=r.length;a<o;a++){var l=r[a];h.push(n[l])}u._moreGameData.marvellousGame.gameList=[];u._moreGameData.marvellousGame.gameList=h;s.array=u._moreGameData.marvellousGame.gameList}catch(t){s.array=u._moreGameData.marvellousGame.gameList}if(this.screenType){s.spaceY=10;s.width=690;if(this.isQMP()){s.height=_.stage.height+130}else{s.height=1139}s.y=139;s.centerX=0}else{}this.onStageResize()}else{this._moreBox.visible=true}};i.RandomNumBoth=function(t,i,e){var s=[];for(var n=t;n<e;n++){s.push(n)}var h=[];var r=s.length;for(n=0;n<r;n++){var a=s.length;var o=Math.floor(Math.random()*s.length);h.push(s[o]);s.splice(o,1);if(s.length<=r-i){return h}}return null};i.isQMP=function(){var t=false;var i=0;if(_.stage.screenMode=="horizontal"){i=f.height%9}else{i=f.width%9}if(f.onAndroid&&i==0){var e=0;if(_.stage.screenMode=="horizontal"){e=f.width}else{e=f.height}if([2280,2160,2244,3120,2248,2340,2310].indexOf(e)!=-1){t=true}}var s=/iPhone/gi.test(f.window.navigator.userAgent)&&(Math.min(f.clientHeight,f.clientWidth)==375&&Math.max(f.clientHeight,f.clientWidth)==812);var n=Math.min(f.clientHeight,f.clientWidth)==414&&Math.max(f.clientHeight,f.clientWidth)==896;if((f.onMiniGame||f.onBDMiniGame)&&!f.onAndroid&&(s||n)){t=true}return t};i.onDrawShapes=function(t,i,e,s){e===void 0&&(e=5);s===void 0&&(s=false);var n=e;if(s)n=0;var h=new z;h.graphics.drawPath(0,0,[["moveTo",e,0],["lineTo",105,0],["arcTo",t,0,t,e,e],["lineTo",t,i],["arcTo",t,i+e,105,i+e,n],["lineTo",e,i+e],["arcTo",0,i+e,0,i,n],["lineTo",0,e],["arcTo",0,0,e,0,e],["closePath"]],{fillStyle:"#ff0000"});return h};i.onCreateMaskImg=function(t,i){var e=this.onCreateImage(u.onGetAtlasDanImgUrl("dayuan"),i);var s=this.onCreateImage(t,e);s.pos(11,10);var n=new z;n.graphics.drawCircle(71,74,68,"#ff0000");s.mask=n;e.scale(.7,.7);return e};i.onGameListRender=function(t,i){var e=u._moreGameData.marvellousGame.gameList;if(i<0||i>e.length-1)return;var s=e[i];t.init(s,this.screenType,new v(this,this.onItemClickCallBack))};i.onItemClickCallBack=function(e){var s=this;if(!swan.navigateToMiniProgram)return;var t=e.appKey;var i=e.path;var n=e.extendInfo;swan.navigateToMiniProgram({appKey:t,path:i,extraData:n,success:function t(i){},fail:function t(i){},complete:function t(i){s.reportError(e.statid)}.bind(this)})};i.onJiantouImgClick=function(t){this.isShow=false;if(this._moreBox){this._moreBox.visible=false}this.closeCallBack!=null&&this.closeCallBack.run()};i.onCreateLabel=function(t,i,e,s,n,h,r){e===void 0&&(e=24);s===void 0&&(s="#000000");n===void 0&&(n=false);h===void 0&&(h="center");r===void 0&&(r=10);var a=new Q;a.text=t;a.font="Microsoft YaHei";a.fontSize=e;a.color=s;a.bold=true;a.leading=r;a.valign="middle";a.align=h;a.wordWrap=n;i.addChild(a);return a};i.onCreateImage=function(t,i){var e=new q;e.skin=t;i.addChild(e);return e};i.init=function(){var t=f.window.navigator.userAgent;var i=t.indexOf("SwanGame")>-1;this.visible=false;if(i){this.dinfo=JSON.stringify(laya.bd.mini.BMiniAdapter.systemInfo);this.onGetAdvsListData()}};i.randRange=function(t,i){return Math.floor(Math.random()*(i-t+1))+t};i.onGetAdvsListData=function(){var i=this;var t=this.randRange(1e4,1e6);var e=this._moreGameDataUrl+"?"+t;u._http.open("get",e,true);u._http.setRequestHeader("Content-Type","application/x-www-form-urlencoded");u._http.responseType="text";u._http.onerror=function(t){i._onError(t)};u._http.onload=function(t){i._onLoad(t)};u._http.send(null)};i._onError=function(t){this.error("Request failed Status:"+u._http.status+" text:"+u._http.statusText)};i._onLoad=function(t){var i=u._http;var e=i.status!==undefined?i.status:200;if(e===200||e===204||e===0){this.complete()}else{this.error("["+i.status+"]"+i.statusText+":"+i.responseURL)}};i.error=function(t){this.event("error",t)};i.complete=function(){var i=true;try{var t=u._http.response||u._http.responseText;u._moreGameData=JSON.parse(t);this.initUI()}catch(t){i=false;this.error(t.message)}};i.initUI=function(){if(u._moreGameData.isOpen&&this.screenType){if(!this._iconImage){this._iconImage=new q;this.addChild(this._iconImage)}this._iconImage.skin=u.onGetImgSkinUrl(u._moreGameData.icon);if(this._iconImageObj){this._iconImage.size(this._iconImageObj.width,this._iconImageObj.height);this._iconImage.pivot(this._iconImageObj.width/2,this._iconImageObj.height/2);this._iconImage.pos(this._iconImageObj.width/2,this._iconImageObj.height/2)}this.visible=true;this.initEvent();this.gameStopHD=false;this.checkIconImgHD()}else{this.visible=false}};i.setIconSize=function(t,i){if(this._iconImage){this._iconImage.size(t,i);this._iconImage.pivot(t/2,i/2);this._iconImage.pos(t/2,i/2)}this._iconImageObj={width:t,height:i}};u.toLocaleDateString=function(t){return u.getDateFormatStr(t,"/")};u.getDateFormatStr=function(t,i){i===void 0&&(i="yynndd");var e=new Date(t);var s=e.getFullYear();var n=e.getMonth()+1;var h=e.getDate();var r=e.getHours();var a=e.getMinutes();var o=e.getSeconds();switch(i){case"yynndd":return s.toString()+"年"+n.toString()+"月"+h.toString()+"日";break;case"/":return s.toString()+"/"+n.toString()+"/"+h.toString();break}return s.toString()+"年"+n.toString()+"月"+h.toString()+"日"+r.toString()+"时"+a.toString()+"分"+o.toString()+"秒"};u.getDay=function(t){var i=t.getMonth()+1;var e=t.getDate();var s=t.getFullYear()+""+(i<10?"0"+i:i)+""+(e<10?"0"+e:e);return s};u.onGetAtlasDanImgUrl=function(t){return u._moreGameData.imgPath+u._moreGameData.atlas+t+".png"};u.onGetImgSkinUrl=function(t){return u._moreGameData.imgPath+t};u.onGetIconImgSkinUrl=function(t){return u._moreGameData.iconPath+t};u._moreGameData=null;h(u,["_http",function(){return this._http=new f.window.XMLHttpRequest}]);u.__init$=function(){c=function(t){function i(){this.titleLabel=null;this.gameListBox=null;i.__super.call(this)}a(i,"",t);var e=i.prototype;e.init=function(t,i,e){if(!this.titleLabel){this.titleLabel=this.onCreateLabel(t.title,this,32,"#3d3939");this.titleLabel.pos(8,0);this.titleLabel.size(162,50)}else{this.titleLabel.text=t.title}if(!this.gameListBox){this.gameListBox=new j;this.addChild(this.gameListBox);var s=0;var n=65;var h=175;for(var r=0,a=t.gameList.length;r<a;r++){var o=new l;o.init(t.gameList[r],i,e);o.x=s+r*h;o.y=n;this.gameListBox.addChild(o)}}else{for(r=0,a=this.gameListBox._children.length;r<a;r++){o=this.gameListBox._children[r];o.init(t.gameList[r],i,e)}}this.size(695,340)};e.onCreateLabel=function(t,i,e,s,n){e===void 0&&(e=26);s===void 0&&(s="#000000");n===void 0&&(n=true);var h=new Q;h.text=t;h.font="Microsoft YaHei";h.fontSize=e;h.color=s;h.bold=n;h.leading=10;h.valign="middle";h.align="center";h.overflow="hidden";i.addChild(h);return h};return i}(j);l=function(t){function i(){this.kuangImg=null;this.iconNameLabel=null;this.iconImg=null;this.playImg=null;this.itemData=null;this.callBackHandler=null;i.__super.call(this)}a(i,"",t);var e=i.prototype;e.MoveGameItem=function(){};e.initEvent=function(){this.on("click",this,this.onItemClick)};e.onItemClick=function(){this.callBackHandler!=null&&this.callBackHandler.runWith([this.itemData])};e.init=function(t,i,e){this.itemData=t;this.callBackHandler=e;if(!this.kuangImg)this.kuangImg=this.onCreateImage(u.onGetAtlasDanImgUrl("dayuan"),this);else{this.kuangImg.skin=u.onGetAtlasDanImgUrl("dayuan")}if(!this.iconImg){this.iconImg=this.onCreateImage(u.onGetIconImgSkinUrl(t.icon),this);var s=new z;s.graphics.drawCircle(71,74,68,"#ff0000");this.iconImg.mask=s;this.iconImg.pos(13,10)}else{this.iconImg.skin=u.onGetIconImgSkinUrl(t.icon)}if(!this.iconNameLabel){this.iconNameLabel=this.onCreateLabel(t.name,this,28,"#3d3939");this.iconNameLabel.pos(7,165)}else{this.iconNameLabel.text=t.name}if(!this.playImg){this.playImg=this.onCreateImage(u.onGetAtlasDanImgUrl("img_play"),this);this.playImg.pos(12,210)}else{this.playImg.skin=u.onGetAtlasDanImgUrl("img_play")}this.size(165,270);this.initEvent()};e.onCreateLabel=function(t,i,e,s,n){e===void 0&&(e=24);s===void 0&&(s="#000000");n===void 0&&(n=false);var h=new Q;h.text=t;h.font="Microsoft YaHei";h.fontSize=e;h.color=s;h.bold=n;h.leading=10;h.valign="middle";h.align="center";h.size(152,44);h.overflow="hidden";i.addChild(h);return h};e.onCreateImage=function(t,i){var e=new q;e.skin=t;i.addChild(e);return e};return i}(j)};return u}($);var rt=function(i){function s(){this.closeHandler=null;this.popupEffect=null;this.closeEffect=null;this.group=null;this.isModal=false;this.isShowEffect=true;this.isPopupCenter=true;this.closeType=null;this._dragArea=null;this._param=null;this._effectTween=null;s.__super.call(this);this.popupEffect=s.manager.popupEffectHandler;this.closeEffect=s.manager.closeEffectHandler;this._dealDragArea();this.on("click",this,this._onClick)}a(s,"laya.ui.Dialog",i);var t=s.prototype;t._dealDragArea=function(){var t=this.getChildByName("drag");if(t){this.dragArea=t._x+","+t._y+","+t.width+","+t.height;t.removeSelf()}};t._onMouseDown=function(t){var i=this.getMousePoint();if(this._dragArea.contains(i.x,i.y))this.startDrag();else this.stopDrag()};t._onClick=function(t){var i=t.target;if(i){switch(i.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(i.name);return}}};t.open=function(t,i){t===void 0&&(t=true);this._dealDragArea();this._param=i;s.manager.open(this,t,this.isShowEffect);s.manager.lock(false)};t.close=function(t){this.closeType=t;s.manager.close(this)};t.destroy=function(t){t===void 0&&(t=true);this.closeHandler=null;this.popupEffect=null;this.closeEffect=null;this._dragArea=null;i.prototype.destroy.call(this,t)};t.show=function(t,i){t===void 0&&(t=false);i===void 0&&(i=true);this._open(false,t,i)};t.popup=function(t,i){t===void 0&&(t=false);i===void 0&&(i=true);this._open(true,t,i)};t._open=function(t,i,e){this.isModal=t;this.isShowEffect=e;s.manager.lock(true);this.open(i)};n(0,t,"dragArea",function(){if(this._dragArea)return this._dragArea.toString();return null},function(t){if(t){var i=E.fillArray([0,0,0,0],t,Number);this._dragArea=new k(i[0],i[1],i[2],i[3]);this.on("mousedown",this,this._onMouseDown)}else{this._dragArea=null;this.off("mousedown",this,this._onMouseDown)}});n(0,t,"isPopup",function(){return this.parent!=null});n(0,t,"zOrder",i.prototype._$get_zOrder,function(t){_.superSet($,this,"zOrder",t);s.manager._checkMask()});n(1,s,"manager",function(){return s._manager=s._manager||new U},function(t){s._manager=t});s.setLockView=function(t){s.manager.setLockView(t)};s.lock=function(t){s.manager.lock(t)};s.closeAll=function(){s.manager.closeAll()};s.getDialogsByGroup=function(t){return s.manager.getDialogsByGroup(t)};s.closeByGroup=function(t){return s.manager.closeByGroup(t)};s.CLOSE="close";s.CANCEL="cancel";s.SURE="sure";s.NO="no";s.YES="yes";s.OK="ok";s._manager=null;return s}($);var at=function(t){function i(){this._items=null;this._selectedIndex=0;i.__super.call(this);this._setIndexHandler=v.create(this,this.setIndex,null,false)}a(i,"laya.ui.ViewStack",t);var e=i.prototype;_.imps(e,{"laya.ui.IItem":true});e.setItems=function(t){this.removeChildren();var i=0;for(var e=0,s=t.length;e<s;e++){var n=t[e];if(n){n.name="item"+i;this.addChild(n);i++}}this.initItems()};e.addItem=function(t){t.name="item"+this._items.length;this.addChild(t);this.initItems()};e._afterInited=function(){this.initItems()};e.initItems=function(){this._items=[];for(var t=0;t<1e4;t++){var i=this.getChildByName("item"+t);if(i==null){break}this._items.push(i);i.visible=t==this._selectedIndex}};e.setSelect=function(t,i){if(this._items&&t>-1&&t<this._items.length){this._items[t].visible=i}};e.setIndex=function(t){this.selectedIndex=t};n(0,e,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t;if(typeof t=="number"&&Math.floor(t)==t||typeof t=="string"){this.selectedIndex=parseInt(t)}else{for(var i in this._dataSource){if(this.hasOwnProperty(i)){this[i]=this._dataSource[i]}}}});n(0,e,"selectedIndex",function(){return this._selectedIndex},function(t){if(this._selectedIndex!=t){this.setSelect(this._selectedIndex,false);this._selectedIndex=t;this.setSelect(this._selectedIndex,true)}});n(0,e,"selection",function(){return this._selectedIndex>-1&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(t){this.selectedIndex=this._items.indexOf(t)});n(0,e,"items",function(){return this._items});n(0,e,"setIndexHandler",function(){return this._setIndexHandler},function(t){this._setIndexHandler=t});return i}(j);var ot=function(t){function i(){this._space=0;this._align="none";this._itemChanged=false;i.__super.call(this)}a(i,"laya.ui.LayoutBox",t);var e=i.prototype;e.addChild=function(t){t.on("resize",this,this.onResize);this._setItemChanged();return laya.display.Node.prototype.addChild.call(this,t)};e.onResize=function(t){this._setItemChanged()};e.addChildAt=function(t,i){t.on("resize",this,this.onResize);this._setItemChanged();return laya.display.Node.prototype.addChildAt.call(this,t,i)};e.removeChildAt=function(t){this.getChildAt(t).off("resize",this,this.onResize);this._setItemChanged();return laya.display.Node.prototype.removeChildAt.call(this,t)};e.refresh=function(){this._setItemChanged()};e.changeItems=function(){this._itemChanged=false};e.sortItem=function(t){if(t)t.sort(function(t,i){return t.y-i.y})};e._setItemChanged=function(){if(!this._itemChanged){this._itemChanged=true;this.callLater(this.changeItems)}};n(0,e,"space",function(){return this._space},function(t){this._space=t;this._setItemChanged()});n(0,e,"align",function(){return this._align},function(t){this._align=t;this._setItemChanged()});return i}(j);var lt=function(t){function e(t,i){this.selectHandler=null;this._items=null;this._selectedIndex=-1;this._skin=null;this._direction="horizontal";this._space=0;this._labels=null;this._labelColors=null;this._labelFont=null;this._labelStrokeColor=null;this._strokeColors=null;this._labelStroke=NaN;this._labelSize=0;this._labelBold=false;this._labelPadding=null;this._labelAlign=null;this._stateNum=0;this._labelChanged=false;e.__super.call(this);this.skin=i;this.labels=t}a(e,"laya.ui.UIGroup",t);var i=e.prototype;_.imps(i,{"laya.ui.IItem":true});i.preinitialize=function(){this.mouseEnabled=true};i.destroy=function(t){t===void 0&&(t=true);laya.ui.UIComponent.prototype.destroy.call(this,t);this._items&&(this._items.length=0);this._items=null;this.selectHandler=null};i.addItem=function(t,i){i===void 0&&(i=true);var e=t;var s=this._items.length;e.name="item"+s;this.addChild(e);this.initItems();if(i&&s>0){var n=this._items[s-1];if(this._direction=="horizontal"){e.x=n._x+n.width+this._space}else{e.y=n._y+n.height+this._space}}else{if(i){e.x=0;e.y=0}}return s};i.delItem=function(t,i){i===void 0&&(i=true);var e=this._items.indexOf(t);if(e!=-1){var s=t;this.removeChild(s);for(var n=e+1,h=this._items.length;n<h;n++){var r=this._items[n];r.name="item"+(n-1);if(i){if(this._direction=="horizontal"){r.x-=s.width+this._space}else{r.y-=s.height+this._space}}}this.initItems();if(this._selectedIndex>-1){var a=0;a=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1;this._selectedIndex=-1;this.selectedIndex=a}}};i._afterInited=function(){this.initItems()};i.initItems=function(){this._items||(this._items=[]);this._items.length=0;for(var t=0;t<1e4;t++){var i=this.getChildByName("item"+t);if(i==null)break;this._items.push(i);i.selected=t===this._selectedIndex;i.clickHandler=v.create(this,this.itemClick,[t],false)}};i.itemClick=function(t){this.selectedIndex=t};i.setSelect=function(t,i){if(this._items&&t>-1&&t<this._items.length)this._items[t].selected=i};i._skinLoaded=function(){this._setLabelChanged();this.event("loaded")};i.createItem=function(t,i){return null};i.changeLabels=function(){this._labelChanged=false;if(this._items){var t=0;for(var i=0,e=this._items.length;i<e;i++){var s=this._items[i];this._skin&&(s.skin=this._skin);this._labelColors&&(s.labelColors=this._labelColors);this._labelSize&&(s.labelSize=this._labelSize);this._labelStroke&&(s.labelStroke=this._labelStroke);this._labelStrokeColor&&(s.labelStrokeColor=this._labelStrokeColor);this._strokeColors&&(s.strokeColors=this._strokeColors);this._labelBold&&(s.labelBold=this._labelBold);this._labelPadding&&(s.labelPadding=this._labelPadding);this._labelAlign&&(s.labelAlign=this._labelAlign);this._stateNum&&(s.stateNum=this._stateNum);this._labelFont&&(s.labelFont=this._labelFont);if(this._direction==="horizontal"){s.y=0;s.x=t;t+=s.width+this._space}else{s.x=0;s.y=t;t+=s.height+this._space}}}this._sizeChanged()};i.commitMeasure=function(){this.runCallLater(this.changeLabels)};i._setLabelChanged=function(){if(!this._labelChanged){this._labelChanged=true;this.callLater(this.changeLabels)}};n(0,i,"labelStrokeColor",function(){return this._labelStrokeColor},function(t){if(this._labelStrokeColor!=t){this._labelStrokeColor=t;this._setLabelChanged()}});n(0,i,"skin",function(){return this._skin},function(t){if(this._skin!=t){this._skin=t;if(this._skin&&!b.getRes(this._skin)){_.loader.load(this._skin,v.create(this,this._skinLoaded),null,"image",1)}else{this._skinLoaded()}}});n(0,i,"selectedIndex",function(){return this._selectedIndex},function(t){if(this._selectedIndex!=t){this.setSelect(this._selectedIndex,false);this._selectedIndex=t;this.setSelect(t,true);this.event("change");this.selectHandler&&this.selectHandler.runWith(this._selectedIndex)}});n(0,i,"labels",function(){return this._labels},function(t){if(this._labels!=t){this._labels=t;this.removeChildren();this._setLabelChanged();if(this._labels){var i=this._labels.split(",");for(var e=0,s=i.length;e<s;e++){var n=this.createItem(this._skin,i[e]);n.name="item"+e;this.addChild(n)}}this.initItems()}});n(0,i,"strokeColors",function(){return this._strokeColors},function(t){if(this._strokeColors!=t){this._strokeColors=t;this._setLabelChanged()}});n(0,i,"labelColors",function(){return this._labelColors},function(t){if(this._labelColors!=t){this._labelColors=t;this._setLabelChanged()}});n(0,i,"labelStroke",function(){return this._labelStroke},function(t){if(this._labelStroke!=t){this._labelStroke=t;this._setLabelChanged()}});n(0,i,"labelSize",function(){return this._labelSize},function(t){if(this._labelSize!=t){this._labelSize=t;this._setLabelChanged()}});n(0,i,"stateNum",function(){return this._stateNum},function(t){if(this._stateNum!=t){this._stateNum=t;this._setLabelChanged()}});n(0,i,"labelBold",function(){return this._labelBold},function(t){if(this._labelBold!=t){this._labelBold=t;this._setLabelChanged()}});n(0,i,"labelFont",function(){return this._labelFont},function(t){if(this._labelFont!=t){this._labelFont=t;this._setLabelChanged()}});n(0,i,"labelPadding",function(){return this._labelPadding},function(t){if(this._labelPadding!=t){this._labelPadding=t;this._setLabelChanged()}});n(0,i,"direction",function(){return this._direction},function(t){this._direction=t;this._setLabelChanged()});n(0,i,"space",function(){return this._space},function(t){this._space=t;this._setLabelChanged()});n(0,i,"items",function(){return this._items});n(0,i,"selection",function(){return this._selectedIndex>-1&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(t){this.selectedIndex=this._items.indexOf(t)});n(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t;if(typeof t=="number"&&Math.floor(t)==t||typeof t=="string")this.selectedIndex=parseInt(t);else if(t instanceof Array)this.labels=t.join(",");else _.superSet(j,this,"dataSource",t)});return e}(j);var ct=function(t){function e(t,i){i===void 0&&(i="");e.__super.call(this,t,i)}a(e,"laya.ui.CheckBox",t);var i=e.prototype;i.preinitialize=function(){laya.ui.UIComponent.prototype.preinitialize.call(this);this.toggle=true;this._autoSize=false};i.initialize=function(){t.prototype.initialize.call(this);this.createText();this._text.align="left";this._text.valign="top";this._text.width=0};n(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t;if(typeof t=="boolean")this.selected=t;else if(typeof t=="string")this.selected=t==="true";else _.superSet(J,this,"dataSource",t)});return e}(J);var ut=function(t){function i(){this._list=null;this._source=null;this._renderHandler=null;this._spaceLeft=10;this._spaceBottom=0;this._keepStatus=true;i.__super.call(this);this.width=this.height=200}a(i,"laya.ui.Tree",t);var e=i.prototype;_.imps(e,{"laya.ui.IRender":true});e.destroy=function(t){t===void 0&&(t=true);laya.ui.UIComponent.prototype.destroy.call(this,t);this._list&&this._list.destroy(t);this._list=null;this._source=null;this._renderHandler=null};e.createChildren=function(){this.addChild(this._list=new ft);this._list.renderHandler=v.create(this,this.renderItem,null,false);this._list.repeatX=1;this._list.on("change",this,this.onListChange)};e.onListChange=function(t){this.event("change")};e.getArray=function(){var t=[];var i;for(var e in this._source){i=this._source[e];if(this.getParentOpenStatus(i)){i.x=this._spaceLeft*this.getDepth(i);t.push(i)}}return t};e.getDepth=function(t,i){i===void 0&&(i=0);if(t.nodeParent==null)return i;else return this.getDepth(t.nodeParent,i+1)};e.getParentOpenStatus=function(t){var i=t.nodeParent;if(i==null){return true}else{if(i.isOpen){if(i.nodeParent!=null)return this.getParentOpenStatus(i);else return true}else{return false}}};e.renderItem=function(t,i){var e=t.dataSource;if(e){t.left=e.x;var s=t.getChildByName("arrow");if(s){if(e.hasChild){s.visible=true;s.index=e.isOpen?1:0;s.tag=i;s.off("click",this,this.onArrowClick);s.on("click",this,this.onArrowClick)}else{s.visible=false}}var n=t.getChildByName("folder");if(n){if(n.clipY==2){n.index=e.isDirectory?0:1}else{n.index=e.isDirectory?e.isOpen?1:0:2}}this._renderHandler&&this._renderHandler.runWith([t,i])}};e.onArrowClick=function(t){var i=t.currentTarget;var e=i.tag;this._list.array[e].isOpen=!this._list.array[e].isOpen;this.event("open");this._list.array=this.getArray()};e.setItemState=function(t,i){if(!this._list.array[t])return;this._list.array[t].isOpen=i;this._list.array=this.getArray()};e.fresh=function(){this._list.array=this.getArray();this.repaint()};e.parseXml=function(t,i,e,s){var n;var h=t.childNodes;var r=h.length;if(!s){n={};var a=t.attributes;var o;for(var l in a){o=a[l];var c=o.nodeName;var u=o.nodeValue;n[c]=u=="true"?true:u=="false"?false:u}n.nodeParent=e;if(r>0)n.isDirectory=true;n.hasChild=r>0;i.push(n)}for(var _=0;_<r;_++){var f=h[_];this.parseXml(f,i,n,false)}};e.parseOpenStatus=function(t,i){for(var e=0,s=i.length;e<s;e++){var n=i[e];if(n.isDirectory){for(var h=0,r=t.length;h<r;h++){var a=t[h];if(a.isDirectory&&this.isSameParent(a,n)&&n.label==a.label){n.isOpen=a.isOpen;break}}}}};e.isSameParent=function(t,i){if(t.nodeParent==null&&i.nodeParent==null)return true;else if(t.nodeParent==null||i.nodeParent==null)return false;else{if(t.nodeParent.label==i.nodeParent.label)return this.isSameParent(t.nodeParent,i.nodeParent);else return false}};e.filter=function(t){if(Boolean(t)){var i=[];this.getFilterSource(this._source,i,t);this._list.array=i}else{this._list.array=this.getArray()}};e.getFilterSource=function(t,i,e){e=e.toLocaleLowerCase();var s;for(var n in t){s=t[n];if(!s.isDirectory&&String(s.label).toLowerCase().indexOf(e)>-1){s.x=0;i.push(s)}if(s.child&&s.child.length>0){this.getFilterSource(s.child,i,e)}}};n(0,e,"spaceBottom",function(){return this._list.spaceY},function(t){this._list.spaceY=t});n(0,e,"keepStatus",function(){return this._keepStatus},function(t){this._keepStatus=t});n(0,e,"itemRender",function(){return this._list.itemRender},function(t){this._list.itemRender=t});n(0,e,"array",function(){return this._list.array},function(t){if(this._keepStatus&&this._list.array&&t){this.parseOpenStatus(this._list.array,t)}this._source=t;this._list.array=this.getArray()});n(0,e,"mouseHandler",function(){return this._list.mouseHandler},function(t){this._list.mouseHandler=t});n(0,e,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t;_.superSet(j,this,"dataSource",t)});n(0,e,"source",function(){return this._source});n(0,e,"scrollBar",function(){return this._list.scrollBar});n(0,e,"list",function(){return this._list});n(0,e,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(t){this._list.vScrollBarSkin=t});n(0,e,"renderHandler",function(){return this._renderHandler},function(t){this._renderHandler=t});n(0,e,"selectedIndex",function(){return this._list.selectedIndex},function(t){this._list.selectedIndex=t});n(0,e,"spaceLeft",function(){return this._spaceLeft},function(t){this._spaceLeft=t});n(0,e,"selectedItem",function(){return this._list.selectedItem},function(t){this._list.selectedItem=t});n(0,e,"width",t.prototype._$get_width,function(t){_.superSet(j,this,"width",t);this._list.width=t});n(0,e,"height",t.prototype._$get_height,function(t){_.superSet(j,this,"height",t);this._list.height=t});n(0,e,"xml",null,function(t){var i=[];this.parseXml(t.childNodes[0],i,null,true);this.array=i});n(0,e,"selectedPath",function(){if(this._list.selectedItem){return this._list.selectedItem.path}return null});return i}(j);var _t=function(t){function i(){this._content=null;this._vScrollBar=null;this._hScrollBar=null;this._scrollChanged=false;this._usedCache=null;this._elasticEnabled=false;i.__super.call(this);this.width=this.height=100}a(i,"laya.ui.Panel",t);var e=i.prototype;e.destroy=function(t){t===void 0&&(t=true);laya.ui.UIComponent.prototype.destroy.call(this,t);this._content&&this._content.destroy(t);this._vScrollBar&&this._vScrollBar.destroy(t);this._hScrollBar&&this._hScrollBar.destroy(t);this._vScrollBar=null;this._hScrollBar=null;this._content=null};e.destroyChildren=function(){this._content.destroyChildren()};e.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new j)};e.addChild=function(t){t.on("resize",this,this.onResize);this._setScrollChanged();return this._content.addChild(t)};e.onResize=function(){this._setScrollChanged()};e.addChildAt=function(t,i){t.on("resize",this,this.onResize);this._setScrollChanged();return this._content.addChildAt(t,i)};e.removeChild=function(t){t.off("resize",this,this.onResize);this._setScrollChanged();return this._content.removeChild(t)};e.removeChildAt=function(t){this.getChildAt(t).off("resize",this,this.onResize);this._setScrollChanged();return this._content.removeChildAt(t)};e.removeChildren=function(t,i){t===void 0&&(t=0);i===void 0&&(i=2147483647);this._content.removeChildren(t,i);this._setScrollChanged();return this};e.getChildAt=function(t){return this._content.getChildAt(t)};e.getChildByName=function(t){return this._content.getChildByName(t)};e.getChildIndex=function(t){return this._content.getChildIndex(t)};e.changeScroll=function(){this._scrollChanged=false;var t=this.contentWidth||1;var i=this.contentHeight||1;var e=this._vScrollBar;var s=this._hScrollBar;var n=e&&i>this._height;var h=s&&t>this._width;var r=n?this._width-e.width:this._width;var a=h?this._height-s.height:this._height;if(e){e.x=this._width-e.width;e.y=0;e.height=this._height-(h?s.height:0);e.scrollSize=Math.max(this._height*.033,1);e.thumbPercent=a/i;e.setScroll(0,i-a,e.value)}if(s){s.x=0;s.y=this._height-s.height;s.width=this._width-(n?e.width:0);s.scrollSize=Math.max(this._width*.033,1);s.thumbPercent=r/t;s.setScroll(0,t-r,s.value)}};e._sizeChanged=function(){laya.ui.UIComponent.prototype._sizeChanged.call(this);this.setContentSize(this._width,this._height)};e.setContentSize=function(t,i){var e=this._content;e.width=t;e.height=i;e._style.scrollRect||(e.scrollRect=k.create());e._style.scrollRect.setTo(0,0,t,i);e.scrollRect=e.scrollRect};e.onScrollBarChange=function(t){var i=this._content._style.scrollRect;if(i){var e=Math.round(t.value);t.isVertical?i.y=e:i.x=e;this._content.scrollRect=i}};e.scrollTo=function(t,i){t===void 0&&(t=0);i===void 0&&(i=0);if(this.vScrollBar)this.vScrollBar.value=i;if(this.hScrollBar)this.hScrollBar.value=t};e.refresh=function(){this.changeScroll()};e.onScrollStart=function(){this._usedCache||(this._usedCache=_.superGet(j,this,"cacheAs"));_.superSet(j,this,"cacheAs","none");this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd);this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)};e.onScrollEnd=function(){_.superSet(j,this,"cacheAs",this._usedCache)};e._setScrollChanged=function(){if(!this._scrollChanged){this._scrollChanged=true;this.callLater(this.changeScroll)}};n(0,e,"numChildren",function(){return this._content.numChildren});n(0,e,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(t){if(this._hScrollBar==null){laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new bt);this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]);this._hScrollBar.target=this._content;this._hScrollBar.elasticDistance=this._elasticEnabled?200:0;this._setScrollChanged()}this._hScrollBar.skin=t});n(0,e,"contentWidth",function(){var t=0;for(var i=this._content.numChildren-1;i>-1;i--){var e=this._content.getChildAt(i);t=Math.max(e._x+e.width*e.scaleX-e.pivotX,t)}return t});n(0,e,"contentHeight",function(){var t=0;for(var i=this._content.numChildren-1;i>-1;i--){var e=this._content.getChildAt(i);t=Math.max(e._y+e.height*e.scaleY-e.pivotY,t)}return t});n(0,e,"width",t.prototype._$get_width,function(t){_.superSet(j,this,"width",t);this._setScrollChanged()});n(0,e,"hScrollBar",function(){return this._hScrollBar});n(0,e,"content",function(){return this._content});n(0,e,"height",t.prototype._$get_height,function(t){_.superSet(j,this,"height",t);this._setScrollChanged()});n(0,e,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(t){if(this._vScrollBar==null){laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new yt);this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]);this._vScrollBar.target=this._content;this._vScrollBar.elasticDistance=this._elasticEnabled?200:0;this._setScrollChanged()}this._vScrollBar.skin=t});n(0,e,"vScrollBar",function(){return this._vScrollBar});n(0,e,"cacheAs",t.prototype._$get_cacheAs,function(t){_.superSet(j,this,"cacheAs",t);this._usedCache=null;if(t!=="none"){this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart);this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)}else{this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart);this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart)}});n(0,e,"elasticEnabled",function(){return this._elasticEnabled},function(t){this._elasticEnabled=t;if(this._vScrollBar){this._vScrollBar.elasticDistance=t?200:0}if(this._hScrollBar){this._hScrollBar.elasticDistance=t?200:0}});return i}(j);var ft=function(t){function i(){this.selectHandler=null;this.renderHandler=null;this.mouseHandler=null;this.selectEnable=false;this.totalPage=0;this._$componentType="List";this._content=null;this._scrollBar=null;this._itemRender=null;this._repeatX=0;this._repeatY=0;this._repeatX2=0;this._repeatY2=0;this._spaceX=0;this._spaceY=0;this._array=null;this._startIndex=0;this._selectedIndex=-1;this._page=0;this._isVertical=true;this._cellSize=20;this._cellOffset=0;this._isMoved=false;this.cacheContent=false;this._createdLine=0;this._cellChanged=false;this._usedCache=null;this._elasticEnabled=false;this._preLen=0;i.__super.call(this);this._cells=[];this._offset=new B}a(i,"laya.ui.List",t);var e=i.prototype;_.imps(e,{"laya.ui.IRender":true,"laya.ui.IItem":true});e.destroy=function(t){t===void 0&&(t=true);this._content&&this._content.destroy(t);this._scrollBar&&this._scrollBar.destroy(t);laya.ui.UIComponent.prototype.destroy.call(this,t);this._content=null;this._scrollBar=null;this._itemRender=null;this._cells=null;this._array=null;this.selectHandler=this.renderHandler=this.mouseHandler=null};e.createChildren=function(){this.addChild(this._content=new j)};e.onScrollStart=function(){this._usedCache||(this._usedCache=_.superGet(j,this,"cacheAs"));_.superSet(j,this,"cacheAs","none");this._scrollBar.once("end",this,this.onScrollEnd)};e.onScrollEnd=function(){_.superSet(j,this,"cacheAs",this._usedCache)};e._removePreScrollBar=function(){var t=this.removeChildByName("scrollBar");if(t)t.destroy(true)};e.changeCells=function(){this._cellChanged=false;if(this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var t=this._getOneCell();var i=t.width+this._spaceX||1;var e=t.height+this._spaceY||1;if(this._width>0)this._repeatX2=this._isVertical?Math.round(this._width/i):Math.ceil(this._width/i);if(this._height>0)this._repeatY2=this._isVertical?Math.ceil(this._height/e):Math.round(this._height/e);var s=this._width?this._width:i*this.repeatX-this._spaceX;var n=this._height?this._height:e*this.repeatY-this._spaceY;this._cellSize=this._isVertical?e:i;this._cellOffset=this._isVertical?e*Math.max(this._repeatY2,this._repeatY)-n-this._spaceY:i*Math.max(this._repeatX2,this._repeatX)-s-this._spaceX;if(this._isVertical&&this.vScrollBarSkin)this._scrollBar.height=n;else if(!this._isVertical&&this.hScrollBarSkin)this._scrollBar.width=s;this.setContentSize(s,n);var h=this._isVertical?this.repeatX:this.repeatY;var r=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,h,r);this._createdLine=r;if(this._array){this.array=this._array;this.runCallLater(this.renderItems)}}};e._getOneCell=function(){if(this._cells.length===0){var t=this.createItem();this._offset.setTo(t._x,t._y);if(this.cacheContent)return t;this._cells.push(t)}return this._cells[0]};e._createItems=function(t,i,e){var s=this._content;var n=this._getOneCell();var h=n.width+this._spaceX;var r=n.height+this._spaceY;if(this.cacheContent){var a=new j;a.cacheAs="normal";a.pos((this._isVertical?0:t)*h,(this._isVertical?t:0)*r);this._content.addChild(a);s=a}else{var o=[];for(var l=this._cells.length-1;l>-1;l--){var c=this._cells[l];c.removeSelf();o.push(c)}this._cells.length=0}for(var u=t;u<e;u++){for(var _=0;_<i;_++){if(o&&o.length){n=o.pop()}else{n=this.createItem()}n.x=(this._isVertical?_:u)*h-s._x;n.y=(this._isVertical?u:_)*r-s._y;n.name="item"+(u*i+_);s.addChild(n);this.addCell(n)}}};e.createItem=function(){var t=[];if(typeof this._itemRender=="function"){var i=new this._itemRender}else{i=M.createComp(this._itemRender,null,null,t)}if(t.length==0&&i["_watchMap"]){var e=i["_watchMap"];for(var s in e){var n=e[s];for(var h=0;h<n.length;h++){var r=n[h];t.push(r.comp,r.prop,r.value)}}}if(t.length)i["_$bindData"]=t;return i};e.addCell=function(t){t.on("click",this,this.onCellMouse);t.on("rightclick",this,this.onCellMouse);t.on("mouseover",this,this.onCellMouse);t.on("mouseout",this,this.onCellMouse);t.on("mousedown",this,this.onCellMouse);t.on("mouseup",this,this.onCellMouse);this._cells.push(t)};e._afterInited=function(){this.initItems()};e.initItems=function(){if(!this._itemRender&&this.getChildByName("item0")!=null){this.repeatX=1;var t=0;t=0;for(var i=0;i<1e4;i++){var e=this.getChildByName("item"+i);if(e){this.addCell(e);t++;continue}break}this.repeatY=t}};e.setContentSize=function(t,i){this._content.width=t;this._content.height=i;if(this._scrollBar||this._offset.x!=0||this._offset.y!=0){this._content._style.scrollRect||(this._content.scrollRect=k.create());this._content._style.scrollRect.setTo(-this._offset.x,-this._offset.y,t,i);this._content.scrollRect=this._content.scrollRect}this.event("resize")};e.onCellMouse=function(t){if(t.type==="mousedown")this._isMoved=false;var i=t.currentTarget;var e=this._startIndex+this._cells.indexOf(i);if(e<0)return;if(t.type==="click"||t.type==="rightclick"){if(this.selectEnable&&!this._isMoved)this.selectedIndex=e;else this.changeCellState(i,true,0)}else if((t.type==="mouseover"||t.type==="mouseout")&&this._selectedIndex!==e){this.changeCellState(i,t.type==="mouseover",0)}this.mouseHandler&&this.mouseHandler.runWith([t,e])};e.changeCellState=function(t,i,e){var s=t.getChildByName("selectBox");if(s){this.selectEnable=true;s.visible=i;s.index=e}};e._sizeChanged=function(){laya.ui.UIComponent.prototype._sizeChanged.call(this);this.setContentSize(this.width,this.height);if(this._scrollBar)this.callLater(this.onScrollBarChange)};e.onScrollBarChange=function(t){this.runCallLater(this.changeCells);var i=this._scrollBar.value;var e=this._isVertical?this.repeatX:this.repeatY;var s=this._isVertical?this.repeatY:this.repeatX;var n=Math.floor(i/this._cellSize);if(!this.cacheContent){var h=n*e;var r=0;if(h>this._startIndex){r=h-this._startIndex;var a=true;var o=this._startIndex+e*(s+1);this._isMoved=true}else if(h<this._startIndex){r=this._startIndex-h;a=false;o=this._startIndex-1;this._isMoved=true}for(var l=0;l<r;l++){if(a){var c=this._cells.shift();this._cells[this._cells.length]=c;var u=o+l}else{c=this._cells.pop();this._cells.unshift(c);u=o-l}var _=Math.floor(u/e)*this._cellSize;this._isVertical?c.y=_:c.x=_;this.renderItem(c,u)}this._startIndex=h;this.changeSelectStatus()}else{r=s+1;if(this._createdLine-n<r){this._createItems(this._createdLine,e,this._createdLine+r);this.renderItems(this._createdLine*e,0);this._createdLine+=r}}var f=this._content._style.scrollRect;if(this._isVertical){f.y=i-this._offset.y;f.x=-this._offset.x}else{f.y=-this._offset.y;f.x=i-this._offset.x}this._content.scrollRect=f};e.posCell=function(t,i){if(!this._scrollBar)return;var e=this._isVertical?this.repeatX:this.repeatY;var s=this._isVertical?this.repeatY:this.repeatX;var n=Math.floor(i/e)*this._cellSize;this._isVertical?t._y=n:t.x=n};e.changeSelectStatus=function(){for(var t=0,i=this._cells.length;t<i;t++){this.changeCellState(this._cells[t],this._selectedIndex===this._startIndex+t,1)}};e.renderItems=function(t,i){t===void 0&&(t=0);i===void 0&&(i=0);for(var e=t,s=i||this._cells.length;e<s;e++){this.renderItem(this._cells[e],this._startIndex+e)}this.changeSelectStatus()};e.renderItem=function(t,i){if(this._array&&i>=0&&i<this._array.length){t.visible=true;if(t["_$bindData"]){t["_dataSource"]=this._array[i];this._bindData(t,this._array[i])}else t.dataSource=this._array[i];if(!this.cacheContent){this.posCell(t,i)}if(this.hasListener("render"))this.event("render",[t,i]);if(this.renderHandler)this.renderHandler.runWith([t,i])}else{t.visible=false;t.dataSource=null}};e._bindData=function(t,i){var e=t._$bindData;for(var s=0,n=e.length;s<n;s++){var h=e[s++];var r=e[s++];var a=e[s];var o=E.getBindFun(a);h[r]=o.call(this,i)}};e.updateArray=function(t){this._array=t;var i=0;if(this._array){i=this._preLen-this._startIndex;if(i>=0)this.renderItems(i);this._preLen=this._array.length}if(this._scrollBar){var e=t.length;var s=this._isVertical?this.repeatX:this.repeatY;var n=this._isVertical?this.repeatY:this.repeatX;var h=Math.ceil(e/s);if(h>=n){this._scrollBar.thumbPercent=n/h;this._scrollBar.slider["_max"]=(h-n)*this._cellSize+this._cellOffset}}};e.refresh=function(){this.array=this._array};e.getItem=function(t){if(t>-1&&t<this._array.length){return this._array[t]}return null};e.changeItem=function(t,i){if(t>-1&&t<this._array.length){this._array[t]=i;if(t>=this._startIndex&&t<this._startIndex+this._cells.length){this.renderItem(this.getCell(t),t)}}};e.setItem=function(t,i){this.changeItem(t,i)};e.addItem=function(t){this._array.push(t);this.array=this._array};e.addItemAt=function(t,i){this._array.splice(i,0,t);this.array=this._array};e.deleteItem=function(t){this._array.splice(t,1);this.array=this._array};e.getCell=function(t){this.runCallLater(this.changeCells);if(t>-1&&this._cells){return this._cells[(t-this._startIndex)%this._cells.length]}return null};e.scrollTo=function(t){if(this._scrollBar){var i=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(t/i)*this._cellSize}else{this.startIndex=t}};e.tweenTo=function(t,i,e){i===void 0&&(i=200);if(this._scrollBar){this._scrollBar.stopScroll();var s=this._isVertical?this.repeatX:this.repeatY;P.to(this._scrollBar,{value:Math.floor(t/s)*this._cellSize},i,null,e,0,true)}else{this.startIndex=t;if(e)e.run()}};e._setCellChanged=function(){if(!this._cellChanged){this._cellChanged=true;this.callLater(this.changeCells)}};e.commitMeasure=function(){this.runCallLater(this.changeCells)};n(0,e,"cacheAs",t.prototype._$get_cacheAs,function(t){_.superSet(j,this,"cacheAs",t);if(this._scrollBar){this._usedCache=null;if(t!=="none")this._scrollBar.on("start",this,this.onScrollStart);else this._scrollBar.off("start",this,this.onScrollStart)}});n(0,e,"content",function(){return this._content});n(0,e,"height",t.prototype._$get_height,function(t){if(t!=this._height){_.superSet(j,this,"height",t);this._setCellChanged()}});n(0,e,"itemRender",function(){return this._itemRender},function(t){if(this._itemRender!=t){this._itemRender=t;for(var i=this._cells.length-1;i>-1;i--){this._cells[i].destroy()}this._cells.length=0;this._setCellChanged()}});n(0,e,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(t){this._removePreScrollBar();var i=new yt;i.name="scrollBar";i.right=0;i.skin=t;i.elasticDistance=this._elasticEnabled?200:0;this.scrollBar=i;this.addChild(i);this._setCellChanged()});n(0,e,"page",function(){return this._page},function(t){this._page=t;if(this._array){this._page=t>0?t:0;this._page=this._page<this.totalPage?this._page:this.totalPage-1;this.startIndex=this._page*this.repeatX*this.repeatY}});n(0,e,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(t){this._removePreScrollBar();var i=new bt;i.name="scrollBar";i.bottom=0;i.skin=t;i.elasticDistance=this._elasticEnabled?200:0;this.scrollBar=i;this.addChild(i);this._setCellChanged()});n(0,e,"repeatX",function(){return this._repeatX>0?this._repeatX:this._repeatX2>0?this._repeatX2:1},function(t){this._repeatX=t;this._setCellChanged()});n(0,e,"scrollBar",function(){return this._scrollBar},function(t){if(this._scrollBar!=t){this._scrollBar=t;if(t){this._isVertical=this._scrollBar.isVertical;this.addChild(this._scrollBar);this._scrollBar.on("change",this,this.onScrollBarChange)}}});n(0,e,"width",t.prototype._$get_width,function(t){if(t!=this._width){_.superSet(j,this,"width",t);this._setCellChanged()}});n(0,e,"repeatY",function(){return this._repeatY>0?this._repeatY:this._repeatY2>0?this._repeatY2:1},function(t){this._repeatY=t;this._setCellChanged()});n(0,e,"spaceX",function(){return this._spaceX},function(t){this._spaceX=t;this._setCellChanged()});n(0,e,"spaceY",function(){return this._spaceY},function(t){this._spaceY=t;this._setCellChanged()});n(0,e,"selectedIndex",function(){return this._selectedIndex},function(t){if(this._selectedIndex!=t){this._selectedIndex=t;this.changeSelectStatus();this.event("change");this.selectHandler&&this.selectHandler.runWith(t);this.startIndex=this._startIndex}});n(0,e,"selectedItem",function(){return this._selectedIndex!=-1?this._array[this._selectedIndex]:null},function(t){this.selectedIndex=this._array.indexOf(t)});n(0,e,"length",function(){return this._array?this._array.length:0});n(0,e,"selection",function(){return this.getCell(this._selectedIndex)},function(t){this.selectedIndex=this._startIndex+this._cells.indexOf(t)});n(0,e,"startIndex",function(){return this._startIndex},function(t){this._startIndex=t>0?t:0;this.callLater(this.renderItems)});n(0,e,"array",function(){return this._array},function(t){this.runCallLater(this.changeCells);this._array=t||[];this._preLen=this._array.length;var i=this._array.length;this.totalPage=Math.ceil(i/(this.repeatX*this.repeatY));this._selectedIndex=this._selectedIndex<i?this._selectedIndex:i-1;this.startIndex=this._startIndex;if(this._scrollBar){this._scrollBar.stopScroll();var e=this._isVertical?this.repeatX:this.repeatY;var s=this._isVertical?this.repeatY:this.repeatX;var n=Math.ceil(i/e);var h=this._cellOffset>0?this.totalPage+1:this.totalPage;if(h>1&&n>=s){this._scrollBar.scrollSize=this._cellSize;this._scrollBar.thumbPercent=s/n;this._scrollBar.setScroll(0,(n-s)*this._cellSize+this._cellOffset,this._scrollBar.value);this._scrollBar.target=this._content}else{this._scrollBar.setScroll(0,0,0);this._scrollBar.target=this._content}}});n(0,e,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t;if(typeof t=="number"&&Math.floor(t)==t||typeof t=="string")this.selectedIndex=parseInt(t);else if(t instanceof Array)this.array=t;else _.superSet(j,this,"dataSource",t)});n(0,e,"cells",function(){this.runCallLater(this.changeCells);return this._cells});n(0,e,"elasticEnabled",function(){return this._elasticEnabled},function(t){this._elasticEnabled=t;if(this._scrollBar){this._scrollBar.elasticDistance=t?200:0}});return i}(j);var dt=function(i){function e(t){this._bg=null;this._skin=null;e.__super.call(this);t===void 0&&(t="");this.text=t;this.skin=this.skin}a(e,"laya.ui.TextInput",i);var t=e.prototype;t.preinitialize=function(){this.mouseEnabled=true};t.destroy=function(t){t===void 0&&(t=true);i.prototype.destroy.call(this,t);this._bg&&this._bg.destroy();this._bg=null};t.createChildren=function(){this.addChild(this._tf=new C);this._tf.padding=X.inputLabelPadding;this._tf.on("input",this,this._onInput);this._tf.on("enter",this,this._onEnter);this._tf.on("blur",this,this._onBlur);this._tf.on("focus",this,this._onFocus)};t._onFocus=function(){this.event("focus",this)};t._onBlur=function(){this.event("blur",this)};t._onInput=function(){this.event("input",this)};t._onEnter=function(){this.event("enter",this)};t.initialize=function(){this.width=128;this.height=22};t._skinLoaded=function(){this._bg||(this.graphics=this._bg=new W);this._bg.source=b.getRes(this._skin);this._width&&(this._bg.width=this._width);this._height&&(this._bg.height=this._height);this._sizeChanged();this.event("loaded")};t.select=function(){this._tf.select()};t.setSelection=function(t,i){this._tf.setSelection(t,i)};n(0,t,"text",i.prototype._$get_text,function(t){if(this._tf.text!=t){t=t+"";this._tf.text=t;this.event("change")}});n(0,t,"bg",function(){return this._bg},function(t){this.graphics=this._bg=t});n(0,t,"multiline",function(){return this._tf.multiline},function(t){this._tf.multiline=t});n(0,t,"skin",function(){return this._skin},function(t){if(this._skin!=t){this._skin=t;if(this._skin&&!b.getRes(this._skin)){_.loader.load(this._skin,v.create(this,this._skinLoaded),null,"image",1)}else{this._skinLoaded()}}});n(0,t,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(t){this._bg||(this.graphics=this._bg=new W);this._bg.sizeGrid=E.fillArray(X.defaultSizeGrid,t,Number)});n(0,t,"width",i.prototype._$get_width,function(t){_.superSet(Q,this,"width",t);this._bg&&(this._bg.width=t)});n(0,t,"height",i.prototype._$get_height,function(t){_.superSet(Q,this,"height",t);this._bg&&(this._bg.height=t)});n(0,t,"editable",function(){return this._tf.editable},function(t){this._tf.editable=t});n(0,t,"restrict",function(){return this._tf.restrict},function(t){this._tf.restrict=t});n(0,t,"prompt",function(){return this._tf.prompt},function(t){this._tf.prompt=t});n(0,t,"promptColor",function(){return this._tf.promptColor},function(t){this._tf.promptColor=t});n(0,t,"maxChars",function(){return this._tf.maxChars},function(t){this._tf.maxChars=t});n(0,t,"focus",function(){return this._tf.focus},function(t){this._tf.focus=t});n(0,t,"type",function(){return this._tf.type},function(t){this._tf.type=t});return e}(Q);var gt=function(t){function i(){this._oldW=0;this._oldH=0;i.__super.call(this)}a(i,"laya.ui.ScaleBox",t);var e=i.prototype;e.onEnable=function(){_.stage.on("resize",this,this.onResize);this.onResize()};e.onDisable=function(){_.stage.off("resize",this,this.onResize)};e.onResize=function(){if(this.width>0&&this.height>0){var t=Math.min(_.stage.width/this._oldW,_.stage.height/this._oldH);_.superSet(j,this,"width",_.stage.width);_.superSet(j,this,"height",_.stage.height);this.scale(t,t)}};n(0,e,"width",t.prototype._$get_width,function(t){_.superSet(j,this,"width",t);this._oldW=t});n(0,e,"height",t.prototype._$get_height,function(t){_.superSet(j,this,"height",t);this._oldH=t});return i}(j);var pt=function(i){function e(t,i){this._value=null;i===void 0&&(i="");e.__super.call(this,t,i)}a(e,"laya.ui.Radio",i);var t=e.prototype;t.destroy=function(t){t===void 0&&(t=true);i.prototype.destroy.call(this,t);this._value=null};t.preinitialize=function(){laya.ui.UIComponent.prototype.preinitialize.call(this);this.toggle=false;this._autoSize=false};t.initialize=function(){i.prototype.initialize.call(this);this.createText();this._text.align="left";this._text.valign="top";this._text.width=0;this.on("click",this,this.onClick)};t.onClick=function(t){this.selected=true};n(0,t,"value",function(){return this._value!=null?this._value:this.label},function(t){this._value=t});return e}(J);var mt=function(i){function e(t,i){this._valueArr=null;this._indexMap=null;this._sheet=null;this._direction="horizontal";this._spaceX=0;this._spaceY=0;this._align="left";this._wordsW=0;this._wordsH=0;e.__super.call(this);if(t)this.skin=t;if(i)this.sheet=i}a(e,"laya.ui.FontClip",i);var t=e.prototype;t.createChildren=function(){this._bitmap=new W;this.on("loaded",this,this._onClipLoaded)};t._onClipLoaded=function(){this.callLater(this.changeValue)};t.changeValue=function(){if(!this._sources)return;if(!this._valueArr)return;this.graphics.clear(true);var t;t=this._sources[0];if(!t)return;var i=this._direction==="horizontal";if(i){this._wordsW=this._valueArr.length*(t.sourceWidth+this.spaceX);this._wordsH=t.sourceHeight}else{this._wordsW=t.sourceWidth;this._wordsH=(t.sourceHeight+this.spaceY)*this._valueArr.length}var e=0;if(this._width){switch(this._align){case"center":e=.5*(this._width-this._wordsW);break;case"right":e=this._width-this._wordsW;break;default:e=0}}for(var s=0,n=this._valueArr.length;s<n;s++){var h=this._indexMap[this._valueArr.charAt(s)];if(!this.sources[h])continue;t=this.sources[h];if(i)this.graphics.drawImage(t,e+s*(t.sourceWidth+this.spaceX),0,t.sourceWidth,t.sourceHeight);else this.graphics.drawImage(t,0+e,s*(t.sourceHeight+this.spaceY),t.sourceWidth,t.sourceHeight)}if(!this._width){this._widget.resetLayoutX();this.callLater(this._sizeChanged)}if(!this._height){this._widget.resetLayoutY();this.callLater(this._sizeChanged)}};t.measureWidth=function(){return this._wordsW};t.measureHeight=function(){return this._wordsH};t.destroy=function(t){t===void 0&&(t=true);this._valueArr=null;this._indexMap=null;this.graphics.clear(true);this.removeSelf();this.off("loaded",this,this._onClipLoaded);i.prototype.destroy.call(this,t)};n(0,t,"sheet",function(){return this._sheet},function(t){t+="";this._sheet=t;var i=t.split(" ");this._clipX=String(i[0]).length;this.clipY=i.length;this._indexMap={};for(var e=0;e<this._clipY;e++){var s=i[e].split("");for(var n=0,h=s.length;n<h;n++){this._indexMap[s[n]]=e*this._clipX+n}}});n(0,t,"height",i.prototype._$get_height,function(t){_.superSet(tt,this,"height",t);this.callLater(this.changeValue)});n(0,t,"direction",function(){return this._direction},function(t){this._direction=t;this.callLater(this.changeValue)});n(0,t,"value",function(){if(!this._valueArr)return"";return this._valueArr},function(t){t+="";this._valueArr=t;this.callLater(this.changeValue)});n(0,t,"width",i.prototype._$get_width,function(t){_.superSet(tt,this,"width",t);this.callLater(this.changeValue)});n(0,t,"spaceX",function(){return this._spaceX},function(t){this._spaceX=t;if(this._direction==="horizontal")this.callLater(this.changeValue)});n(0,t,"spaceY",function(){return this._spaceY},function(t){this._spaceY=t;if(!(this._direction==="horizontal"))this.callLater(this.changeValue)});n(0,t,"align",function(){return this._align},function(t){this._align=t;this.callLater(this.changeValue)});return e}(tt);var vt=function(i){function s(t){this.advsListArr=[];this.resUrl="https://unioncdn.layabox.com/config/iconlist.json";this._data=[];this._resquestTime=36e4;this._appid=null;this._playIndex=0;this._lunboTime=5e3;s.__super.call(this);this._http=new f.window.XMLHttpRequest;this.skin=t;this.setLoadUrl();this.init();this.size(120,120)}a(s,"laya.ui.AdvImage",i);var t=s.prototype;t.setLoadUrl=function(){if(f.onLimixiu){this.resUrl="https://abc.layabox.com/public/wyw/gconfig.json"}};t.init=function(){if(this.isSupportJump()){if(f.onMiniGame||f.onBDMiniGame){_.timer.loop(this._resquestTime,this,this.onGetAdvsListData)}this.onGetAdvsListData();this.initEvent()}else this.visible=false};t.initEvent=function(){this.on("click",this,this.onAdvsImgClick)};t.onAdvsImgClick=function(){var t=this.getCurrentAppidObj();if(t)this.jumptoGame()};t.revertAdvsData=function(){if(this.advsListArr[this._playIndex]){this.visible=true;if(f.onLimixiu){var t="https://abc.layabox.com/public/icon/";this.visible=true;var i=this.advsListArr[this._playIndex];if(i){if(f.onLimixiu&&GameStatusInfo.gameId==i.gameid){this.onLunbo()}else{this.skin=t+i.iconUrl;this.size(103,126)}}}else{this.skin=this.advsListArr[this._playIndex]}}};t.isSupportJump=function(){if(f.onMiniGame){var t=typeof wx.navigateToMiniProgram=="function";return t}else if(f.onLimixiu){if(BK.QQ.skipGame)return true}else if(f.onBDMiniGame)return true;return false};t.jumptoGame=function(){var i=this;var t=this.advsListArr[this._playIndex];var e=parseInt(t.gameid);var s=t.extendInfo;var n=t.path;if(f.onLimixiu){if(!t.isLunBo){if(!t.isLunBo){var h=S.getJSON("gameObj");if(!h){h={}}if(!h[t.gameid]){h[t.gameid]={}}h[t.gameid]={isclick:true};S.setJSON("gameObj",h);this.advsListArr.splice(this._playIndex,1)}}BK.QQ.skipGame(e,s);this.updateAdvsInfo()}else if(f.onMiniGame){if(this.isSupportJump()){wx.navigateToMiniProgram({appId:this._appid,path:"",extraData:"",envVersion:"release",success:function t(){console.log("-------------跳转成功--------------")},fail:function t(){console.log("-------------跳转失败--------------")},complete:function t(){console.log("-------------跳转接口调用成功--------------");i.updateAdvsInfo()}.bind(this)})}}else if(f.onBDMiniGame){}else{this.visible=false}};t.updateAdvsInfo=function(){this.visible=false;this.onLunbo();_.timer.loop(this._lunboTime,this,this.onLunbo)};t.onLunbo=function(){if(this._playIndex>=this.advsListArr.length-1)this._playIndex=0;else this._playIndex+=1;this.visible=true;this.revertAdvsData()};t.getCurrentAppidObj=function(){return this.advsListArr[this._playIndex]};t.onGetAdvsListData=function(){var i=this;var t=s.randRange(1e4,1e6);var e=this.resUrl+"?"+t;this._http.open("get",e,true);this._http.setRequestHeader("Content-Type","application/x-www-form-urlencoded");this._http.responseType="text";this._http.onerror=function(t){i._onError(t)};this._http.onload=function(t){i._onLoad(t)};this._http.send(null)};t._onError=function(t){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)};t._onLoad=function(t){var i=this._http;var e=i.status!==undefined?i.status:200;if(e===200||e===204||e===0){this.complete()}else{this.error("["+i.status+"]"+i.statusText+":"+i.responseURL)}};t.error=function(t){this.event("error",t)};t.complete=function(){var i=true;try{this._data=this._http.response||this._http.responseText;this._data=JSON.parse(this._data);if(f.onLimixiu){this.advsListArr=this.getAdvsQArr(this._data);if(this.advsListArr.length){this.updateAdvsInfo();this.revertAdvsData()}else{this.visible=false}}else{this.advsListArr=this._data.list;this._appid=this._data.appid;this.updateAdvsInfo();this.revertAdvsData()}}catch(t){i=false;this.error(t.message)}};t.getAdvsQArr=function(t){var i=[];var e=S.getJSON("gameObj");for(var s in t){var n=t[s];if(e&&e[n.gameid]&&!n.isQiangZhi)continue;i.push(n)}return i};t.clear=function(){var t=this._http;t.onerror=t.onabort=t.onprogress=t.onload=null};t.destroy=function(t){t===void 0&&(t=true);_.timer.clear(this,this.onLunbo);i.prototype.destroy.call(this,true);this.clear();_.timer.clear(this,this.onGetAdvsListData)};s.randRange=function(t,i){return Math.floor(Math.random()*(i-t+1))+t};return s}(q);var yt=function(t){function i(){i.__super.call(this)}a(i,"laya.ui.VScrollBar",t);return i}(st);var Ct=function(t){function i(){i.__super.call(this)}a(i,"laya.ui.VSlider",t);return i}(nt);var bt=function(t){function i(){i.__super.call(this)}a(i,"laya.ui.HScrollBar",t);var e=i.prototype;e.initialize=function(){t.prototype.initialize.call(this);this.slider.isVertical=false};return i}(st);var St=function(t){function i(t){i.__super.call(this,t);this.isVertical=false}a(i,"laya.ui.HSlider",t);return i}(nt);var wt=function(t){function i(){i.__super.call(this)}a(i,"laya.ui.HBox",t);var e=i.prototype;e.sortItem=function(t){if(t)t.sort(function(t,i){return t.x-i.x})};e.changeItems=function(){this._itemChanged=false;var t=[];var i=0;for(var e=0,s=this.numChildren;e<s;e++){var n=this.getChildAt(e);if(n){t.push(n);i=this._height?this._height:Math.max(i,n.height*n.scaleY)}}this.sortItem(t);var h=0;for(e=0,s=t.length;e<s;e++){n=t[e];n.x=h;h+=n.width*n.scaleX+this._space;if(this._align=="top"){n.y=0}else if(this._align=="middle"){n.y=(i-n.height*n.scaleY)*.5}else if(this._align=="bottom"){n.y=i-n.height*n.scaleY}}this._sizeChanged()};n(0,e,"height",t.prototype._$get_height,function(t){if(this._height!=t){_.superSet(ot,this,"height",t);this.callLater(this.changeItems)}});i.NONE="none";i.TOP="top";i.MIDDLE="middle";i.BOTTOM="bottom";return i}(ot);var xt=function(t){function i(){i.__super.call(this)}a(i,"laya.ui.RadioGroup",t);var e=i.prototype;e.createItem=function(t,i){return new pt(t,i)};return i}(lt);var Bt=function(t){function i(){i.__super.call(this)}a(i,"laya.ui.VBox",t);var e=i.prototype;e.changeItems=function(){this._itemChanged=false;var t=[];var i=0;for(var e=0,s=this.numChildren;e<s;e++){var n=this.getChildAt(e);if(n){t.push(n);i=this._width?this._width:Math.max(i,n.width*n.scaleX)}}this.sortItem(t);var h=0;for(e=0,s=t.length;e<s;e++){n=t[e];n.y=h;h+=n.height*n.scaleY+this._space;if(this._align=="left"){n.x=0}else if(this._align=="center"){n.x=(i-n.width*n.scaleX)*.5}else if(this._align=="right"){n.x=i-n.width*n.scaleX}}this._sizeChanged()};n(0,e,"width",t.prototype._$get_width,function(t){if(this._width!=t){_.superSet(ot,this,"width",t);this.callLater(this.changeItems)}});i.NONE="none";i.LEFT="left";i.CENTER="center";i.RIGHT="right";return i}(ot);var kt=function(i){function e(t){this._vScrollBar=null;this._hScrollBar=null;t===void 0&&(t="");e.__super.call(this,t);this.on("change",this,this._onTextChange)}a(e,"laya.ui.TextArea",i);var t=e.prototype;t._onTextChange=function(){this.callLater(this.changeScroll)};t.destroy=function(t){t===void 0&&(t=true);i.prototype.destroy.call(this,t);this._vScrollBar&&this._vScrollBar.destroy();this._hScrollBar&&this._hScrollBar.destroy();this._vScrollBar=null;this._hScrollBar=null};t.initialize=function(){this.width=180;this.height=150;this._tf.wordWrap=true;this.multiline=true};t.onVBarChanged=function(t){if(this._tf.scrollY!=this._vScrollBar.value){this._tf.scrollY=this._vScrollBar.value}};t.onHBarChanged=function(t){if(this._tf.scrollX!=this._hScrollBar.value){this._tf.scrollX=this._hScrollBar.value}};t.changeScroll=function(){var t=this._vScrollBar&&this._tf.maxScrollY>0;var i=this._hScrollBar&&this._tf.maxScrollX>0;var e=t?this._width-this._vScrollBar.width:this._width;var s=i?this._height-this._hScrollBar.height:this._height;var n=this._tf.padding||X.labelPadding;this._tf.width=e;this._tf.height=s;if(this._vScrollBar){this._vScrollBar.x=this._width-this._vScrollBar.width-n[2];this._vScrollBar.y=n[1];this._vScrollBar.height=this._height-(i?this._hScrollBar.height:0)-n[1]-n[3];this._vScrollBar.scrollSize=1;this._vScrollBar.thumbPercent=s/Math.max(this._tf.textHeight,s);this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY);this._vScrollBar.visible=t}if(this._hScrollBar){this._hScrollBar.x=n[0];this._hScrollBar.y=this._height-this._hScrollBar.height-n[3];this._hScrollBar.width=this._width-(t?this._vScrollBar.width:0)-n[0]-n[2];this._hScrollBar.scrollSize=Math.max(e*.033,1);this._hScrollBar.thumbPercent=e/Math.max(this._tf.textWidth,e);this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX);this._hScrollBar.visible=i}};t.scrollTo=function(t){this.commitMeasure();this._tf.scrollY=t};n(0,t,"scrollY",function(){return this._tf.scrollY});n(0,t,"width",i.prototype._$get_width,function(t){_.superSet(dt,this,"width",t);this.callLater(this.changeScroll)});n(0,t,"hScrollBar",function(){return this._hScrollBar});n(0,t,"height",i.prototype._$get_height,function(t){_.superSet(dt,this,"height",t);this.callLater(this.changeScroll)});n(0,t,"maxScrollX",function(){return this._tf.maxScrollX});n(0,t,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(t){if(this._vScrollBar==null){this.addChild(this._vScrollBar=new yt);this._vScrollBar.on("change",this,this.onVBarChanged);this._vScrollBar.target=this._tf;this.callLater(this.changeScroll)}this._vScrollBar.skin=t});n(0,t,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(t){if(this._hScrollBar==null){this.addChild(this._hScrollBar=new bt);this._hScrollBar.on("change",this,this.onHBarChanged);this._hScrollBar.mouseWheelEnable=false;this._hScrollBar.target=this._tf;this.callLater(this.changeScroll)}this._hScrollBar.skin=t});n(0,t,"vScrollBar",function(){return this._vScrollBar});n(0,t,"maxScrollY",function(){return this._tf.maxScrollY});n(0,t,"scrollX",function(){return this._tf.scrollX});return e}(dt);var It=function(t){function i(){i.__super.call(this)}a(i,"laya.ui.Tab",t);var e=i.prototype;e.createItem=function(t,i){return new J(t,i)};return i}(lt);_.__init([ht,$])})(window,document,Laya);