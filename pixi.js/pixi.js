(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.PIXI=e()}})(function(){var k,e,t;return function a(o,s,u){function l(r,e){if(!s[r]){if(!o[r]){var t=typeof require=="function"&&require;if(!e&&t)return t(r,!0);if(h)return h(r,!0);var i=new Error("Cannot find module '"+r+"'");throw i.code="MODULE_NOT_FOUND",i}var n=s[r]={exports:{}};o[r][0].call(n.exports,function(e){var t=o[r][1][e];return l(t?t:e)},n,n.exports,a,o,s,u)}return s[r].exports}var h=typeof require=="function"&&require;for(var e=0;e<u.length;e++)l(u[e]);return l}({1:[function(e,t,r){"use strict";"use restrict";var i=32;r.INT_BITS=i;r.INT_MAX=2147483647;r.INT_MIN=-1<<i-1;r.sign=function(e){return(e>0)-(e<0)};r.abs=function(e){var t=e>>i-1;return(e^t)-t};r.min=function(e,t){return t^(e^t)&-(e<t)};r.max=function(e,t){return e^(e^t)&-(e<t)};r.isPow2=function(e){return!(e&e-1)&&!!e};r.log2=function(e){var t,r;t=(e>65535)<<4;e>>>=t;r=(e>255)<<3;e>>>=r;t|=r;r=(e>15)<<2;e>>>=r;t|=r;r=(e>3)<<1;e>>>=r;t|=r;return t|e>>1};r.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0};r.popCount=function(e){e=e-(e>>>1&1431655765);e=(e&858993459)+(e>>>2&858993459);return(e+(e>>>4)&252645135)*16843009>>>24};function n(e){var t=32;e&=-e;if(e)t--;if(e&65535)t-=16;if(e&16711935)t-=8;if(e&252645135)t-=4;if(e&858993459)t-=2;if(e&1431655765)t-=1;return t}r.countTrailingZeros=n;r.nextPow2=function(e){e+=e===0;--e;e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;return e+1};r.prevPow2=function(e){e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;return e-(e>>>1)};r.parity=function(e){e^=e>>>16;e^=e>>>8;e^=e>>>4;e&=15;return 27030>>>e&1};var a=new Array(256);(function(e){for(var t=0;t<256;++t){var r=t,i=t,n=7;for(r>>>=1;r;r>>>=1){i<<=1;i|=r&1;--n}e[t]=i<<n&255}})(a);r.reverse=function(e){return a[e&255]<<24|a[e>>>8&255]<<16|a[e>>>16&255]<<8|a[e>>>24&255]};r.interleave2=function(e,t){e&=65535;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;e=(e|e<<1)&1431655765;t&=65535;t=(t|t<<8)&16711935;t=(t|t<<4)&252645135;t=(t|t<<2)&858993459;t=(t|t<<1)&1431655765;return e|t<<1};r.deinterleave2=function(e,t){e=e>>>t&1431655765;e=(e|e>>>1)&858993459;e=(e|e>>>2)&252645135;e=(e|e>>>4)&16711935;e=(e|e>>>16)&65535;return e<<16>>16};r.interleave3=function(e,t,r){e&=1023;e=(e|e<<16)&4278190335;e=(e|e<<8)&251719695;e=(e|e<<4)&3272356035;e=(e|e<<2)&1227133513;t&=1023;t=(t|t<<16)&4278190335;t=(t|t<<8)&251719695;t=(t|t<<4)&3272356035;t=(t|t<<2)&1227133513;e|=t<<1;r&=1023;r=(r|r<<16)&4278190335;r=(r|r<<8)&251719695;r=(r|r<<4)&3272356035;r=(r|r<<2)&1227133513;return e|r<<2};r.deinterleave3=function(e,t){e=e>>>t&1227133513;e=(e|e>>>2)&3272356035;e=(e|e>>>4)&251719695;e=(e|e>>>8)&4278190335;e=(e|e>>>16)&1023;return e<<22>>22};r.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>n(e)+1}},{}],2:[function(e,t,r){"use strict";t.exports=i;t.exports.default=i;function i(e,t,r){r=r||2;var i=t&&t.length,n=i?t[0]*r:e.length,a=v(e,0,n,r,true),o=[];if(!a)return o;var s,u,l,h,f,c,d;if(i)a=g(e,t,a,r);if(e.length>80*r){s=l=e[0];u=h=e[1];for(var p=r;p<n;p+=r){f=e[p];c=e[p+1];if(f<s)s=f;if(c<u)u=c;if(f>l)l=f;if(c>h)h=c}d=Math.max(l-s,h-u);d=d!==0?1/d:0}y(a,o,r,s,u,d);return o}function v(e,t,r,i,n){var a,o;if(n===A(e,t,r,i)>0){for(a=t;a<r;a+=i)o=P(a,e[a],e[a+1],o)}else{for(a=r-i;a>=t;a-=i)o=P(a,e[a],e[a+1],o)}if(o&&s(o,o.next)){C(o);o=o.next}return o}function h(e,t){if(!e)return e;if(!t)t=e;var r=e,i;do{i=false;if(!r.steiner&&(s(r,r.next)||E(r.prev,r,r.next)===0)){C(r);r=t=r.prev;if(r===r.next)break;i=true}else{r=r.next}}while(i||r!==t);return t}function y(e,t,r,i,n,a,o){if(!e)return;if(!o&&a)b(e,i,n,a);var s=e,u,l;while(e.prev!==e.next){u=e.prev;l=e.next;if(a?c(e,i,n,a):f(e)){t.push(u.i/r);t.push(e.i/r);t.push(l.i/r);C(e);e=l.next;s=l.next;continue}e=l;if(e===s){if(!o){y(h(e),t,r,i,n,a,1)}else if(o===1){e=d(e,t,r);y(e,t,r,i,n,a,2)}else if(o===2){p(e,t,r,i,n,a)}break}}}function f(e){var t=e.prev,r=e,i=e.next;if(E(t,r,i)>=0)return false;var n=e.next.next;while(n!==e.prev){if(w(t.x,t.y,r.x,r.y,i.x,i.y,n.x,n.y)&&E(n.prev,n,n.next)>=0)return false;n=n.next}return true}function c(e,t,r,i){var n=e.prev,a=e,o=e.next;if(E(n,a,o)>=0)return false;var s=n.x<a.x?n.x<o.x?n.x:o.x:a.x<o.x?a.x:o.x,u=n.y<a.y?n.y<o.y?n.y:o.y:a.y<o.y?a.y:o.y,l=n.x>a.x?n.x>o.x?n.x:o.x:a.x>o.x?a.x:o.x,h=n.y>a.y?n.y>o.y?n.y:o.y:a.y>o.y?a.y:o.y;var f=x(s,u,t,r,i),c=x(l,h,t,r,i);var d=e.nextZ;while(d&&d.z<=c){if(d!==e.prev&&d!==e.next&&w(n.x,n.y,a.x,a.y,o.x,o.y,d.x,d.y)&&E(d.prev,d,d.next)>=0)return false;d=d.nextZ}d=e.prevZ;while(d&&d.z>=f){if(d!==e.prev&&d!==e.next&&w(n.x,n.y,a.x,a.y,o.x,o.y,d.x,d.y)&&E(d.prev,d,d.next)>=0)return false;d=d.prevZ}return true}function d(e,t,r){var i=e;do{var n=i.prev,a=i.next.next;if(!s(n,a)&&o(n,i,i.next,a)&&S(n,a)&&S(a,n)){t.push(n.i/r);t.push(i.i/r);t.push(a.i/r);C(i);C(i.next);i=e=a}i=i.next}while(i!==e);return i}function p(e,t,r,i,n,a){var o=e;do{var s=o.next.next;while(s!==o.prev){if(o.i!==s.i&&l(o,s)){var u=M(o,s);o=h(o,o.next);u=h(u,u.next);y(o,t,r,i,n,a);y(u,t,r,i,n,a);return}s=s.next}o=o.next}while(o!==e)}function g(e,t,r,i){var n=[],a,o,s,u,l;for(a=0,o=t.length;a<o;a++){s=t[a]*i;u=a<o-1?t[a+1]*i:e.length;l=v(e,s,u,i,false);if(l===l.next)l.steiner=true;n.push(T(l))}n.sort(m);for(a=0;a<n.length;a++){_(n[a],r);r=h(r,r.next)}return r}function m(e,t){return e.x-t.x}function _(e,t){t=n(e,t);if(t){var r=M(t,e);h(r,r.next)}}function n(e,t){var r=t,i=e.x,n=e.y,a=-Infinity,o;do{if(n<=r.y&&n>=r.next.y&&r.next.y!==r.y){var s=r.x+(n-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){a=s;if(s===i){if(n===r.y)return r;if(n===r.next.y)return r.next}o=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!o)return null;if(i===a)return o.prev;var u=o,l=o.x,h=o.y,f=Infinity,c;r=o.next;while(r!==u){if(i>=r.x&&r.x>=l&&i!==r.x&&w(n<h?i:a,n,l,h,n<h?a:i,n,r.x,r.y)){c=Math.abs(n-r.y)/(i-r.x);if((c<f||c===f&&r.x>o.x)&&S(r,e)){o=r;f=c}}r=r.next}return o}function b(e,t,r,i){var n=e;do{if(n.z===null)n.z=x(n.x,n.y,t,r,i);n.prevZ=n.prev;n.nextZ=n.next;n=n.next}while(n!==e);n.prevZ.nextZ=null;n.prevZ=null;a(n)}function a(e){var t,r,i,n,a,o,s,u,l=1;do{r=e;e=null;a=null;o=0;while(r){o++;i=r;s=0;for(t=0;t<l;t++){s++;i=i.nextZ;if(!i)break}u=l;while(s>0||u>0&&i){if(s!==0&&(u===0||!i||r.z<=i.z)){n=r;r=r.nextZ;s--}else{n=i;i=i.nextZ;u--}if(a)a.nextZ=n;else e=n;n.prevZ=a;a=n}r=i}a.nextZ=null;l*=2}while(o>1);return e}function x(e,t,r,i,n){e=32767*(e-r)*n;t=32767*(t-i)*n;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;e=(e|e<<1)&1431655765;t=(t|t<<8)&16711935;t=(t|t<<4)&252645135;t=(t|t<<2)&858993459;t=(t|t<<1)&1431655765;return e|t<<1}function T(e){var t=e,r=e;do{if(t.x<r.x)r=t;t=t.next}while(t!==e);return r}function w(e,t,r,i,n,a,o,s){return(n-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(i-s)-(r-o)*(t-s)>=0&&(r-o)*(a-s)-(n-o)*(i-s)>=0}function l(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!u(e,t)&&S(e,t)&&S(t,e)&&O(e,t)}function E(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function s(e,t){return e.x===t.x&&e.y===t.y}function o(e,t,r,i){if(s(e,t)&&s(r,i)||s(e,i)&&s(r,t))return true;return E(e,t,r)>0!==E(e,t,i)>0&&E(r,i,e)>0!==E(r,i,t)>0}function u(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&o(r,r.next,e,t))return true;r=r.next}while(r!==e);return false}function S(e,t){return E(e.prev,e,e.next)<0?E(e,t,e.next)>=0&&E(e,e.prev,t)>=0:E(e,t,e.prev)<0||E(e,e.next,t)<0}function O(e,t){var r=e,i=false,n=(e.x+t.x)/2,a=(e.y+t.y)/2;do{if(r.y>a!==r.next.y>a&&r.next.y!==r.y&&n<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x)i=!i;r=r.next}while(r!==e);return i}function M(e,t){var r=new R(e.i,e.x,e.y),i=new R(t.i,t.x,t.y),n=e.next,a=t.prev;e.next=t;t.prev=e;r.next=n;n.prev=r;i.next=r;r.prev=i;a.next=i;i.prev=a;return i}function P(e,t,r,i){var n=new R(e,t,r);if(!i){n.prev=n;n.next=n}else{n.next=i.next;n.prev=i;i.next.prev=n;i.next=n}return n}function C(e){e.next.prev=e.prev;e.prev.next=e.next;if(e.prevZ)e.prevZ.nextZ=e.nextZ;if(e.nextZ)e.nextZ.prevZ=e.prevZ}function R(e,t,r){this.i=e;this.x=t;this.y=r;this.prev=null;this.next=null;this.z=null;this.prevZ=null;this.nextZ=null;this.steiner=false}i.deviation=function(e,t,r,i){var n=t&&t.length;var a=n?t[0]*r:e.length;var o=Math.abs(A(e,0,a,r));if(n){for(var s=0,u=t.length;s<u;s++){var l=t[s]*r;var h=s<u-1?t[s+1]*r:e.length;o-=Math.abs(A(e,l,h,r))}}var f=0;for(s=0;s<i.length;s+=3){var c=i[s]*r;var d=i[s+1]*r;var p=i[s+2]*r;f+=Math.abs((e[c]-e[p])*(e[d+1]-e[c+1])-(e[c]-e[d])*(e[p+1]-e[c+1]))}return o===0&&f===0?0:Math.abs((f-o)/o)};function A(e,t,r,i){var n=0;for(var a=t,o=r-i;a<r;a+=i){n+=(e[o]-e[a])*(e[a+1]+e[o+1]);o=a}return n}i.flatten=function(e){var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},i=0;for(var n=0;n<e.length;n++){for(var a=0;a<e[n].length;a++){for(var o=0;o<t;o++)r.vertices.push(e[n][a][o])}if(n>0){i+=e[n-1].length;r.holes.push(i)}}return r}},{}],3:[function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,p="~";function h(){}if(Object.create){h.prototype=Object.create(null);if(!(new h).__proto__)p=false}function o(e,t,r){this.fn=e;this.context=t;this.once=r||false}function i(){this._events=new h;this._eventsCount=0}i.prototype.eventNames=function e(){var t=[],r,i;if(this._eventsCount===0)return t;for(i in r=this._events){if(n.call(r,i))t.push(p?i.slice(1):i)}if(Object.getOwnPropertySymbols){return t.concat(Object.getOwnPropertySymbols(r))}return t};i.prototype.listeners=function e(t,r){var i=p?p+t:t,n=this._events[i];if(r)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var a=0,o=n.length,s=new Array(o);a<o;a++){s[a]=n[a].fn}return s};i.prototype.emit=function e(t,r,i,n,a,o){var s=p?p+t:t;if(!this._events[s])return false;var u=this._events[s],l=arguments.length,h,f;if(u.fn){if(u.once)this.removeListener(t,u.fn,undefined,true);switch(l){case 1:return u.fn.call(u.context),true;case 2:return u.fn.call(u.context,r),true;case 3:return u.fn.call(u.context,r,i),true;case 4:return u.fn.call(u.context,r,i,n),true;case 5:return u.fn.call(u.context,r,i,n,a),true;case 6:return u.fn.call(u.context,r,i,n,a,o),true}for(f=1,h=new Array(l-1);f<l;f++){h[f-1]=arguments[f]}u.fn.apply(u.context,h)}else{var c=u.length,d;for(f=0;f<c;f++){if(u[f].once)this.removeListener(t,u[f].fn,undefined,true);switch(l){case 1:u[f].fn.call(u[f].context);break;case 2:u[f].fn.call(u[f].context,r);break;case 3:u[f].fn.call(u[f].context,r,i);break;case 4:u[f].fn.call(u[f].context,r,i,n);break;default:if(!h)for(d=1,h=new Array(l-1);d<l;d++){h[d-1]=arguments[d]}u[f].fn.apply(u[f].context,h)}}}return true};i.prototype.on=function e(t,r,i){var n=new o(r,i||this),a=p?p+t:t;if(!this._events[a])this._events[a]=n,this._eventsCount++;else if(!this._events[a].fn)this._events[a].push(n);else this._events[a]=[this._events[a],n];return this};i.prototype.once=function e(t,r,i){var n=new o(r,i||this,true),a=p?p+t:t;if(!this._events[a])this._events[a]=n,this._eventsCount++;else if(!this._events[a].fn)this._events[a].push(n);else this._events[a]=[this._events[a],n];return this};i.prototype.removeListener=function e(t,r,i,n){var a=p?p+t:t;if(!this._events[a])return this;if(!r){if(--this._eventsCount===0)this._events=new h;else delete this._events[a];return this}var o=this._events[a];if(o.fn){if(o.fn===r&&(!n||o.once)&&(!i||o.context===i)){if(--this._eventsCount===0)this._events=new h;else delete this._events[a]}}else{for(var s=0,u=[],l=o.length;s<l;s++){if(o[s].fn!==r||n&&!o[s].once||i&&o[s].context!==i){u.push(o[s])}}if(u.length)this._events[a]=u.length===1?u[0]:u;else if(--this._eventsCount===0)this._events=new h;else delete this._events[a]}return this};i.prototype.removeAllListeners=function e(t){var r;if(t){r=p?p+t:t;if(this._events[r]){if(--this._eventsCount===0)this._events=new h;else delete this._events[r]}}else{this._events=new h;this._eventsCount=0}return this};i.prototype.off=i.prototype.removeListener;i.prototype.addListener=i.prototype.on;i.prototype.setMaxListeners=function e(){return this};i.prefixed=p;i.EventEmitter=i;if("undefined"!==typeof t){t.exports=i}},{}],4:[function(e,_,t){(function(e){var i=/iPhone/i,n=/iPod/i,a=/iPad/i,o=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,s=/Android/i,u=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,l=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,h=/Windows Phone/i,f=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,c=/BlackBerry/i,d=/BB10/i,p=/Opera Mini/i,v=/(CriOS|Chrome)(?=.*\bMobile\b)/i,y=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,g=new RegExp("(?:"+"Nexus 7"+"|"+"BNTV250"+"|"+"Kindle Fire"+"|"+"Silk"+"|"+"GT-P1000"+")","i");var m=function(e,t){return e.test(t)};var t=function(e){var t=e||navigator.userAgent;var r=t.split("[FBAN");if(typeof r[1]!=="undefined"){t=r[0]}r=t.split("Twitter");if(typeof r[1]!=="undefined"){t=r[0]}this.apple={phone:m(i,t),ipod:m(n,t),tablet:!m(i,t)&&m(a,t),device:m(i,t)||m(n,t)||m(a,t)};this.amazon={phone:m(u,t),tablet:!m(u,t)&&m(l,t),device:m(u,t)||m(l,t)};this.android={phone:m(u,t)||m(o,t),tablet:!m(u,t)&&!m(o,t)&&(m(l,t)||m(s,t)),device:m(u,t)||m(l,t)||m(o,t)||m(s,t)};this.windows={phone:m(h,t),tablet:m(f,t),device:m(h,t)||m(f,t)};this.other={blackberry:m(c,t),blackberry10:m(d,t),opera:m(p,t),firefox:m(y,t),chrome:m(v,t),device:m(c,t)||m(d,t)||m(p,t)||m(y,t)||m(v,t)};this.seven_inch=m(g,t);this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch;this.phone=this.apple.phone||this.android.phone||this.windows.phone;this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet;if(typeof window==="undefined"){return this}};var r=function(){var e=new t;e.Class=t;return e};if(typeof _!=="undefined"&&_.exports&&typeof window==="undefined"){_.exports=t}else if(typeof _!=="undefined"&&_.exports&&typeof window!=="undefined"){_.exports=r()}else if(typeof k==="function"&&k.amd){k("isMobile",[],e.isMobile=r())}else{e.isMobile=r()}})(this)},{}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function(){function i(e,t,r){if(t===undefined)t=false;a(this,i);this._fn=e;this._once=t;this._thisArg=r;this._next=this._prev=this._owner=null}n(i,[{key:"detach",value:function e(){if(this._owner===null)return false;this._owner.detach(this);return true}}]);return i}();function o(e,t){if(!e._head){e._head=t;e._tail=t}else{e._tail._next=t;t._prev=e._tail;e._tail=t}t._owner=e;return t}var s=function(){function e(){a(this,e);this._head=this._tail=undefined}n(e,[{key:"handlers",value:function e(){var t=arguments.length<=0||arguments[0]===undefined?false:arguments[0];var r=this._head;if(t)return!!r;var i=[];while(r){i.push(r);r=r._next}return i}},{key:"has",value:function e(t){if(!(t instanceof i)){throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.")}return t._owner===this}},{key:"dispatch",value:function e(){var t=this._head;if(!t)return false;while(t){if(t._once)this.detach(t);t._fn.apply(t._thisArg,arguments);t=t._next}return true}},{key:"add",value:function e(t){var r=arguments.length<=1||arguments[1]===undefined?null:arguments[1];if(typeof t!=="function"){throw new Error("MiniSignal#add(): First arg must be a Function.")}return o(this,new i(t,false,r))}},{key:"once",value:function e(t){var r=arguments.length<=1||arguments[1]===undefined?null:arguments[1];if(typeof t!=="function"){throw new Error("MiniSignal#once(): First arg must be a Function.")}return o(this,new i(t,true,r))}},{key:"detach",value:function e(t){if(!(t instanceof i)){throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.")}if(t._owner!==this)return this;if(t._prev)t._prev._next=t._next;if(t._next)t._next._prev=t._prev;if(t===this._head){this._head=t._next;if(t._next===null){this._tail=null}}else if(t===this._tail){this._tail=t._prev;this._tail._next=null}t._owner=null;return this}},{key:"detachAll",value:function e(){var t=this._head;if(!t)return this;this._head=this._tail=null;while(t){t._owner=null;t=t._next}return this}}]);return e}();s.MiniSignalBinding=i;r["default"]=s;t.exports=r["default"]},{}],6:[function(e,t,r){"use strict";var u=Object.getOwnPropertySymbols;var l=Object.prototype.hasOwnProperty;var h=Object.prototype.propertyIsEnumerable;function f(e){if(e===null||e===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(e)}function i(){try{if(!Object.assign){return false}var e=new String("abc");e[5]="de";if(Object.getOwnPropertyNames(e)[0]==="5"){return false}var t={};for(var r=0;r<10;r++){t["_"+String.fromCharCode(r)]=r}var i=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if(i.join("")!=="0123456789"){return false}var n={};"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e});if(Object.keys(Object.assign({},n)).join("")!=="abcdefghijklmnopqrst"){return false}return true}catch(e){return false}}t.exports=i()?Object.assign:function(e,t){var r;var i=f(e);var n;for(var a=1;a<arguments.length;a++){r=Object(arguments[a]);for(var o in r){if(l.call(r,o)){i[o]=r[o]}}if(u){n=u(r);for(var s=0;s<n.length;s++){if(h.call(r,n[s])){i[n[s]]=r[n[s]]}}}}return i}},{}],7:[function(e,t,r){"use strict";t.exports=function e(t,r){r=r||{};var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};var n=i.parser[r.strictMode?"strict":"loose"].exec(t);var a={};var o=14;while(o--)a[i.key[o]]=n[o]||"";a[i.q.name]={};a[i.key[12]].replace(i.q.parser,function(e,t,r){if(t)a[i.q.name][t]=r});return a}},{}],8:[function(e,t,l){(function(n){function a(e,t){var r=0;for(var i=e.length-1;i>=0;i--){var n=e[i];if(n==="."){e.splice(i,1)}else if(n===".."){e.splice(i,1);r++}else if(r){e.splice(i,1);r--}}if(t){for(;r--;r){e.unshift("..")}}return e}var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var o=function(e){return t.exec(e).slice(1)};l.resolve=function(){var e="",t=false;for(var r=arguments.length-1;r>=-1&&!t;r--){var i=r>=0?arguments[r]:n.cwd();if(typeof i!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!i){continue}e=i+"/"+e;t=i.charAt(0)==="/"}e=a(s(e.split("/"),function(e){return!!e}),!t).join("/");return(t?"/":"")+e||"."};l.normalize=function(e){var t=l.isAbsolute(e),r=i(e,-1)==="/";e=a(s(e.split("/"),function(e){return!!e}),!t).join("/");if(!e&&!t){e="."}if(e&&r){e+="/"}return(t?"/":"")+e};l.isAbsolute=function(e){return e.charAt(0)==="/"};l.join=function(){var e=Array.prototype.slice.call(arguments,0);return l.normalize(s(e,function(e,t){if(typeof e!=="string"){throw new TypeError("Arguments to path.join must be strings")}return e}).join("/"))};l.relative=function(e,t){e=l.resolve(e).substr(1);t=l.resolve(t).substr(1);function r(e){var t=0;for(;t<e.length;t++){if(e[t]!=="")break}var r=e.length-1;for(;r>=0;r--){if(e[r]!=="")break}if(t>r)return[];return e.slice(t,r-t+1)}var i=r(e.split("/"));var n=r(t.split("/"));var a=Math.min(i.length,n.length);var o=a;for(var s=0;s<a;s++){if(i[s]!==n[s]){o=s;break}}var u=[];for(var s=o;s<i.length;s++){u.push("..")}u=u.concat(n.slice(o));return u.join("/")};l.sep="/";l.delimiter=":";l.dirname=function(e){var t=o(e),r=t[0],i=t[1];if(!r&&!i){return"."}if(i){i=i.substr(0,i.length-1)}return r+i};l.basename=function(e,t){var r=o(e)[2];if(t&&r.substr(-1*t.length)===t){r=r.substr(0,r.length-t.length)}return r};l.extname=function(e){return o(e)[3]};function s(e,t){if(e.filter)return e.filter(t);var r=[];for(var i=0;i<e.length;i++){if(t(e[i],i,e))r.push(e[i])}return r}var i="ab".substr(-1)==="b"?function(e,t,r){return e.substr(t,r)}:function(e,t,r){if(t<0)t=e.length+t;return e.substr(t,r)}}).call(this,e("_process"))},{_process:26}],9:[function(e,t,r){var n=new ArrayBuffer(0);var a=function(e,t,r,i){this.gl=e;this.buffer=e.createBuffer();this.type=t||e.ARRAY_BUFFER;this.drawType=i||e.STATIC_DRAW;this.data=n;if(r){this.upload(r)}this._updateID=0};a.prototype.upload=function(e,t,r){if(!r)this.bind();var i=this.gl;e=e||this.data;t=t||0;if(this.data.byteLength>=e.byteLength){i.bufferSubData(this.type,t,e)}else{i.bufferData(this.type,e,this.drawType)}this.data=e};a.prototype.bind=function(){var e=this.gl;e.bindBuffer(this.type,this.buffer)};a.createVertexBuffer=function(e,t,r){return new a(e,e.ARRAY_BUFFER,t,r)};a.createIndexBuffer=function(e,t,r){return new a(e,e.ELEMENT_ARRAY_BUFFER,t,r)};a.create=function(e,t,r,i){return new a(e,t,r,i)};a.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)};t.exports=a},{}],10:[function(e,t,r){var o=e("./GLTexture");var s=function(e,t,r){this.gl=e;this.framebuffer=e.createFramebuffer();this.stencil=null;this.texture=null;this.width=t||100;this.height=r||100};s.prototype.enableTexture=function(e){var t=this.gl;this.texture=e||new o(t);this.texture.bind();this.bind();t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture.texture,0)};s.prototype.enableStencil=function(){if(this.stencil)return;var e=this.gl;this.stencil=e.createRenderbuffer();e.bindRenderbuffer(e.RENDERBUFFER,this.stencil);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.stencil);e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,this.width,this.height)};s.prototype.clear=function(e,t,r,i){this.bind();var n=this.gl;n.clearColor(e,t,r,i);n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)};s.prototype.bind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer)};s.prototype.unbind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)};s.prototype.resize=function(e,t){var r=this.gl;this.width=e;this.height=t;if(this.texture){this.texture.uploadData(null,e,t)}if(this.stencil){r.bindRenderbuffer(r.RENDERBUFFER,this.stencil);r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e,t)}};s.prototype.destroy=function(){var e=this.gl;if(this.texture){this.texture.destroy()}e.deleteFramebuffer(this.framebuffer);this.gl=null;this.stencil=null;this.texture=null};s.createRGBA=function(e,t,r,i){var n=o.fromData(e,null,t,r);n.enableNearestScaling();n.enableWrapClamp();var a=new s(e,t,r);a.enableTexture(n);a.unbind();return a};s.createFloat32=function(e,t,r,i){var n=new o.fromData(e,i,t,r);n.enableNearestScaling();n.enableWrapClamp();var a=new s(e,t,r);a.enableTexture(n);a.unbind();return a};t.exports=s},{"./GLTexture":12}],11:[function(e,t,r){var a=e("./shader/compileProgram"),o=e("./shader/extractAttributes"),s=e("./shader/extractUniforms"),u=e("./shader/setPrecision"),l=e("./shader/generateUniformAccessObject");var i=function(e,t,r,i,n){this.gl=e;if(i){t=u(t,i);r=u(r,i)}this.program=a(e,t,r,n);this.attributes=o(e,this.program);this.uniformData=s(e,this.program);this.uniforms=l(e,this.uniformData)};i.prototype.bind=function(){this.gl.useProgram(this.program);return this};i.prototype.destroy=function(){this.attributes=null;this.uniformData=null;this.uniforms=null;var e=this.gl;e.deleteProgram(this.program)};t.exports=i},{"./shader/compileProgram":17,"./shader/extractAttributes":19,"./shader/extractUniforms":20,"./shader/generateUniformAccessObject":21,"./shader/setPrecision":25}],12:[function(e,t,r){var a=function(e,t,r,i,n){this.gl=e;this.texture=e.createTexture();this.mipmap=false;this.premultiplyAlpha=false;this.width=t||-1;this.height=r||-1;this.format=i||e.RGBA;this.type=n||e.UNSIGNED_BYTE};a.prototype.upload=function(e){this.bind();var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var r=e.videoWidth||e.width;var i=e.videoHeight||e.height;if(i!==this.height||r!==this.width){t.texImage2D(t.TEXTURE_2D,0,this.format,this.format,this.type,e)}else{t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.format,this.type,e)}this.width=r;this.height=i};var o=false;a.prototype.uploadData=function(e,t,r){this.bind();var i=this.gl;if(e instanceof Float32Array){if(!o){var n=i.getExtension("OES_texture_float");if(n){o=true}else{throw new Error("floating point textures not available")}}this.type=i.FLOAT}else{this.type=this.type||i.UNSIGNED_BYTE}i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);if(t!==this.width||r!==this.height){i.texImage2D(i.TEXTURE_2D,0,this.format,t,r,0,this.format,this.type,e||null)}else{i.texSubImage2D(i.TEXTURE_2D,0,0,0,t,r,this.format,this.type,e||null)}this.width=t;this.height=r};a.prototype.bind=function(e){var t=this.gl;if(e!==undefined){t.activeTexture(t.TEXTURE0+e)}t.bindTexture(t.TEXTURE_2D,this.texture)};a.prototype.unbind=function(){var e=this.gl;e.bindTexture(e.TEXTURE_2D,null)};a.prototype.minFilter=function(e){var t=this.gl;this.bind();if(this.mipmap){t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.NEAREST_MIPMAP_NEAREST)}else{t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR:t.NEAREST)}};a.prototype.magFilter=function(e){var t=this.gl;this.bind();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e?t.LINEAR:t.NEAREST)};a.prototype.enableMipmap=function(){var e=this.gl;this.bind();this.mipmap=true;e.generateMipmap(e.TEXTURE_2D)};a.prototype.enableLinearScaling=function(){this.minFilter(true);this.magFilter(true)};a.prototype.enableNearestScaling=function(){this.minFilter(false);this.magFilter(false)};a.prototype.enableWrapClamp=function(){var e=this.gl;this.bind();e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)};a.prototype.enableWrapRepeat=function(){var e=this.gl;this.bind();e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)};a.prototype.enableWrapMirrorRepeat=function(){var e=this.gl;this.bind();e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.MIRRORED_REPEAT);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.MIRRORED_REPEAT)};a.prototype.destroy=function(){var e=this.gl;e.deleteTexture(this.texture)};a.fromSource=function(e,t,r){var i=new a(e);i.premultiplyAlpha=r||false;i.upload(t);return i};a.fromData=function(e,t,r,i){var n=new a(e);n.uploadData(t,r,i);return n};t.exports=a},{}],13:[function(e,t,r){var n=e("./setVertexAttribArrays");function i(e,t){this.nativeVaoExtension=null;if(!i.FORCE_NATIVE){this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")}this.nativeState=t;if(this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var r=e.getParameter(e.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(r),attribState:new Array(r)}}this.gl=e;this.attributes=[];this.indexBuffer=null;this.dirty=false}i.prototype.constructor=i;t.exports=i;i.FORCE_NATIVE=false;i.prototype.bind=function(){if(this.nativeVao){this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao);if(this.dirty){this.dirty=false;this.activate();return this}if(this.indexBuffer){this.indexBuffer.bind()}}else{this.activate()}return this};i.prototype.unbind=function(){if(this.nativeVao){this.nativeVaoExtension.bindVertexArrayOES(null)}return this};i.prototype.activate=function(){var e=this.gl;var t=null;for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r];if(t!==i.buffer){i.buffer.bind();t=i.buffer}e.vertexAttribPointer(i.attribute.location,i.attribute.size,i.type||e.FLOAT,i.normalized||false,i.stride||0,i.start||0)}n(e,this.attributes,this.nativeState);if(this.indexBuffer){this.indexBuffer.bind()}return this};i.prototype.addAttribute=function(e,t,r,i,n,a){this.attributes.push({buffer:e,attribute:t,location:t.location,type:r||this.gl.FLOAT,normalized:i||false,stride:n||0,start:a||0});this.dirty=true;return this};i.prototype.addIndex=function(e){this.indexBuffer=e;this.dirty=true;return this};i.prototype.clear=function(){if(this.nativeVao){this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao)}this.attributes.length=0;this.indexBuffer=null;return this};i.prototype.draw=function(e,t,r){var i=this.gl;if(this.indexBuffer){i.drawElements(e,t||this.indexBuffer.data.length,i.UNSIGNED_SHORT,(r||0)*2)}else{i.drawArrays(e,r,t||this.getSize())}return this};i.prototype.destroy=function(){this.gl=null;this.indexBuffer=null;this.attributes=null;this.nativeState=null;if(this.nativeVao){this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao)}this.nativeVaoExtension=null;this.nativeVao=null};i.prototype.getSize=function(){var e=this.attributes[0];return e.buffer.data.length/(e.stride/4||e.attribute.size)}},{"./setVertexAttribArrays":16}],14:[function(e,t,r){var i=function(e,t){var r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);if(!r){throw new Error("This browser does not support webGL. Try using the canvas renderer")}return r};t.exports=i},{}],15:[function(e,t,r){var i={createContext:e("./createContext"),setVertexAttribArrays:e("./setVertexAttribArrays"),GLBuffer:e("./GLBuffer"),GLFramebuffer:e("./GLFramebuffer"),GLShader:e("./GLShader"),GLTexture:e("./GLTexture"),VertexArrayObject:e("./VertexArrayObject"),shader:e("./shader")};if(typeof t!=="undefined"&&t.exports){t.exports=i}if(typeof window!=="undefined"){window.PIXI=window.PIXI||{};window.PIXI.glCore=i}},{"./GLBuffer":9,"./GLFramebuffer":10,"./GLShader":11,"./GLTexture":12,"./VertexArrayObject":13,"./createContext":14,"./setVertexAttribArrays":16,"./shader":22}],16:[function(e,t,r){var i=function(e,t,r){var i;if(r){var n=r.tempAttribState,a=r.attribState;for(i=0;i<n.length;i++){n[i]=false}for(i=0;i<t.length;i++){n[t[i].attribute.location]=true}for(i=0;i<a.length;i++){if(a[i]!==n[i]){a[i]=n[i];if(r.attribState[i]){e.enableVertexAttribArray(i)}else{e.disableVertexAttribArray(i)}}}}else{for(i=0;i<t.length;i++){var o=t[i];e.enableVertexAttribArray(o.attribute.location)}}};t.exports=i},{}],17:[function(e,t,r){var i=function(e,t,r,i){var n=u(e,e.VERTEX_SHADER,t);var a=u(e,e.FRAGMENT_SHADER,r);var o=e.createProgram();e.attachShader(o,n);e.attachShader(o,a);if(i){for(var s in i){e.bindAttribLocation(o,i[s],s)}}e.linkProgram(o);if(!e.getProgramParameter(o,e.LINK_STATUS)){console.error("Pixi.js Error: Could not initialize shader.");console.error("gl.VALIDATE_STATUS",e.getProgramParameter(o,e.VALIDATE_STATUS));console.error("gl.getError()",e.getError());if(e.getProgramInfoLog(o)!==""){console.warn("Pixi.js Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(o))}e.deleteProgram(o);o=null}e.deleteShader(n);e.deleteShader(a);return o};var u=function(e,t,r){var i=e.createShader(t);e.shaderSource(i,r);e.compileShader(i);if(!e.getShaderParameter(i,e.COMPILE_STATUS)){console.log(e.getShaderInfoLog(i));return null}return i};t.exports=i},{}],18:[function(e,t,r){var i=function(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"bool":return false;case"bvec2":return n(2*t);case"bvec3":return n(3*t);case"bvec4":return n(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}};var n=function(e){var t=new Array(e);for(var r=0;r<t.length;r++){t[r]=false}return t};t.exports=i},{}],19:[function(e,t,r){var s=e("./mapType");var u=e("./mapSize");var i=function(e,t){var r={};var i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(var n=0;n<i;n++){var a=e.getActiveAttrib(t,n);var o=s(e,a.type);r[a.name]={type:o,size:u(o),location:e.getAttribLocation(t,a.name),pointer:l}}return r};var l=function(e,t,r,i){gl.vertexAttribPointer(this.location,this.size,e||gl.FLOAT,t||false,r||0,i||0)};t.exports=i},{"./mapSize":23,"./mapType":24}],20:[function(e,t,r){var u=e("./mapType");var l=e("./defaultValue");var i=function(e,t){var r={};var i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(var n=0;n<i;n++){var a=e.getActiveUniform(t,n);var o=a.name.replace(/\[.*?\]/,"");var s=u(e,a.type);r[o]={type:s,size:a.size,location:e.getUniformLocation(t,o),value:l(s,a.size)}}return r};t.exports=i},{"./defaultValue":18,"./mapType":24}],21:[function(e,t,r){var i=function(e,t){var r={data:{}};r.gl=e;var i=Object.keys(t);for(var n=0;n<i.length;n++){var a=i[n];var o=a.split(".");var s=o[o.length-1];var u=c(o,r);var l=t[a];u.data[s]=l;u.gl=e;Object.defineProperty(u,s,{get:h(s),set:f(s,l)})}return r};var h=function(e){return function(){return this.data[e].value}};var n={float:function e(t,r,i){t.uniform1f(r,i)},vec2:function e(t,r,i){t.uniform2f(r,i[0],i[1])},vec3:function e(t,r,i){t.uniform3f(r,i[0],i[1],i[2])},vec4:function e(t,r,i){t.uniform4f(r,i[0],i[1],i[2],i[3])},int:function e(t,r,i){t.uniform1i(r,i)},ivec2:function e(t,r,i){t.uniform2i(r,i[0],i[1])},ivec3:function e(t,r,i){t.uniform3i(r,i[0],i[1],i[2])},ivec4:function e(t,r,i){t.uniform4i(r,i[0],i[1],i[2],i[3])},bool:function e(t,r,i){t.uniform1i(r,i)},bvec2:function e(t,r,i){t.uniform2i(r,i[0],i[1])},bvec3:function e(t,r,i){t.uniform3i(r,i[0],i[1],i[2])},bvec4:function e(t,r,i){t.uniform4i(r,i[0],i[1],i[2],i[3])},mat2:function e(t,r,i){t.uniformMatrix2fv(r,false,i)},mat3:function e(t,r,i){t.uniformMatrix3fv(r,false,i)},mat4:function e(t,r,i){t.uniformMatrix4fv(r,false,i)},sampler2D:function e(t,r,i){t.uniform1i(r,i)}};var a={float:function e(t,r,i){t.uniform1fv(r,i)},vec2:function e(t,r,i){t.uniform2fv(r,i)},vec3:function e(t,r,i){t.uniform3fv(r,i)},vec4:function e(t,r,i){t.uniform4fv(r,i)},int:function e(t,r,i){t.uniform1iv(r,i)},ivec2:function e(t,r,i){t.uniform2iv(r,i)},ivec3:function e(t,r,i){t.uniform3iv(r,i)},ivec4:function e(t,r,i){t.uniform4iv(r,i)},bool:function e(t,r,i){t.uniform1iv(r,i)},bvec2:function e(t,r,i){t.uniform2iv(r,i)},bvec3:function e(t,r,i){t.uniform3iv(r,i)},bvec4:function e(t,r,i){t.uniform4iv(r,i)},sampler2D:function e(t,r,i){t.uniform1iv(r,i)}};function f(r,i){return function(e){this.data[r].value=e;var t=this.data[r].location;if(i.size===1){n[i.type](this.gl,t,e)}else{a[i.type](this.gl,t,e)}}}function c(e,t){var r=t;for(var i=0;i<e.length-1;i++){var n=r[e[i]]||{data:{}};r[e[i]]=n;r=n}return r}t.exports=i},{}],22:[function(e,t,r){t.exports={compileProgram:e("./compileProgram"),defaultValue:e("./defaultValue"),extractAttributes:e("./extractAttributes"),extractUniforms:e("./extractUniforms"),generateUniformAccessObject:e("./generateUniformAccessObject"),setPrecision:e("./setPrecision"),mapSize:e("./mapSize"),mapType:e("./mapType")}},{"./compileProgram":17,"./defaultValue":18,"./extractAttributes":19,"./extractUniforms":20,"./generateUniformAccessObject":21,"./mapSize":23,"./mapType":24,"./setPrecision":25}],23:[function(e,t,r){var i=function(e){return n[e]};var n={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};t.exports=i},{}],24:[function(e,t,r){var i=function(e,t){if(!a){var r=Object.keys(o);a={};for(var i=0;i<r.length;++i){var n=r[i];a[e[n]]=o[n]}}return a[t]};var a=null;var o={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};t.exports=i},{}],25:[function(e,t,r){var i=function(e,t){if(e.substring(0,9)!=="precision"){return"precision "+t+" float;\n"+e}return e};t.exports=i},{}],26:[function(e,t,r){var i=t.exports={};var n;var a;function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){n=setTimeout}else{n=o}}catch(e){n=o}try{if(typeof clearTimeout==="function"){a=clearTimeout}else{a=s}}catch(e){a=s}})();function u(t){if(n===setTimeout){return setTimeout(t,0)}if((n===o||!n)&&setTimeout){n=setTimeout;return setTimeout(t,0)}try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}function l(t){if(a===clearTimeout){return clearTimeout(t)}if((a===s||!a)&&clearTimeout){a=clearTimeout;return clearTimeout(t)}try{return a(t)}catch(e){try{return a.call(null,t)}catch(e){return a.call(this,t)}}}var h=[];var f=false;var c;var d=-1;function p(){if(!f||!c){return}f=false;if(c.length){h=c.concat(h)}else{d=-1}if(h.length){v()}}function v(){if(f){return}var e=u(p);f=true;var t=h.length;while(t){c=h;h=[];while(++d<t){if(c){c[d].run()}}d=-1;t=h.length}c=null;f=false;l(e)}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}h.push(new y(e,t));if(h.length===1&&!f){u(v)}};function y(e,t){this.fun=e;this.array=t}y.prototype.run=function(){this.fun.apply(null,this.array)};i.title="browser";i.browser=true;i.env={};i.argv=[];i.version="";i.versions={};function g(){}i.on=g;i.addListener=g;i.once=g;i.off=g;i.removeListener=g;i.removeAllListeners=g;i.emit=g;i.prependListener=g;i.prependOnceListener=g;i.listeners=function(e){return[]};i.binding=function(e){throw new Error("process.binding is not supported")};i.cwd=function(){return"/"};i.chdir=function(e){throw new Error("process.chdir is not supported")};i.umask=function(){return 0}},{}],27:[function(e,N,F){(function(L){(function(e){var t=typeof F=="object"&&F&&!F.nodeType&&F;var r=typeof N=="object"&&N&&!N.nodeType&&N;var i=typeof L=="object"&&L;if(i.global===i||i.window===i||i.self===i){e=i}var n,g=2147483647,m=36,_=1,b=26,a=38,o=700,x=72,T=128,w="-",s=/^xn--/,u=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=m-_,E=Math.floor,S=String.fromCharCode,c;function O(e){throw new RangeError(h[e])}function d(e,t){var r=e.length;var i=[];while(r--){i[r]=t(e[r])}return i}function p(e,t){var r=e.split("@");var i="";if(r.length>1){i=r[0]+"@";e=r[1]}e=e.replace(l,".");var n=e.split(".");var a=d(n,t).join(".");return i+a}function M(e){var t=[],r=0,i=e.length,n,a;while(r<i){n=e.charCodeAt(r++);if(n>=55296&&n<=56319&&r<i){a=e.charCodeAt(r++);if((a&64512)==56320){t.push(((n&1023)<<10)+(a&1023)+65536)}else{t.push(n);r--}}else{t.push(n)}}return t}function y(e){return d(e,function(e){var t="";if(e>65535){e-=65536;t+=S(e>>>10&1023|55296);e=56320|e&1023}t+=S(e);return t}).join("")}function P(e){if(e-48<10){return e-22}if(e-65<26){return e-65}if(e-97<26){return e-97}return m}function C(e,t){return e+22+75*(e<26)-((t!=0)<<5)}function R(e,t,r){var i=0;e=r?E(e/o):e>>1;e+=E(e/t);for(;e>f*b>>1;i+=m){e=E(e/f)}return E(i+(f+1)*e/(e+a))}function v(e){var t=[],r=e.length,i,n=0,a=T,o=x,s,u,l,h,f,c,d,p,v;s=e.lastIndexOf(w);if(s<0){s=0}for(u=0;u<s;++u){if(e.charCodeAt(u)>=128){O("not-basic")}t.push(e.charCodeAt(u))}for(l=s>0?s+1:0;l<r;){for(h=n,f=1,c=m;;c+=m){if(l>=r){O("invalid-input")}d=P(e.charCodeAt(l++));if(d>=m||d>E((g-n)/f)){O("overflow")}n+=d*f;p=c<=o?_:c>=o+b?b:c-o;if(d<p){break}v=m-p;if(f>E(g/v)){O("overflow")}f*=v}i=t.length+1;o=R(n-h,i,h==0);if(E(n/i)>g-a){O("overflow")}a+=E(n/i);n%=i;t.splice(n++,0,a)}return y(t)}function A(e){var t,r,i,n,a,o,s,u,l,h,f,c=[],d,p,v,y;e=M(e);d=e.length;t=T;r=0;a=x;for(o=0;o<d;++o){f=e[o];if(f<128){c.push(S(f))}}i=n=c.length;if(n){c.push(w)}while(i<d){for(s=g,o=0;o<d;++o){f=e[o];if(f>=t&&f<s){s=f}}p=i+1;if(s-t>E((g-r)/p)){O("overflow")}r+=(s-t)*p;t=s;for(o=0;o<d;++o){f=e[o];if(f<t&&++r>g){O("overflow")}if(f==t){for(u=r,l=m;;l+=m){h=l<=a?_:l>=a+b?b:l-a;if(u<h){break}y=u-h;v=m-h;c.push(S(C(h+y%v,0)));u=E(y/v)}c.push(S(C(u,0)));a=R(r,p,i==n);r=0;++i}}++r;++t}return c.join("")}function I(e){return p(e,function(e){return s.test(e)?v(e.slice(4).toLowerCase()):e})}function D(e){return p(e,function(e){return u.test(e)?"xn--"+A(e):e})}n={version:"1.4.1",ucs2:{decode:M,encode:y},decode:v,encode:A,toASCII:D,toUnicode:I};if(typeof k=="function"&&typeof k.amd=="object"&&k.amd){k("punycode",function(){return n})}else if(t&&r){if(N.exports==t){r.exports=n}else{for(c in n){n.hasOwnProperty(c)&&(t[c]=n[c])}}}else{e.punycode=n}})(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],28:[function(e,t,r){"use strict";function v(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,r,i){t=t||"&";r=r||"=";var n={};if(typeof e!=="string"||e.length===0){return n}var a=/\+/g;e=e.split(t);var o=1e3;if(i&&typeof i.maxKeys==="number"){o=i.maxKeys}var s=e.length;if(o>0&&s>o){s=o}for(var u=0;u<s;++u){var l=e[u].replace(a,"%20"),h=l.indexOf(r),f,c,d,p;if(h>=0){f=l.substr(0,h);c=l.substr(h+1)}else{f=l;c=""}d=decodeURIComponent(f);p=decodeURIComponent(c);if(!v(n,d)){n[d]=p}else if(y(n[d])){n[d].push(p)}else{n[d]=[n[d],p]}}return n};var y=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}},{}],29:[function(e,t,r){"use strict";var a=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(r,i,n,e){i=i||"&";n=n||"=";if(r===null){r=undefined}if(typeof r==="object"){return s(u(r),function(e){var t=encodeURIComponent(a(e))+n;if(o(r[e])){return s(r[e],function(e){return t+encodeURIComponent(a(e))}).join(i)}else{return t+encodeURIComponent(a(r[e]))}}).join(i)}if(!e)return"";return encodeURIComponent(a(e))+n+encodeURIComponent(a(r))};var o=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function s(e,t){if(e.map)return e.map(t);var r=[];for(var i=0;i<e.length;i++){r.push(t(e[i],i))}return r}var u=Object.keys||function(e){var t=[];for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t.push(r)}return t}},{}],30:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode");r.encode=r.stringify=e("./encode")},{"./decode":28,"./encode":29}],31:[function(e,t,r){"use strict";t.exports=function e(t,r,i){var n,a=t.length;if(r>=a||i===0){return}i=r+i>a?a-r:i;var o=a-i;for(n=r;n<o;++n){t[n]=t[n+i]}t.length=o}},{}],32:[function(e,t,r){"use strict";r.__esModule=true;var c=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=e("mini-signals");var n=f(i);var a=e("parse-uri");var o=f(a);var s=e("./async");var u=h(s);var l=e("./Resource");var d=f(l);function h(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var v=100;var y=/(#[\w-]+)?$/;var g=function(){function i(){var r=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;p(this,i);this.baseUrl=e;this.progress=0;this.loading=false;this.defaultQueryString="";this._beforeMiddleware=[];this._afterMiddleware=[];this._resourcesParsing=[];this._boundLoadResource=function(e,t){return r._loadResource(e,t)};this._queue=u.queue(this._boundLoadResource,t);this._queue.pause();this.resources={};this.onProgress=new n.default;this.onError=new n.default;this.onLoad=new n.default;this.onStart=new n.default;this.onComplete=new n.default}i.prototype.add=function e(t,r,i,n){if(Array.isArray(t)){for(var a=0;a<t.length;++a){this.add(t[a])}return this}if((typeof t==="undefined"?"undefined":c(t))==="object"){n=r||t.callback||t.onComplete;i=t;r=t.url;t=t.name||t.key||t.url}if(typeof r!=="string"){n=i;i=r;r=t}if(typeof r!=="string"){throw new Error("No url passed to add resource to loader.")}if(typeof i==="function"){n=i;i=null}if(this.loading&&(!i||!i.parentResource)){throw new Error("Cannot add resources while the loader is running.")}if(this.resources[t]){throw new Error('Resource named "'+t+'" already exists.')}r=this._prepareUrl(r);this.resources[t]=new d.default(t,r,i);if(typeof n==="function"){this.resources[t].onAfterMiddleware.once(n)}if(this.loading){var o=i.parentResource;var s=[];for(var u=0;u<o.children.length;++u){if(!o.children[u].isComplete){s.push(o.children[u])}}var l=o.progressChunk*(s.length+1);var h=l/(s.length+2);o.children.push(this.resources[t]);o.progressChunk=h;for(var f=0;f<s.length;++f){s[f].progressChunk=h}this.resources[t].progressChunk=h}this._queue.push(this.resources[t]);return this};i.prototype.pre=function e(t){this._beforeMiddleware.push(t);return this};i.prototype.use=function e(t){this._afterMiddleware.push(t);return this};i.prototype.reset=function e(){this.progress=0;this.loading=false;this._queue.kill();this._queue.pause();for(var t in this.resources){var r=this.resources[t];if(r._onLoadBinding){r._onLoadBinding.detach()}if(r.isLoading){r.abort()}}this.resources={};return this};i.prototype.load=function e(t){if(typeof t==="function"){this.onComplete.once(t)}if(this.loading){return this}var r=100/this._queue._tasks.length;for(var i=0;i<this._queue._tasks.length;++i){this._queue._tasks[i].data.progressChunk=r}this.loading=true;this.onStart.dispatch(this);this._queue.resume();return this};i.prototype._prepareUrl=function e(t){var r=(0,o.default)(t,{strictMode:true});var i=void 0;if(r.protocol||!r.path||t.indexOf("//")===0){i=t}else if(this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&t.charAt(0)!=="/"){i=this.baseUrl+"/"+t}else{i=this.baseUrl+t}if(this.defaultQueryString){var n=y.exec(i)[0];i=i.substr(0,i.length-n.length);if(i.indexOf("?")!==-1){i+="&"+this.defaultQueryString}else{i+="?"+this.defaultQueryString}i+=n}return i};i.prototype._loadResource=function e(r,t){var i=this;r._dequeue=t;u.eachSeries(this._beforeMiddleware,function(e,t){e.call(i,r,function(){t(r.isComplete?{}:null)})},function(){if(r.isComplete){i._onLoad(r)}else{r._onLoadBinding=r.onComplete.once(i._onLoad,i);r.load()}},true)};i.prototype._onComplete=function e(){this.loading=false;this.onComplete.dispatch(this,this.resources)};i.prototype._onLoad=function e(r){var i=this;r._onLoadBinding=null;this._resourcesParsing.push(r);r._dequeue();u.eachSeries(this._afterMiddleware,function(e,t){e.call(i,r,t)},function(){r.onAfterMiddleware.dispatch(r);i.progress+=r.progressChunk;i.onProgress.dispatch(i,r);if(r.error){i.onError.dispatch(r.error,i,r)}else{i.onLoad.dispatch(i,r)}i._resourcesParsing.splice(i._resourcesParsing.indexOf(r),1);if(i._queue.idle()&&i._resourcesParsing.length===0){i.progress=v;i._onComplete()}},true)};return i}();r.default=g},{"./Resource":33,"./async":34,"mini-signals":5,"parse-uri":7}],33:[function(e,t,r){"use strict";r.__esModule=true;var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var n=e("parse-uri");var a=s(n);var o=e("mini-signals");var u=s(o);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var h=!!(window.XDomainRequest&&!("withCredentials"in new XMLHttpRequest));var f=null;var c=0;var d=200;var p=204;var v=1223;var y=2;function g(){}var m=function(){s.setExtensionLoadType=function e(t,r){_(s._loadTypeMap,t,r)};s.setExtensionXhrType=function e(t,r){_(s._xhrTypeMap,t,r)};function s(e,t,r){l(this,s);if(typeof e!=="string"||typeof t!=="string"){throw new Error("Both name and url are required for constructing a resource.")}r=r||{};this._flags=0;this._setFlag(s.STATUS_FLAGS.DATA_URL,t.indexOf("data:")===0);this.name=e;this.url=t;this.extension=this._getExtension();this.data=null;this.crossOrigin=r.crossOrigin===true?"anonymous":r.crossOrigin;this.loadType=r.loadType||this._determineLoadType();this.xhrType=r.xhrType;this.metadata=r.metadata||{};this.error=null;this.xhr=null;this.children=[];this.type=s.TYPE.UNKNOWN;this.progressChunk=0;this._dequeue=g;this._onLoadBinding=null;this._boundComplete=this.complete.bind(this);this._boundOnError=this._onError.bind(this);this._boundOnProgress=this._onProgress.bind(this);this._boundXhrOnError=this._xhrOnError.bind(this);this._boundXhrOnAbort=this._xhrOnAbort.bind(this);this._boundXhrOnLoad=this._xhrOnLoad.bind(this);this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this);this.onStart=new u.default;this.onProgress=new u.default;this.onComplete=new u.default;this.onAfterMiddleware=new u.default}s.prototype.complete=function e(){if(this.data&&this.data.removeEventListener){this.data.removeEventListener("error",this._boundOnError,false);this.data.removeEventListener("load",this._boundComplete,false);this.data.removeEventListener("progress",this._boundOnProgress,false);this.data.removeEventListener("canplaythrough",this._boundComplete,false)}if(this.xhr){if(this.xhr.removeEventListener){this.xhr.removeEventListener("error",this._boundXhrOnError,false);this.xhr.removeEventListener("abort",this._boundXhrOnAbort,false);this.xhr.removeEventListener("progress",this._boundOnProgress,false);this.xhr.removeEventListener("load",this._boundXhrOnLoad,false)}else{this.xhr.onerror=null;this.xhr.ontimeout=null;this.xhr.onprogress=null;this.xhr.onload=null}}if(this.isComplete){throw new Error("Complete called again for an already completed resource.")}this._setFlag(s.STATUS_FLAGS.COMPLETE,true);this._setFlag(s.STATUS_FLAGS.LOADING,false);this.onComplete.dispatch(this)};s.prototype.abort=function e(t){if(this.error){return}this.error=new Error(t);if(this.xhr){this.xhr.abort()}else if(this.xdr){this.xdr.abort()}else if(this.data){if(this.data.src){this.data.src=s.EMPTY_GIF}else{while(this.data.firstChild){this.data.removeChild(this.data.firstChild)}}}this.complete()};s.prototype.load=function e(t){var r=this;if(this.isLoading){return}if(this.isComplete){if(t){setTimeout(function(){return t(r)},1)}return}else if(t){this.onComplete.once(t)}this._setFlag(s.STATUS_FLAGS.LOADING,true);this.onStart.dispatch(this);if(this.crossOrigin===false||typeof this.crossOrigin!=="string"){this.crossOrigin=this._determineCrossOrigin(this.url)}switch(this.loadType){case s.LOAD_TYPE.IMAGE:this.type=s.TYPE.IMAGE;this._loadElement("image");break;case s.LOAD_TYPE.AUDIO:this.type=s.TYPE.AUDIO;this._loadSourceElement("audio");break;case s.LOAD_TYPE.VIDEO:this.type=s.TYPE.VIDEO;this._loadSourceElement("video");break;case s.LOAD_TYPE.XHR:default:if(h&&this.crossOrigin){this._loadXdr()}else{this._loadXhr()}break}};s.prototype._hasFlag=function e(t){return!!(this._flags&t)};s.prototype._setFlag=function e(t,r){this._flags=r?this._flags|t:this._flags&~t};s.prototype._loadElement=function e(t){if(this.metadata.loadElement){this.data=this.metadata.loadElement}else if(t==="image"&&typeof window.Image!=="undefined"){this.data=new Image}else{this.data=document.createElement(t)}if(this.crossOrigin){this.data.crossOrigin=this.crossOrigin}if(!this.metadata.skipSource){this.data.src=this.url}this.data.addEventListener("error",this._boundOnError,false);this.data.addEventListener("load",this._boundComplete,false);this.data.addEventListener("progress",this._boundOnProgress,false)};s.prototype._loadSourceElement=function e(t){if(this.metadata.loadElement){this.data=this.metadata.loadElement}else if(t==="audio"&&typeof window.Audio!=="undefined"){this.data=new Audio}else{this.data=document.createElement(t)}if(this.data===null){this.abort("Unsupported element: "+t);return}if(!this.metadata.skipSource){if(navigator.isCocoonJS){this.data.src=Array.isArray(this.url)?this.url[0]:this.url}else if(Array.isArray(this.url)){var r=this.metadata.mimeType;for(var i=0;i<this.url.length;++i){this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(r)?r[i]:r))}}else{var n=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(n)?n[0]:n))}}this.data.addEventListener("error",this._boundOnError,false);this.data.addEventListener("load",this._boundComplete,false);this.data.addEventListener("progress",this._boundOnProgress,false);this.data.addEventListener("canplaythrough",this._boundComplete,false);this.data.load()};s.prototype._loadXhr=function e(){if(typeof this.xhrType!=="string"){this.xhrType=this._determineXhrType()}var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,true);if(this.xhrType===s.XHR_RESPONSE_TYPE.JSON||this.xhrType===s.XHR_RESPONSE_TYPE.DOCUMENT){t.responseType=s.XHR_RESPONSE_TYPE.TEXT}else{t.responseType=this.xhrType}t.addEventListener("error",this._boundXhrOnError,false);t.addEventListener("abort",this._boundXhrOnAbort,false);t.addEventListener("progress",this._boundOnProgress,false);t.addEventListener("load",this._boundXhrOnLoad,false);t.send()};s.prototype._loadXdr=function e(){if(typeof this.xhrType!=="string"){this.xhrType=this._determineXhrType()}var t=this.xhr=new XDomainRequest;t.timeout=5e3;t.onerror=this._boundXhrOnError;t.ontimeout=this._boundXdrOnTimeout;t.onprogress=this._boundOnProgress;t.onload=this._boundXhrOnLoad;t.open("GET",this.url,true);setTimeout(function(){return t.send()},1)};s.prototype._createSource=function e(t,r,i){if(!i){i=t+"/"+this._getExtension(r)}var n=document.createElement("source");n.src=r;n.type=i;return n};s.prototype._onError=function e(t){this.abort("Failed to load element using: "+t.target.nodeName)};s.prototype._onProgress=function e(t){if(t&&t.lengthComputable){this.onProgress.dispatch(this,t.loaded/t.total)}};s.prototype._xhrOnError=function e(){var t=this.xhr;this.abort(b(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')};s.prototype._xhrOnAbort=function e(){this.abort(b(this.xhr)+" Request was aborted by the user.")};s.prototype._xdrOnTimeout=function e(){this.abort(b(this.xhr)+" Request timed out.")};s.prototype._xhrOnLoad=function e(){var t=this.xhr;var r="";var i=typeof t.status==="undefined"?d:t.status;if(t.responseType===""||t.responseType==="text"||typeof t.responseType==="undefined"){r=t.responseText}if(i===c&&r.length>0){i=d}else if(i===v){i=p}var n=i/100|0;if(n===y){if(this.xhrType===s.XHR_RESPONSE_TYPE.TEXT){this.data=r;this.type=s.TYPE.TEXT}else if(this.xhrType===s.XHR_RESPONSE_TYPE.JSON){try{this.data=JSON.parse(r);this.type=s.TYPE.JSON}catch(e){this.abort("Error trying to parse loaded json: "+e);return}}else if(this.xhrType===s.XHR_RESPONSE_TYPE.DOCUMENT){try{if(window.DOMParser){var a=new DOMParser;this.data=a.parseFromString(r,"text/xml")}else{var o=document.createElement("div");o.innerHTML=r;this.data=o}this.type=s.TYPE.XML}catch(e){this.abort("Error trying to parse loaded xml: "+e);return}}else{this.data=t.response||r}}else{this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL);return}this.complete()};s.prototype._determineCrossOrigin=function e(t,r){if(t.indexOf("data:")===0){return""}r=r||window.location;if(!f){f=document.createElement("a")}f.href=t;t=(0,a.default)(f.href,{strictMode:true});var i=!t.port&&r.port===""||t.port===r.port;var n=t.protocol?t.protocol+":":"";if(t.host!==r.hostname||!i||n!==r.protocol){return"anonymous"}return""};s.prototype._determineXhrType=function e(){return s._xhrTypeMap[this.extension]||s.XHR_RESPONSE_TYPE.TEXT};s.prototype._determineLoadType=function e(){return s._loadTypeMap[this.extension]||s.LOAD_TYPE.XHR};s.prototype._getExtension=function e(){var t=this.url;var r="";if(this.isDataUrl){var i=t.indexOf("/");r=t.substring(i+1,t.indexOf(";",i))}else{var n=t.indexOf("?");var a=t.indexOf("#");var o=Math.min(n>-1?n:t.length,a>-1?a:t.length);t=t.substring(0,o);r=t.substring(t.lastIndexOf(".")+1)}return r.toLowerCase()};s.prototype._getMimeFromXhrType=function e(t){switch(t){case s.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case s.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case s.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case s.XHR_RESPONSE_TYPE.JSON:return"application/json";case s.XHR_RESPONSE_TYPE.DEFAULT:case s.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}};i(s,[{key:"isDataUrl",get:function e(){return this._hasFlag(s.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function e(){return this._hasFlag(s.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function e(){return this._hasFlag(s.STATUS_FLAGS.LOADING)}}]);return s}();r.default=m;m.STATUS_FLAGS={NONE:0,DATA_URL:1<<0,COMPLETE:1<<1,LOADING:1<<2};m.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6};m.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4};m.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"};m._loadTypeMap={gif:m.LOAD_TYPE.IMAGE,png:m.LOAD_TYPE.IMAGE,bmp:m.LOAD_TYPE.IMAGE,jpg:m.LOAD_TYPE.IMAGE,jpeg:m.LOAD_TYPE.IMAGE,tif:m.LOAD_TYPE.IMAGE,tiff:m.LOAD_TYPE.IMAGE,webp:m.LOAD_TYPE.IMAGE,tga:m.LOAD_TYPE.IMAGE,svg:m.LOAD_TYPE.IMAGE,"svg+xml":m.LOAD_TYPE.IMAGE,mp3:m.LOAD_TYPE.AUDIO,ogg:m.LOAD_TYPE.AUDIO,wav:m.LOAD_TYPE.AUDIO,mp4:m.LOAD_TYPE.VIDEO,webm:m.LOAD_TYPE.VIDEO};m._xhrTypeMap={xhtml:m.XHR_RESPONSE_TYPE.DOCUMENT,html:m.XHR_RESPONSE_TYPE.DOCUMENT,htm:m.XHR_RESPONSE_TYPE.DOCUMENT,xml:m.XHR_RESPONSE_TYPE.DOCUMENT,tmx:m.XHR_RESPONSE_TYPE.DOCUMENT,svg:m.XHR_RESPONSE_TYPE.DOCUMENT,tsx:m.XHR_RESPONSE_TYPE.DOCUMENT,gif:m.XHR_RESPONSE_TYPE.BLOB,png:m.XHR_RESPONSE_TYPE.BLOB,bmp:m.XHR_RESPONSE_TYPE.BLOB,jpg:m.XHR_RESPONSE_TYPE.BLOB,jpeg:m.XHR_RESPONSE_TYPE.BLOB,tif:m.XHR_RESPONSE_TYPE.BLOB,tiff:m.XHR_RESPONSE_TYPE.BLOB,webp:m.XHR_RESPONSE_TYPE.BLOB,tga:m.XHR_RESPONSE_TYPE.BLOB,json:m.XHR_RESPONSE_TYPE.JSON,text:m.XHR_RESPONSE_TYPE.TEXT,txt:m.XHR_RESPONSE_TYPE.TEXT,ttf:m.XHR_RESPONSE_TYPE.BUFFER,otf:m.XHR_RESPONSE_TYPE.BUFFER};m.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";function _(e,t,r){if(t&&t.indexOf(".")===0){t=t.substring(1)}if(!t){return}e[t]=r}function b(e){return e.toString().replace("object ","")}},{"mini-signals":5,"parse-uri":7}],34:[function(e,t,r){"use strict";r.__esModule=true;r.eachSeries=i;r.queue=n;function s(){}function i(r,i,n,a){var o=0;var s=r.length;(function e(t){if(t||o===s){if(n){n(t)}return}if(a){setTimeout(function(){i(r[o++],e)},1)}else{i(r[o++],e)}})()}function u(r){return function e(){if(r===null){throw new Error("Callback was already called.")}var t=r;r=null;t.apply(this,arguments)}}function n(r,e){if(e==null){e=1}else if(e===0){throw new Error("Concurrency must not be zero")}var i=0;var n={_tasks:[],concurrency:e,saturated:s,unsaturated:s,buffer:e/4,empty:s,drain:s,error:s,started:false,paused:false,push:function e(t,r){a(t,false,r)},kill:function e(){i=0;n.drain=s;n.started=false;n._tasks=[]},unshift:function e(t,r){a(t,true,r)},process:function e(){while(!n.paused&&i<n.concurrency&&n._tasks.length){var t=n._tasks.shift();if(n._tasks.length===0){n.empty()}i+=1;if(i===n.concurrency){n.saturated()}r(t.data,u(o(t)))}},length:function e(){return n._tasks.length},running:function e(){return i},idle:function e(){return n._tasks.length+i===0},pause:function e(){if(n.paused===true){return}n.paused=true},resume:function e(){if(n.paused===false){return}n.paused=false;for(var t=1;t<=n.concurrency;t++){n.process()}}};function a(e,t,r){if(r!=null&&typeof r!=="function"){throw new Error("task callback must be a function")}n.started=true;if(e==null&&n.idle()){setTimeout(function(){return n.drain()},1);return}var i={data:e,callback:typeof r==="function"?r:s};if(t){n._tasks.unshift(i)}else{n._tasks.push(i)}setTimeout(function(){return n.process()},1)}function o(t){return function e(){i-=1;t.callback.apply(t,arguments);if(arguments[0]!=null){n.error(arguments[0],t.data)}if(i<=n.concurrency-n.buffer){n.unsaturated()}if(n.idle()){n.drain()}n.process()}}return n}},{}],35:[function(e,t,r){"use strict";r.__esModule=true;r.encodeBinary=i;var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function i(e){var t="";var r=0;while(r<e.length){var i=[0,0,0];var n=[0,0,0,0];for(var a=0;a<i.length;++a){if(r<e.length){i[a]=e.charCodeAt(r++)&255}else{i[a]=0}}n[0]=i[0]>>2;n[1]=(i[0]&3)<<4|i[1]>>4;n[2]=(i[1]&15)<<2|i[2]>>6;n[3]=i[2]&63;var o=r-(e.length-1);switch(o){case 2:n[3]=64;n[2]=64;break;case 1:n[3]=64;break;default:break}for(var s=0;s<n.length;++s){t+=u.charAt(n[s])}}return t}},{}],36:[function(e,t,r){"use strict";var i=e("./Loader").default;var n=e("./Resource").default;var a=e("./async");var o=e("./b64");i.Resource=n;i.async=a;i.base64=o;t.exports=i;t.exports.default=i},{"./Loader":32,"./Resource":33,"./async":34,"./b64":35}],37:[function(e,t,r){"use strict";r.__esModule=true;var a=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.blobMiddlewareFactory=h;var i=e("../../Resource");var o=u(i);var n=e("../../b64");var s=u(n);function u(e){return e&&e.__esModule?e:{default:e}}var l=window.URL||window.webkitURL;function h(){return function e(t,r){if(!t.data){r();return}if(t.xhr&&t.xhrType===o.default.XHR_RESPONSE_TYPE.BLOB){if(!window.Blob||typeof t.data==="string"){var i=t.xhr.getResponseHeader("content-type");if(i&&i.indexOf("image")===0){t.data=new Image;t.data.src="data:"+i+";base64,"+s.default.encodeBinary(t.xhr.responseText);t.type=o.default.TYPE.IMAGE;t.data.onload=function(){t.data.onload=null;r()};return}}else if(t.data.type.indexOf("image")===0){var n=function(){var e=l.createObjectURL(t.data);t.blob=t.data;t.data=new Image;t.data.src=e;t.type=o.default.TYPE.IMAGE;t.data.onload=function(){l.revokeObjectURL(e);t.data.onload=null;r()};return{v:void 0}}();if((typeof n==="undefined"?"undefined":a(n))==="object")return n.v}}r()}}},{"../../Resource":33,"../../b64":35}],38:[function(e,t,r){"use strict";var L=e("punycode");var N=e("./util");r.parse=o;r.resolve=u;r.resolveObject=l;r.format=s;r.Url=M;function M(){this.protocol=null;this.slashes=null;this.auth=null;this.host=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.query=null;this.pathname=null;this.path=null;this.href=null}var F=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,k=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,n=["<",">",'"',"`"," ","\r","\n","\t"],a=["{","}","|","\\","^","`"].concat(n),B=["'"].concat(a),j=["%","/","?",";","#"].concat(B),U=["/","?","#"],X=255,G=/^[+a-z0-9A-Z_-]{0,63}$/,W=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,H={javascript:true,"javascript:":true},Y={javascript:true,"javascript:":true},V={http:true,https:true,ftp:true,gopher:true,file:true,"http:":true,"https:":true,"ftp:":true,"gopher:":true,"file:":true},z=e("querystring");function o(e,t,r){if(e&&N.isObject(e)&&e instanceof M)return e;var i=new M;i.parse(e,t,r);return i}M.prototype.parse=function(e,t,r){if(!N.isString(e)){throw new TypeError("Parameter 'url' must be a string, not "+typeof e)}var i=e.indexOf("?"),n=i!==-1&&i<e.indexOf("#")?"?":"#",a=e.split(n),o=/\\/g;a[0]=a[0].replace(o,"/");e=a.join(n);var s=e;s=s.trim();if(!r&&e.split("#").length===1){var u=k.exec(s);if(u){this.path=s;this.href=s;this.pathname=u[1];if(u[2]){this.search=u[2];if(t){this.query=z.parse(this.search.substr(1))}else{this.query=this.search.substr(1)}}else if(t){this.search="";this.query={}}return this}}var l=F.exec(s);if(l){l=l[0];var h=l.toLowerCase();this.protocol=h;s=s.substr(l.length)}if(r||l||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var f=s.substr(0,2)==="//";if(f&&!(l&&Y[l])){s=s.substr(2);this.slashes=true}}if(!Y[l]&&(f||l&&!V[l])){var c=-1;for(var d=0;d<U.length;d++){var p=s.indexOf(U[d]);if(p!==-1&&(c===-1||p<c))c=p}var v,y;if(c===-1){y=s.lastIndexOf("@")}else{y=s.lastIndexOf("@",c)}if(y!==-1){v=s.slice(0,y);s=s.slice(y+1);this.auth=decodeURIComponent(v)}c=-1;for(var d=0;d<j.length;d++){var p=s.indexOf(j[d]);if(p!==-1&&(c===-1||p<c))c=p}if(c===-1)c=s.length;this.host=s.slice(0,c);s=s.slice(c);this.parseHost();this.hostname=this.hostname||"";var g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g){var m=this.hostname.split(/\./);for(var d=0,_=m.length;d<_;d++){var b=m[d];if(!b)continue;if(!b.match(G)){var x="";for(var T=0,w=b.length;T<w;T++){if(b.charCodeAt(T)>127){x+="x"}else{x+=b[T]}}if(!x.match(G)){var E=m.slice(0,d);var S=m.slice(d+1);var O=b.match(W);if(O){E.push(O[1]);S.unshift(O[2])}if(S.length){s="/"+S.join(".")+s}this.hostname=E.join(".");break}}}}if(this.hostname.length>X){this.hostname=""}else{this.hostname=this.hostname.toLowerCase()}if(!g){this.hostname=L.toASCII(this.hostname)}var M=this.port?":"+this.port:"";var P=this.hostname||"";this.host=P+M;this.href+=this.host;if(g){this.hostname=this.hostname.substr(1,this.hostname.length-2);if(s[0]!=="/"){s="/"+s}}}if(!H[h]){for(var d=0,_=B.length;d<_;d++){var C=B[d];if(s.indexOf(C)===-1)continue;var R=encodeURIComponent(C);if(R===C){R=escape(C)}s=s.split(C).join(R)}}var A=s.indexOf("#");if(A!==-1){this.hash=s.substr(A);s=s.slice(0,A)}var I=s.indexOf("?");if(I!==-1){this.search=s.substr(I);this.query=s.substr(I+1);if(t){this.query=z.parse(this.query)}s=s.slice(0,I)}else if(t){this.search="";this.query={}}if(s)this.pathname=s;if(V[h]&&this.hostname&&!this.pathname){this.pathname="/"}if(this.pathname||this.search){var M=this.pathname||"";var D=this.search||"";this.path=M+D}this.href=this.format();return this};function s(e){if(N.isString(e))e=o(e);if(!(e instanceof M))return M.prototype.format.call(e);return e.format()}M.prototype.format=function(){var e=this.auth||"";if(e){e=encodeURIComponent(e);e=e.replace(/%3A/i,":");e+="@"}var t=this.protocol||"",r=this.pathname||"",i=this.hash||"",n=false,a="";if(this.host){n=e+this.host}else if(this.hostname){n=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]");if(this.port){n+=":"+this.port}}if(this.query&&N.isObject(this.query)&&Object.keys(this.query).length){a=z.stringify(this.query)}var o=this.search||a&&"?"+a||"";if(t&&t.substr(-1)!==":")t+=":";if(this.slashes||(!t||V[t])&&n!==false){n="//"+(n||"");if(r&&r.charAt(0)!=="/")r="/"+r}else if(!n){n=""}if(i&&i.charAt(0)!=="#")i="#"+i;if(o&&o.charAt(0)!=="?")o="?"+o;r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)});o=o.replace("#","%23");return t+n+r+o+i};function u(e,t){return o(e,false,true).resolve(t)}M.prototype.resolve=function(e){return this.resolveObject(o(e,false,true)).format()};function l(e,t){if(!e)return t;return o(e,false,true).resolveObject(t)}M.prototype.resolveObject=function(e){if(N.isString(e)){var t=new M;t.parse(e,false,true);e=t}var r=new M;var i=Object.keys(this);for(var n=0;n<i.length;n++){var a=i[n];r[a]=this[a]}r.hash=e.hash;if(e.href===""){r.href=r.format();return r}if(e.slashes&&!e.protocol){var o=Object.keys(e);for(var s=0;s<o.length;s++){var u=o[s];if(u!=="protocol")r[u]=e[u]}if(V[r.protocol]&&r.hostname&&!r.pathname){r.path=r.pathname="/"}r.href=r.format();return r}if(e.protocol&&e.protocol!==r.protocol){if(!V[e.protocol]){var l=Object.keys(e);for(var h=0;h<l.length;h++){var f=l[h];r[f]=e[f]}r.href=r.format();return r}r.protocol=e.protocol;if(!e.host&&!Y[e.protocol]){var c=(e.pathname||"").split("/");while(c.length&&!(e.host=c.shift()));if(!e.host)e.host="";if(!e.hostname)e.hostname="";if(c[0]!=="")c.unshift("");if(c.length<2)c.unshift("");r.pathname=c.join("/")}else{r.pathname=e.pathname}r.search=e.search;r.query=e.query;r.host=e.host||"";r.auth=e.auth;r.hostname=e.hostname||e.host;r.port=e.port;if(r.pathname||r.search){var d=r.pathname||"";var p=r.search||"";r.path=d+p}r.slashes=r.slashes||e.slashes;r.href=r.format();return r}var v=r.pathname&&r.pathname.charAt(0)==="/",y=e.host||e.pathname&&e.pathname.charAt(0)==="/",g=y||v||r.host&&e.pathname,m=g,_=r.pathname&&r.pathname.split("/")||[],c=e.pathname&&e.pathname.split("/")||[],b=r.protocol&&!V[r.protocol];if(b){r.hostname="";r.port=null;if(r.host){if(_[0]==="")_[0]=r.host;else _.unshift(r.host)}r.host="";if(e.protocol){e.hostname=null;e.port=null;if(e.host){if(c[0]==="")c[0]=e.host;else c.unshift(e.host)}e.host=null}g=g&&(c[0]===""||_[0]==="")}if(y){r.host=e.host||e.host===""?e.host:r.host;r.hostname=e.hostname||e.hostname===""?e.hostname:r.hostname;r.search=e.search;r.query=e.query;_=c}else if(c.length){if(!_)_=[];_.pop();_=_.concat(c);r.search=e.search;r.query=e.query}else if(!N.isNullOrUndefined(e.search)){if(b){r.hostname=r.host=_.shift();var x=r.host&&r.host.indexOf("@")>0?r.host.split("@"):false;if(x){r.auth=x.shift();r.host=r.hostname=x.shift()}}r.search=e.search;r.query=e.query;if(!N.isNull(r.pathname)||!N.isNull(r.search)){r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")}r.href=r.format();return r}if(!_.length){r.pathname=null;if(r.search){r.path="/"+r.search}else{r.path=null}r.href=r.format();return r}var T=_.slice(-1)[0];var w=(r.host||e.host||_.length>1)&&(T==="."||T==="..")||T==="";var E=0;for(var S=_.length;S>=0;S--){T=_[S];if(T==="."){_.splice(S,1)}else if(T===".."){_.splice(S,1);E++}else if(E){_.splice(S,1);E--}}if(!g&&!m){for(;E--;E){_.unshift("..")}}if(g&&_[0]!==""&&(!_[0]||_[0].charAt(0)!=="/")){_.unshift("")}if(w&&_.join("/").substr(-1)!=="/"){_.push("")}var O=_[0]===""||_[0]&&_[0].charAt(0)==="/";if(b){r.hostname=r.host=O?"":_.length?_.shift():"";var x=r.host&&r.host.indexOf("@")>0?r.host.split("@"):false;if(x){r.auth=x.shift();r.host=r.hostname=x.shift()}}g=g||r.host&&_.length;if(g&&!O){_.unshift("")}if(!_.length){r.pathname=null;r.path=null}else{r.pathname=_.join("/")}if(!N.isNull(r.pathname)||!N.isNull(r.search)){r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")}r.auth=e.auth||r.auth;r.slashes=r.slashes||e.slashes;r.href=r.format();return r};M.prototype.parseHost=function(){var e=this.host;var t=i.exec(e);if(t){t=t[0];if(t!==":"){this.port=t.substr(1)}e=e.substr(0,e.length-t.length)}if(e)this.hostname=e}},{"./util":39,punycode:27,querystring:30}],39:[function(e,t,r){"use strict";t.exports={isString:function(e){return typeof e==="string"},isObject:function(e){return typeof e==="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}}},{}],40:[function(e,t,r){"use strict";r.__esModule=true;var i=e("../core");var l=h(i);var n=e("ismobilejs");var a=u(n);var o=e("./accessibleTarget");var s=u(o);function u(e){return e&&e.__esModule?e:{default:e}}function h(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}l.utils.mixins.delayMixin(l.DisplayObject.prototype,s.default);var c=9;var d=100;var p=0;var v=0;var y=2;var g=1;var m=-1e3;var _=-1e3;var b=2;var x=function(){function r(e){f(this,r);if((a.default.tablet||a.default.phone)&&!navigator.isCocoonJS){this.createTouchHook()}var t=document.createElement("div");t.style.width=d+"px";t.style.height=d+"px";t.style.position="absolute";t.style.top=p+"px";t.style.left=v+"px";t.style.zIndex=y;this.div=t;this.pool=[];this.renderId=0;this.debug=false;this.renderer=e;this.children=[];this._onKeyDown=this._onKeyDown.bind(this);this._onMouseMove=this._onMouseMove.bind(this);this.isActive=false;this.isMobileAccessabillity=false;window.addEventListener("keydown",this._onKeyDown,false)}r.prototype.createTouchHook=function e(){var t=this;var r=document.createElement("button");r.style.width=g+"px";r.style.height=g+"px";r.style.position="absolute";r.style.top=m+"px";r.style.left=_+"px";r.style.zIndex=b;r.style.backgroundColor="#FF0000";r.title="HOOK DIV";r.addEventListener("focus",function(){t.isMobileAccessabillity=true;t.activate();document.body.removeChild(r)});document.body.appendChild(r)};r.prototype.activate=function e(){if(this.isActive){return}this.isActive=true;window.document.addEventListener("mousemove",this._onMouseMove,true);window.removeEventListener("keydown",this._onKeyDown,false);this.renderer.on("postrender",this.update,this);if(this.renderer.view.parentNode){this.renderer.view.parentNode.appendChild(this.div)}};r.prototype.deactivate=function e(){if(!this.isActive||this.isMobileAccessabillity){return}this.isActive=false;window.document.removeEventListener("mousemove",this._onMouseMove);window.addEventListener("keydown",this._onKeyDown,false);this.renderer.off("postrender",this.update);if(this.div.parentNode){this.div.parentNode.removeChild(this.div)}};r.prototype.updateAccessibleObjects=function e(t){if(!t.visible){return}if(t.accessible&&t.interactive){if(!t._accessibleActive){this.addChild(t)}t.renderId=this.renderId}var r=t.children;for(var i=r.length-1;i>=0;i--){this.updateAccessibleObjects(r[i])}};r.prototype.update=function e(){if(!this.renderer.renderingToScreen){return}this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect();var r=t.width/this.renderer.width;var i=t.height/this.renderer.height;var n=this.div;n.style.left=t.left+"px";n.style.top=t.top+"px";n.style.width=this.renderer.width+"px";n.style.height=this.renderer.height+"px";for(var a=0;a<this.children.length;a++){var o=this.children[a];if(o.renderId!==this.renderId){o._accessibleActive=false;l.utils.removeItems(this.children,a,1);this.div.removeChild(o._accessibleDiv);this.pool.push(o._accessibleDiv);o._accessibleDiv=null;a--;if(this.children.length===0){this.deactivate()}}else{n=o._accessibleDiv;var s=o.hitArea;var u=o.worldTransform;if(o.hitArea){n.style.left=(u.tx+s.x*u.a)*r+"px";n.style.top=(u.ty+s.y*u.d)*i+"px";n.style.width=s.width*u.a*r+"px";n.style.height=s.height*u.d*i+"px"}else{s=o.getBounds();this.capHitArea(s);n.style.left=s.x*r+"px";n.style.top=s.y*i+"px";n.style.width=s.width*r+"px";n.style.height=s.height*i+"px"}}}this.renderId++};r.prototype.capHitArea=function e(t){if(t.x<0){t.width+=t.x;t.x=0}if(t.y<0){t.height+=t.y;t.y=0}if(t.x+t.width>this.renderer.width){t.width=this.renderer.width-t.x}if(t.y+t.height>this.renderer.height){t.height=this.renderer.height-t.y}};r.prototype.addChild=function e(t){var r=this.pool.pop();if(!r){r=document.createElement("button");r.style.width=d+"px";r.style.height=d+"px";r.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent";r.style.position="absolute";r.style.zIndex=y;r.style.borderStyle="none";r.addEventListener("click",this._onClick.bind(this));r.addEventListener("focus",this._onFocus.bind(this));r.addEventListener("focusout",this._onFocusOut.bind(this))}if(t.accessibleTitle){r.title=t.accessibleTitle}else if(!t.accessibleTitle&&!t.accessibleHint){r.title="displayObject "+this.tabIndex}if(t.accessibleHint){r.setAttribute("aria-label",t.accessibleHint)}t._accessibleActive=true;t._accessibleDiv=r;r.displayObject=t;this.children.push(t);this.div.appendChild(t._accessibleDiv);t._accessibleDiv.tabIndex=t.tabIndex};r.prototype._onClick=function e(t){var r=this.renderer.plugins.interaction;r.dispatchEvent(t.target.displayObject,"click",r.eventData)};r.prototype._onFocus=function e(t){var r=this.renderer.plugins.interaction;r.dispatchEvent(t.target.displayObject,"mouseover",r.eventData)};r.prototype._onFocusOut=function e(t){var r=this.renderer.plugins.interaction;r.dispatchEvent(t.target.displayObject,"mouseout",r.eventData)};r.prototype._onKeyDown=function e(t){if(t.keyCode!==c){return}this.activate()};r.prototype._onMouseMove=function e(){this.deactivate()};r.prototype.destroy=function e(){this.div=null;for(var t=0;t<this.children.length;t++){this.children[t].div=null}window.document.removeEventListener("mousemove",this._onMouseMove);window.removeEventListener("keydown",this._onKeyDown);this.pool=null;this.children=null;this.renderer=null};return r}();r.default=x;l.WebGLRenderer.registerPlugin("accessibility",x);l.CanvasRenderer.registerPlugin("accessibility",x)},{"../core":65,"./accessibleTarget":41,ismobilejs:4}],41:[function(e,t,r){"use strict";r.__esModule=true;r.default={accessible:false,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:false,_accessibleDiv:false}},{}],42:[function(e,t,r){"use strict";r.__esModule=true;var i=e("./accessibleTarget");Object.defineProperty(r,"accessibleTarget",{enumerable:true,get:function e(){return a(i).default}});var n=e("./AccessibilityManager");Object.defineProperty(r,"AccessibilityManager",{enumerable:true,get:function e(){return a(n).default}});function a(e){return e&&e.__esModule?e:{default:e}}},{"./AccessibilityManager":40,"./accessibleTarget":41}],43:[function(e,t,r){"use strict";r.__esModule=true;var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var o=e("./autoDetectRenderer");var n=e("./display/Container");var s=f(n);var u=e("./ticker");var a=e("./settings");var l=f(a);var h=e("./const");function f(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var d=function(){function a(e,t,r,i,n){c(this,a);if(typeof e==="number"){e=Object.assign({width:e,height:t||l.default.RENDER_OPTIONS.height,forceCanvas:!!i,sharedTicker:!!n},r)}this._options=e=Object.assign({autoStart:true,sharedTicker:false,forceCanvas:false,sharedLoader:false},e);this.renderer=(0,o.autoDetectRenderer)(e);this.stage=new s.default;this._ticker=null;this.ticker=e.sharedTicker?u.shared:new u.Ticker;if(e.autoStart){this.start()}}a.prototype.render=function e(){this.renderer.render(this.stage)};a.prototype.stop=function e(){this._ticker.stop()};a.prototype.start=function e(){this._ticker.start()};a.prototype.destroy=function e(t){var r=this._ticker;this.ticker=null;r.destroy();this.stage.destroy();this.stage=null;this.renderer.destroy(t);this.renderer=null;this._options=null};i(a,[{key:"ticker",set:function e(t){if(this._ticker){this._ticker.remove(this.render,this)}this._ticker=t;if(t){t.add(this.render,this,h.UPDATE_PRIORITY.LOW)}},get:function e(){return this._ticker}},{key:"view",get:function e(){return this.renderer.view}},{key:"screen",get:function e(){return this.renderer.screen}}]);return a}();r.default=d},{"./autoDetectRenderer":45,"./const":46,"./display/Container":48,"./settings":101,"./ticker":121}],44:[function(e,t,r){"use strict";r.__esModule=true;var i=e("pixi-gl-core");var n=e("./settings");var a=o(n);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function l(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}function h(e,t){if(e instanceof Array){if(e[0].substring(0,9)!=="precision"){var r=e.slice(0);r.unshift("precision "+t+" float;");return r}}else if(e.substring(0,9)!=="precision"){return"precision "+t+" float;\n"+e}return e}var f=function(i){l(n,i);function n(e,t,r){s(this,n);return u(this,i.call(this,e,h(t,a.default.PRECISION_VERTEX),h(r,a.default.PRECISION_FRAGMENT)))}return n}(i.GLShader);r.default=f},{"./settings":101,"pixi-gl-core":15}],45:[function(e,t,r){"use strict";r.__esModule=true;r.autoDetectRenderer=f;var i=e("./utils");var a=h(i);var n=e("./renderers/canvas/CanvasRenderer");var o=l(n);var s=e("./renderers/webgl/WebGLRenderer");var u=l(s);function l(e){return e&&e.__esModule?e:{default:e}}function h(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function f(e,t,r,i){var n=e&&e.forceCanvas;if(i!==undefined){n=i}if(!n&&a.isWebGLSupported()){return new u.default(e,t,r)}return new o.default(e,t,r)}},{"./renderers/canvas/CanvasRenderer":77,"./renderers/webgl/WebGLRenderer":84,"./utils":125}],46:[function(e,t,r){"use strict";r.__esModule=true;var i=r.VERSION="4.6.2";var n=r.PI_2=Math.PI*2;var a=r.RAD_TO_DEG=180/Math.PI;var o=r.DEG_TO_RAD=Math.PI/180;var s=r.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2};var u=r.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19};var l=r.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};var h=r.SCALE_MODES={LINEAR:0,NEAREST:1};var f=r.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2};var c=r.GC_MODES={AUTO:0,MANUAL:1};var d=r.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i;var p=r.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i;var v=r.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;var y=r.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4};var g=r.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"};var m=r.TRANSFORM_MODE={STATIC:0,DYNAMIC:1};var _=r.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1};var b=r.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},{}],47:[function(e,t,r){"use strict";r.__esModule=true;var i=e("../math");function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=function(){function e(){n(this,e);this.minX=Infinity;this.minY=Infinity;this.maxX=-Infinity;this.maxY=-Infinity;this.rect=null}e.prototype.isEmpty=function e(){return this.minX>this.maxX||this.minY>this.maxY};e.prototype.clear=function e(){this.updateID++;this.minX=Infinity;this.minY=Infinity;this.maxX=-Infinity;this.maxY=-Infinity};e.prototype.getRectangle=function e(t){if(this.minX>this.maxX||this.minY>this.maxY){return i.Rectangle.EMPTY}t=t||new i.Rectangle(0,0,1,1);t.x=this.minX;t.y=this.minY;t.width=this.maxX-this.minX;t.height=this.maxY-this.minY;return t};e.prototype.addPoint=function e(t){this.minX=Math.min(this.minX,t.x);this.maxX=Math.max(this.maxX,t.x);this.minY=Math.min(this.minY,t.y);this.maxY=Math.max(this.maxY,t.y)};e.prototype.addQuad=function e(t){var r=this.minX;var i=this.minY;var n=this.maxX;var a=this.maxY;var o=t[0];var s=t[1];r=o<r?o:r;i=s<i?s:i;n=o>n?o:n;a=s>a?s:a;o=t[2];s=t[3];r=o<r?o:r;i=s<i?s:i;n=o>n?o:n;a=s>a?s:a;o=t[4];s=t[5];r=o<r?o:r;i=s<i?s:i;n=o>n?o:n;a=s>a?s:a;o=t[6];s=t[7];r=o<r?o:r;i=s<i?s:i;n=o>n?o:n;a=s>a?s:a;this.minX=r;this.minY=i;this.maxX=n;this.maxY=a};e.prototype.addFrame=function e(t,r,i,n,a){var o=t.worldTransform;var s=o.a;var u=o.b;var l=o.c;var h=o.d;var f=o.tx;var c=o.ty;var d=this.minX;var p=this.minY;var v=this.maxX;var y=this.maxY;var g=s*r+l*i+f;var m=u*r+h*i+c;d=g<d?g:d;p=m<p?m:p;v=g>v?g:v;y=m>y?m:y;g=s*n+l*i+f;m=u*n+h*i+c;d=g<d?g:d;p=m<p?m:p;v=g>v?g:v;y=m>y?m:y;g=s*r+l*a+f;m=u*r+h*a+c;d=g<d?g:d;p=m<p?m:p;v=g>v?g:v;y=m>y?m:y;g=s*n+l*a+f;m=u*n+h*a+c;d=g<d?g:d;p=m<p?m:p;v=g>v?g:v;y=m>y?m:y;this.minX=d;this.minY=p;this.maxX=v;this.maxY=y};e.prototype.addVertices=function e(t,r,i,n){var a=t.worldTransform;var o=a.a;var s=a.b;var u=a.c;var l=a.d;var h=a.tx;var f=a.ty;var c=this.minX;var d=this.minY;var p=this.maxX;var v=this.maxY;for(var y=i;y<n;y+=2){var g=r[y];var m=r[y+1];var _=o*g+u*m+h;var b=l*m+s*g+f;c=_<c?_:c;d=b<d?b:d;p=_>p?_:p;v=b>v?b:v}this.minX=c;this.minY=d;this.maxX=p;this.maxY=v};e.prototype.addBounds=function e(t){var r=this.minX;var i=this.minY;var n=this.maxX;var a=this.maxY;this.minX=t.minX<r?t.minX:r;this.minY=t.minY<i?t.minY:i;this.maxX=t.maxX>n?t.maxX:n;this.maxY=t.maxY>a?t.maxY:a};e.prototype.addBoundsMask=function e(t,r){var i=t.minX>r.minX?t.minX:r.minX;var n=t.minY>r.minY?t.minY:r.minY;var a=t.maxX<r.maxX?t.maxX:r.maxX;var o=t.maxY<r.maxY?t.maxY:r.maxY;if(i<=a&&n<=o){var s=this.minX;var u=this.minY;var l=this.maxX;var h=this.maxY;this.minX=i<s?i:s;this.minY=n<u?n:u;this.maxX=a>l?a:l;this.maxY=o>h?o:h}};e.prototype.addBoundsArea=function e(t,r){var i=t.minX>r.x?t.minX:r.x;var n=t.minY>r.y?t.minY:r.y;var a=t.maxX<r.x+r.width?t.maxX:r.x+r.width;var o=t.maxY<r.y+r.height?t.maxY:r.y+r.height;if(i<=a&&n<=o){var s=this.minX;var u=this.minY;var l=this.maxX;var h=this.maxY;this.minX=i<s?i:s;this.minY=n<u?n:u;this.maxX=a>l?a:l;this.maxY=o>h?o:h}};return e}();r.default=a},{"../math":70}],48:[function(e,t,r){"use strict";r.__esModule=true;var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var o=e("../utils");var n=e("./DisplayObject");var a=s(n);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var f=function(a){h(t,a);function t(){u(this,t);var e=l(this,a.call(this));e.children=[];return e}t.prototype.onChildrenChange=function e(){};t.prototype.addChild=function e(t){var r=arguments.length;if(r>1){for(var i=0;i<r;i++){this.addChild(arguments[i])}}else{if(t.parent){t.parent.removeChild(t)}t.parent=this;t.transform._parentID=-1;this.children.push(t);this._boundsID++;this.onChildrenChange(this.children.length-1);t.emit("added",this)}return t};t.prototype.addChildAt=function e(t,r){if(r<0||r>this.children.length){throw new Error(t+"addChildAt: The index "+r+" supplied is out of bounds "+this.children.length)}if(t.parent){t.parent.removeChild(t)}t.parent=this;t.transform._parentID=-1;this.children.splice(r,0,t);this._boundsID++;this.onChildrenChange(r);t.emit("added",this);return t};t.prototype.swapChildren=function e(t,r){if(t===r){return}var i=this.getChildIndex(t);var n=this.getChildIndex(r);this.children[i]=r;this.children[n]=t;this.onChildrenChange(i<n?i:n)};t.prototype.getChildIndex=function e(t){var r=this.children.indexOf(t);if(r===-1){throw new Error("The supplied DisplayObject must be a child of the caller")}return r};t.prototype.setChildIndex=function e(t,r){if(r<0||r>=this.children.length){throw new Error("The supplied index is out of bounds")}var i=this.getChildIndex(t);(0,o.removeItems)(this.children,i,1);this.children.splice(r,0,t);this.onChildrenChange(r)};t.prototype.getChildAt=function e(t){if(t<0||t>=this.children.length){throw new Error("getChildAt: Index ("+t+") does not exist.")}return this.children[t]};t.prototype.removeChild=function e(t){var r=arguments.length;if(r>1){for(var i=0;i<r;i++){this.removeChild(arguments[i])}}else{var n=this.children.indexOf(t);if(n===-1)return null;t.parent=null;t.transform._parentID=-1;(0,o.removeItems)(this.children,n,1);this._boundsID++;this.onChildrenChange(n);t.emit("removed",this)}return t};t.prototype.removeChildAt=function e(t){var r=this.getChildAt(t);r.parent=null;r.transform._parentID=-1;(0,o.removeItems)(this.children,t,1);this._boundsID++;this.onChildrenChange(t);r.emit("removed",this);return r};t.prototype.removeChildren=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var r=arguments[1];var i=t;var n=typeof r==="number"?r:this.children.length;var a=n-i;var o=void 0;if(a>0&&a<=n){o=this.children.splice(i,a);for(var s=0;s<o.length;++s){o[s].parent=null;if(o[s].transform){o[s].transform._parentID=-1}}this._boundsID++;this.onChildrenChange(t);for(var u=0;u<o.length;++u){o[u].emit("removed",this)}return o}else if(a===0&&this.children.length===0){return[]}throw new RangeError("removeChildren: numeric values are outside the acceptable range.")};t.prototype.updateTransform=function e(){this._boundsID++;this.transform.updateTransform(this.parent.transform);this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,r=this.children.length;t<r;++t){var i=this.children[t];if(i.visible){i.updateTransform()}}};t.prototype.calculateBounds=function e(){this._bounds.clear();this._calculateBounds();for(var t=0;t<this.children.length;t++){var r=this.children[t];if(!r.visible||!r.renderable){continue}r.calculateBounds();if(r._mask){r._mask.calculateBounds();this._bounds.addBoundsMask(r._bounds,r._mask._bounds)}else if(r.filterArea){this._bounds.addBoundsArea(r._bounds,r.filterArea)}else{this._bounds.addBounds(r._bounds)}}this._lastBoundsID=this._boundsID};t.prototype._calculateBounds=function e(){};t.prototype.renderWebGL=function e(t){if(!this.visible||this.worldAlpha<=0||!this.renderable){return}if(this._mask||this._filters){this.renderAdvancedWebGL(t)}else{this._renderWebGL(t);for(var r=0,i=this.children.length;r<i;++r){this.children[r].renderWebGL(t)}}};t.prototype.renderAdvancedWebGL=function e(t){t.flush();var r=this._filters;var i=this._mask;if(r){if(!this._enabledFilters){this._enabledFilters=[]}this._enabledFilters.length=0;for(var n=0;n<r.length;n++){if(r[n].enabled){this._enabledFilters.push(r[n])}}if(this._enabledFilters.length){t.filterManager.pushFilter(this,this._enabledFilters)}}if(i){t.maskManager.pushMask(this,this._mask)}this._renderWebGL(t);for(var a=0,o=this.children.length;a<o;a++){this.children[a].renderWebGL(t)}t.flush();if(i){t.maskManager.popMask(this,this._mask)}if(r&&this._enabledFilters&&this._enabledFilters.length){t.filterManager.popFilter()}};t.prototype._renderWebGL=function e(t){};t.prototype._renderCanvas=function e(t){};t.prototype.renderCanvas=function e(t){if(!this.visible||this.worldAlpha<=0||!this.renderable){return}if(this._mask){t.maskManager.pushMask(this._mask)}this._renderCanvas(t);for(var r=0,i=this.children.length;r<i;++r){this.children[r].renderCanvas(t)}if(this._mask){t.maskManager.popMask(t)}};t.prototype.destroy=function e(t){a.prototype.destroy.call(this);var r=typeof t==="boolean"?t:t&&t.children;var i=this.removeChildren(0,this.children.length);if(r){for(var n=0;n<i.length;++n){i[n].destroy(t)}}};i(t,[{key:"width",get:function e(){return this.scale.x*this.getLocalBounds().width},set:function e(t){var r=this.getLocalBounds().width;if(r!==0){this.scale.x=t/r}else{this.scale.x=1}this._width=t}},{key:"height",get:function e(){return this.scale.y*this.getLocalBounds().height},set:function e(t){var r=this.getLocalBounds().height;if(r!==0){this.scale.y=t/r}else{this.scale.y=1}this._height=t}}]);return t}(a.default);r.default=f;f.prototype.containerUpdateTransform=f.prototype.updateTransform},{"../utils":125,"./DisplayObject":49}],49:[function(e,t,r){"use strict";r.__esModule=true;var n=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var i=e("eventemitter3");var a=y(i);var o=e("../const");var s=e("../settings");var u=y(s);var l=e("./TransformStatic");var h=y(l);var f=e("./Transform");var c=y(f);var d=e("./Bounds");var p=y(d);var v=e("../math");function y(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function m(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function _(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var b=function(r){_(i,r);function i(){g(this,i);var e=m(this,r.call(this));var t=u.default.TRANSFORM_MODE===o.TRANSFORM_MODE.STATIC?h.default:c.default;e.tempDisplayObjectParent=null;e.transform=new t;e.alpha=1;e.visible=true;e.renderable=true;e.parent=null;e.worldAlpha=1;e.filterArea=null;e._filters=null;e._enabledFilters=null;e._bounds=new p.default;e._boundsID=0;e._lastBoundsID=-1;e._boundsRect=null;e._localBoundsRect=null;e._mask=null;e._destroyed=false;return e}i.prototype.updateTransform=function e(){this.transform.updateTransform(this.parent.transform);this.worldAlpha=this.alpha*this.parent.worldAlpha;this._bounds.updateID++};i.prototype._recursivePostUpdateTransform=function e(){if(this.parent){this.parent._recursivePostUpdateTransform();this.transform.updateTransform(this.parent.transform)}else{this.transform.updateTransform(this._tempDisplayObjectParent.transform)}};i.prototype.getBounds=function e(t,r){if(!t){if(!this.parent){this.parent=this._tempDisplayObjectParent;this.updateTransform();this.parent=null}else{this._recursivePostUpdateTransform();this.updateTransform()}}if(this._boundsID!==this._lastBoundsID){this.calculateBounds()}if(!r){if(!this._boundsRect){this._boundsRect=new v.Rectangle}r=this._boundsRect}return this._bounds.getRectangle(r)};i.prototype.getLocalBounds=function e(t){var r=this.transform;var i=this.parent;this.parent=null;this.transform=this._tempDisplayObjectParent.transform;if(!t){if(!this._localBoundsRect){this._localBoundsRect=new v.Rectangle}t=this._localBoundsRect}var n=this.getBounds(false,t);this.parent=i;this.transform=r;return n};i.prototype.toGlobal=function e(t,r){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(!i){this._recursivePostUpdateTransform();if(!this.parent){this.parent=this._tempDisplayObjectParent;this.displayObjectUpdateTransform();this.parent=null}else{this.displayObjectUpdateTransform()}}return this.worldTransform.apply(t,r)};i.prototype.toLocal=function e(t,r,i,n){if(r){t=r.toGlobal(t,i,n)}if(!n){this._recursivePostUpdateTransform();if(!this.parent){this.parent=this._tempDisplayObjectParent;this.displayObjectUpdateTransform();this.parent=null}else{this.displayObjectUpdateTransform()}}return this.worldTransform.applyInverse(t,i)};i.prototype.renderWebGL=function e(t){};i.prototype.renderCanvas=function e(t){};i.prototype.setParent=function e(t){if(!t||!t.addChild){throw new Error("setParent: Argument must be a Container")}t.addChild(this);return t};i.prototype.setTransform=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;var a=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;var s=arguments.length>6&&arguments[6]!==undefined?arguments[6]:0;var u=arguments.length>7&&arguments[7]!==undefined?arguments[7]:0;var l=arguments.length>8&&arguments[8]!==undefined?arguments[8]:0;this.position.x=t;this.position.y=r;this.scale.x=!i?1:i;this.scale.y=!n?1:n;this.rotation=a;this.skew.x=o;this.skew.y=s;this.pivot.x=u;this.pivot.y=l;return this};i.prototype.destroy=function e(){this.removeAllListeners();if(this.parent){this.parent.removeChild(this)}this.transform=null;this.parent=null;this._bounds=null;this._currentBounds=null;this._mask=null;this.filterArea=null;this.interactive=false;this.interactiveChildren=false;this._destroyed=true};n(i,[{key:"_tempDisplayObjectParent",get:function e(){if(this.tempDisplayObjectParent===null){this.tempDisplayObjectParent=new i}return this.tempDisplayObjectParent}},{key:"x",get:function e(){return this.position.x},set:function e(t){this.transform.position.x=t}},{key:"y",get:function e(){return this.position.y},set:function e(t){this.transform.position.y=t}},{key:"worldTransform",get:function e(){return this.transform.worldTransform}},{key:"localTransform",get:function e(){return this.transform.localTransform}},{key:"position",get:function e(){return this.transform.position},set:function e(t){this.transform.position.copy(t)}},{key:"scale",get:function e(){return this.transform.scale},set:function e(t){this.transform.scale.copy(t)}},{key:"pivot",get:function e(){return this.transform.pivot},set:function e(t){this.transform.pivot.copy(t)}},{key:"skew",get:function e(){return this.transform.skew},set:function e(t){this.transform.skew.copy(t)}},{key:"rotation",get:function e(){return this.transform.rotation},set:function e(t){this.transform.rotation=t}},{key:"worldVisible",get:function e(){var t=this;do{if(!t.visible){return false}t=t.parent}while(t);return true}},{key:"mask",get:function e(){return this._mask},set:function e(t){if(this._mask){this._mask.renderable=true}this._mask=t;if(this._mask){this._mask.renderable=false}}},{key:"filters",get:function e(){return this._filters&&this._filters.slice()},set:function e(t){this._filters=t&&t.slice()}}]);return i}(a.default);r.default=b;b.prototype.displayObjectUpdateTransform=b.prototype.updateTransform},{"../const":46,"../math":70,"../settings":101,"./Bounds":47,"./Transform":50,"./TransformStatic":52,eventemitter3:3}],50:[function(e,t,r){"use strict";r.__esModule=true;var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var n=e("../math");var a=e("./TransformBase");var o=s(a);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var f=function(t){h(r,t);function r(){u(this,r);var e=l(this,t.call(this));e.position=new n.Point(0,0);e.scale=new n.Point(1,1);e.skew=new n.ObservablePoint(e.updateSkew,e,0,0);e.pivot=new n.Point(0,0);e._rotation=0;e._cx=1;e._sx=0;e._cy=0;e._sy=1;return e}r.prototype.updateSkew=function e(){this._cx=Math.cos(this._rotation+this.skew._y);this._sx=Math.sin(this._rotation+this.skew._y);this._cy=-Math.sin(this._rotation-this.skew._x);this._sy=Math.cos(this._rotation-this.skew._x)};r.prototype.updateLocalTransform=function e(){var t=this.localTransform;t.a=this._cx*this.scale.x;t.b=this._sx*this.scale.x;t.c=this._cy*this.scale.y;t.d=this._sy*this.scale.y;t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c);t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d)};r.prototype.updateTransform=function e(t){var r=this.localTransform;r.a=this._cx*this.scale.x;r.b=this._sx*this.scale.x;r.c=this._cy*this.scale.y;r.d=this._sy*this.scale.y;r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c);r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d);var i=t.worldTransform;var n=this.worldTransform;n.a=r.a*i.a+r.b*i.c;n.b=r.a*i.b+r.b*i.d;n.c=r.c*i.a+r.d*i.c;n.d=r.c*i.b+r.d*i.d;n.tx=r.tx*i.a+r.ty*i.c+i.tx;n.ty=r.tx*i.b+r.ty*i.d+i.ty;this._worldID++};r.prototype.setFromMatrix=function e(t){t.decompose(this)};i(r,[{key:"rotation",get:function e(){return this._rotation},set:function e(t){this._rotation=t;this.updateSkew()}}]);return r}(o.default);r.default=f},{"../math":70,"./TransformBase":51}],51:[function(e,t,r){"use strict";r.__esModule=true;var i=e("../math");function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=function(){function e(){n(this,e);this.worldTransform=new i.Matrix;this.localTransform=new i.Matrix;this._worldID=0;this._parentID=0}e.prototype.updateLocalTransform=function e(){};e.prototype.updateTransform=function e(t){var r=t.worldTransform;var i=this.worldTransform;var n=this.localTransform;i.a=n.a*r.a+n.b*r.c;i.b=n.a*r.b+n.b*r.d;i.c=n.c*r.a+n.d*r.c;i.d=n.c*r.b+n.d*r.d;i.tx=n.tx*r.a+n.ty*r.c+r.tx;i.ty=n.tx*r.b+n.ty*r.d+r.ty;this._worldID++};return e}();r.default=a;a.prototype.updateWorldTransform=a.prototype.updateTransform;a.IDENTITY=new a},{"../math":70}],52:[function(e,t,r){"use strict";r.__esModule=true;var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var n=e("../math");var a=e("./TransformBase");var o=s(a);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var f=function(t){h(r,t);function r(){u(this,r);var e=l(this,t.call(this));e.position=new n.ObservablePoint(e.onChange,e,0,0);e.scale=new n.ObservablePoint(e.onChange,e,1,1);e.pivot=new n.ObservablePoint(e.onChange,e,0,0);e.skew=new n.ObservablePoint(e.updateSkew,e,0,0);e._rotation=0;e._cx=1;e._sx=0;e._cy=0;e._sy=1;e._localID=0;e._currentLocalID=0;return e}r.prototype.onChange=function e(){this._localID++};r.prototype.updateSkew=function e(){this._cx=Math.cos(this._rotation+this.skew._y);this._sx=Math.sin(this._rotation+this.skew._y);this._cy=-Math.sin(this._rotation-this.skew._x);this._sy=Math.cos(this._rotation-this.skew._x);this._localID++};r.prototype.updateLocalTransform=function e(){var t=this.localTransform;if(this._localID!==this._currentLocalID){t.a=this._cx*this.scale._x;t.b=this._sx*this.scale._x;t.c=this._cy*this.scale._y;t.d=this._sy*this.scale._y;t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c);t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d);this._currentLocalID=this._localID;this._parentID=-1}};r.prototype.updateTransform=function e(t){var r=this.localTransform;if(this._localID!==this._currentLocalID){r.a=this._cx*this.scale._x;r.b=this._sx*this.scale._x;r.c=this._cy*this.scale._y;r.d=this._sy*this.scale._y;r.tx=this.position._x-(this.pivot._x*r.a+this.pivot._y*r.c);r.ty=this.position._y-(this.pivot._x*r.b+this.pivot._y*r.d);this._currentLocalID=this._localID;this._parentID=-1}if(this._parentID!==t._worldID){var i=t.worldTransform;var n=this.worldTransform;n.a=r.a*i.a+r.b*i.c;n.b=r.a*i.b+r.b*i.d;n.c=r.c*i.a+r.d*i.c;n.d=r.c*i.b+r.d*i.d;n.tx=r.tx*i.a+r.ty*i.c+i.tx;n.ty=r.tx*i.b+r.ty*i.d+i.ty;this._parentID=t._worldID;this._worldID++}};r.prototype.setFromMatrix=function e(t){t.decompose(this);this._localID++};i(r,[{key:"rotation",get:function e(){return this._rotation},set:function e(t){this._rotation=t;this.updateSkew()}}]);return r}(o.default);r.default=f},{"../math":70,"./TransformBase":51}],53:[function(e,t,r){"use strict";r.__esModule=true;var i=e("../display/Container");var n=x(i);var a=e("../textures/RenderTexture");var o=x(a);var s=e("../textures/Texture");var u=x(s);var l=e("./GraphicsData");var h=x(l);var f=e("../sprites/Sprite");var c=x(f);var d=e("../math");var p=e("../utils");var S=e("../const");var v=e("../display/Bounds");var y=x(v);var g=e("./utils/bezierCurveTo");var m=x(g);var _=e("../renderers/canvas/CanvasRenderer");var b=x(_);function x(e){return e&&e.__esModule?e:{default:e}}function T(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function w(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function E(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var O=void 0;var M=new d.Matrix;var P=new d.Point;var C=new Float32Array(4);var R=new Float32Array(4);var A=function(a){E(r,a);function r(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;T(this,r);var t=w(this,a.call(this));t.fillAlpha=1;t.lineWidth=0;t.nativeLines=e;t.lineColor=0;t.graphicsData=[];t.tint=16777215;t._prevTint=16777215;t.blendMode=S.BLEND_MODES.NORMAL;t.currentPath=null;t._webGL={};t.isMask=false;t.boundsPadding=0;t._localBounds=new y.default;t.dirty=0;t.fastRectDirty=-1;t.clearDirty=0;t.boundsDirty=-1;t.cachedSpriteDirty=false;t._spriteRect=null;t._fastRect=false;return t}r.prototype.clone=function e(){var e=new r;e.renderable=this.renderable;e.fillAlpha=this.fillAlpha;e.lineWidth=this.lineWidth;e.lineColor=this.lineColor;e.tint=this.tint;e.blendMode=this.blendMode;e.isMask=this.isMask;e.boundsPadding=this.boundsPadding;e.dirty=0;e.cachedSpriteDirty=this.cachedSpriteDirty;for(var t=0;t<this.graphicsData.length;++t){e.graphicsData.push(this.graphicsData[t].clone())}e.currentPath=e.graphicsData[e.graphicsData.length-1];e.updateLocalBounds();return e};r.prototype.lineStyle=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;this.lineWidth=t;this.lineColor=r;this.lineAlpha=i;if(this.currentPath){if(this.currentPath.shape.points.length){var n=new d.Polygon(this.currentPath.shape.points.slice(-2));n.closed=false;this.drawShape(n)}else{this.currentPath.lineWidth=this.lineWidth;this.currentPath.lineColor=this.lineColor;this.currentPath.lineAlpha=this.lineAlpha}}return this};r.prototype.moveTo=function e(t,r){var i=new d.Polygon([t,r]);i.closed=false;this.drawShape(i);return this};r.prototype.lineTo=function e(t,r){this.currentPath.shape.points.push(t,r);this.dirty++;return this};r.prototype.quadraticCurveTo=function e(t,r,i,n){if(this.currentPath){if(this.currentPath.shape.points.length===0){this.currentPath.shape.points=[0,0]}}else{this.moveTo(0,0)}var a=20;var o=this.currentPath.shape.points;var s=0;var u=0;if(o.length===0){this.moveTo(0,0)}var l=o[o.length-2];var h=o[o.length-1];for(var f=1;f<=a;++f){var c=f/a;s=l+(t-l)*c;u=h+(r-h)*c;o.push(s+(t+(i-t)*c-s)*c,u+(r+(n-r)*c-u)*c)}this.dirty++;return this};r.prototype.bezierCurveTo=function e(t,r,i,n,a,o){if(this.currentPath){if(this.currentPath.shape.points.length===0){this.currentPath.shape.points=[0,0]}}else{this.moveTo(0,0)}var s=this.currentPath.shape.points;var u=s[s.length-2];var l=s[s.length-1];s.length-=2;(0,m.default)(u,l,t,r,i,n,a,o,s);this.dirty++;return this};r.prototype.arcTo=function e(t,r,i,n,a){if(this.currentPath){if(this.currentPath.shape.points.length===0){this.currentPath.shape.points.push(t,r)}}else{this.moveTo(t,r)}var o=this.currentPath.shape.points;var s=o[o.length-2];var u=o[o.length-1];var l=u-r;var h=s-t;var f=n-r;var c=i-t;var d=Math.abs(l*c-h*f);if(d<1e-8||a===0){if(o[o.length-2]!==t||o[o.length-1]!==r){o.push(t,r)}}else{var p=l*l+h*h;var v=f*f+c*c;var y=l*f+h*c;var g=a*Math.sqrt(p)/d;var m=a*Math.sqrt(v)/d;var _=g*y/p;var b=m*y/v;var x=g*c+m*h;var T=g*f+m*l;var w=h*(m+_);var E=l*(m+_);var S=c*(g+b);var O=f*(g+b);var M=Math.atan2(E-T,w-x);var P=Math.atan2(O-T,S-x);this.arc(x+t,T+r,a,M,P,h*f>c*l)}this.dirty++;return this};r.prototype.arc=function e(t,r,i,n,a){var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;if(n===a){return this}if(!o&&a<=n){a+=Math.PI*2}else if(o&&n<=a){n+=Math.PI*2}var s=a-n;var u=Math.ceil(Math.abs(s)/(Math.PI*2))*40;if(s===0){return this}var l=t+Math.cos(n)*i;var h=r+Math.sin(n)*i;var f=this.currentPath?this.currentPath.shape.points:null;if(f){if(f[f.length-2]!==l||f[f.length-1]!==h){f.push(l,h)}}else{this.moveTo(l,h);f=this.currentPath.shape.points}var c=s/(u*2);var d=c*2;var p=Math.cos(c);var v=Math.sin(c);var y=u-1;var g=y%1/y;for(var m=0;m<=y;++m){var _=m+g*m;var b=c+n+d*_;var x=Math.cos(b);var T=-Math.sin(b);f.push((p*x+v*T)*i+t,(p*-T+v*x)*i+r)}this.dirty++;return this};r.prototype.beginFill=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;this.filling=true;this.fillColor=t;this.fillAlpha=r;if(this.currentPath){if(this.currentPath.shape.points.length<=2){this.currentPath.fill=this.filling;this.currentPath.fillColor=this.fillColor;this.currentPath.fillAlpha=this.fillAlpha}}return this};r.prototype.endFill=function e(){this.filling=false;this.fillColor=null;this.fillAlpha=1;return this};r.prototype.drawRect=function e(t,r,i,n){this.drawShape(new d.Rectangle(t,r,i,n));return this};r.prototype.drawRoundedRect=function e(t,r,i,n,a){this.drawShape(new d.RoundedRectangle(t,r,i,n,a));return this};r.prototype.drawCircle=function e(t,r,i){this.drawShape(new d.Circle(t,r,i));return this};r.prototype.drawEllipse=function e(t,r,i,n){this.drawShape(new d.Ellipse(t,r,i,n));return this};r.prototype.drawPolygon=function e(t){var r=t;var i=true;if(r instanceof d.Polygon){i=r.closed;r=r.points}if(!Array.isArray(r)){r=new Array(arguments.length);for(var n=0;n<r.length;++n){r[n]=arguments[n]}}var a=new d.Polygon(r);a.closed=i;this.drawShape(a);return this};r.prototype.clear=function e(){if(this.lineWidth||this.filling||this.graphicsData.length>0){this.lineWidth=0;this.filling=false;this.boundsDirty=-1;this.dirty++;this.clearDirty++;this.graphicsData.length=0}this.currentPath=null;this._spriteRect=null;return this};r.prototype.isFastRect=function e(){return this.graphicsData.length===1&&this.graphicsData[0].shape.type===S.SHAPES.RECT&&!this.graphicsData[0].lineWidth};r.prototype._renderWebGL=function e(t){if(this.dirty!==this.fastRectDirty){this.fastRectDirty=this.dirty;this._fastRect=this.isFastRect()}if(this._fastRect){this._renderSpriteRect(t)}else{t.setObjectRenderer(t.plugins.graphics);t.plugins.graphics.render(this)}};r.prototype._renderSpriteRect=function e(t){var r=this.graphicsData[0].shape;if(!this._spriteRect){this._spriteRect=new c.default(new u.default(u.default.WHITE))}var i=this._spriteRect;if(this.tint===16777215){i.tint=this.graphicsData[0].fillColor}else{var n=C;var a=R;(0,p.hex2rgb)(this.graphicsData[0].fillColor,n);(0,p.hex2rgb)(this.tint,a);n[0]*=a[0];n[1]*=a[1];n[2]*=a[2];i.tint=(0,p.rgb2hex)(n)}i.alpha=this.graphicsData[0].fillAlpha;i.worldAlpha=this.worldAlpha*i.alpha;i.blendMode=this.blendMode;i._texture._frame.width=r.width;i._texture._frame.height=r.height;i.transform.worldTransform=this.transform.worldTransform;i.anchor.set(-r.x/r.width,-r.y/r.height);i._onAnchorUpdate();i._renderWebGL(t)};r.prototype._renderCanvas=function e(t){if(this.isMask===true){return}t.plugins.graphics.render(this)};r.prototype._calculateBounds=function e(){if(this.boundsDirty!==this.dirty){this.boundsDirty=this.dirty;this.updateLocalBounds();this.cachedSpriteDirty=true}var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)};r.prototype.containsPoint=function e(t){this.worldTransform.applyInverse(t,P);var r=this.graphicsData;for(var i=0;i<r.length;++i){var n=r[i];if(!n.fill){continue}if(n.shape){if(n.shape.contains(P.x,P.y)){if(n.holes){for(var a=0;a<n.holes.length;a++){var o=n.holes[a];if(o.contains(P.x,P.y)){return false}}}return true}}}return false};r.prototype.updateLocalBounds=function e(){var t=Infinity;var r=-Infinity;var i=Infinity;var n=-Infinity;if(this.graphicsData.length){var a=0;var o=0;var s=0;var u=0;var l=0;for(var h=0;h<this.graphicsData.length;h++){var f=this.graphicsData[h];var c=f.type;var d=f.lineWidth;a=f.shape;if(c===S.SHAPES.RECT||c===S.SHAPES.RREC){o=a.x-d/2;s=a.y-d/2;u=a.width+d;l=a.height+d;t=o<t?o:t;r=o+u>r?o+u:r;i=s<i?s:i;n=s+l>n?s+l:n}else if(c===S.SHAPES.CIRC){o=a.x;s=a.y;u=a.radius+d/2;l=a.radius+d/2;t=o-u<t?o-u:t;r=o+u>r?o+u:r;i=s-l<i?s-l:i;n=s+l>n?s+l:n}else if(c===S.SHAPES.ELIP){o=a.x;s=a.y;u=a.width+d/2;l=a.height+d/2;t=o-u<t?o-u:t;r=o+u>r?o+u:r;i=s-l<i?s-l:i;n=s+l>n?s+l:n}else{var p=a.points;var v=0;var y=0;var g=0;var m=0;var _=0;var b=0;var x=0;var T=0;for(var w=0;w+2<p.length;w+=2){o=p[w];s=p[w+1];v=p[w+2];y=p[w+3];g=Math.abs(v-o);m=Math.abs(y-s);l=d;u=Math.sqrt(g*g+m*m);if(u<1e-9){continue}_=(l/u*m+g)/2;b=(l/u*g+m)/2;x=(v+o)/2;T=(y+s)/2;t=x-_<t?x-_:t;r=x+_>r?x+_:r;i=T-b<i?T-b:i;n=T+b>n?T+b:n}}}}else{t=0;r=0;i=0;n=0}var E=this.boundsPadding;this._localBounds.minX=t-E;this._localBounds.maxX=r+E;this._localBounds.minY=i-E;this._localBounds.maxY=n+E};r.prototype.drawShape=function e(t){if(this.currentPath){if(this.currentPath.shape.points.length<=2){this.graphicsData.pop()}}this.currentPath=null;var r=new h.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,t);this.graphicsData.push(r);if(r.type===S.SHAPES.POLY){r.shape.closed=r.shape.closed||this.filling;this.currentPath=r}this.dirty++;return r};r.prototype.generateCanvasTexture=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var i=this.getLocalBounds();var n=o.default.create(i.width,i.height,t,r);if(!O){O=new b.default}this.transform.updateLocalTransform();this.transform.localTransform.copy(M);M.invert();M.tx-=i.x;M.ty-=i.y;O.render(this,n,true,M);var a=u.default.fromCanvas(n.baseTexture._canvasRenderTarget.canvas,t,"graphics");a.baseTexture.resolution=r;a.baseTexture.update();return a};r.prototype.closePath=function e(){var t=this.currentPath;if(t&&t.shape){t.shape.close()}return this};r.prototype.addHole=function e(){var t=this.graphicsData.pop();this.currentPath=this.graphicsData[this.graphicsData.length-1];this.currentPath.addHole(t.shape);this.currentPath=null;return this};r.prototype.destroy=function e(t){a.prototype.destroy.call(this,t);for(var r=0;r<this.graphicsData.length;++r){this.graphicsData[r].destroy()}for(var i in this._webgl){for(var n=0;n<this._webgl[i].data.length;++n){this._webgl[i].data[n].destroy()}}if(this._spriteRect){this._spriteRect.destroy()}this.graphicsData=null;this.currentPath=null;this._webgl=null;this._localBounds=null};return r}(n.default);r.default=A;A._SPRITE_TEXTURE=null},{"../const":46,"../display/Bounds":47,"../display/Container":48,"../math":70,"../renderers/canvas/CanvasRenderer":77,"../sprites/Sprite":102,"../textures/RenderTexture":113,"../textures/Texture":115,"../utils":125,"./GraphicsData":54,"./utils/bezierCurveTo":56}],54:[function(e,t,r){"use strict";r.__esModule=true;function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function(){function u(e,t,r,i,n,a,o,s){l(this,u);this.lineWidth=e;this.nativeLines=o;this.lineColor=t;this.lineAlpha=r;this._lineTint=t;this.fillColor=i;this.fillAlpha=n;this._fillTint=i;this.fill=a;this.holes=[];this.shape=s;this.type=s.type}u.prototype.clone=function e(){return new u(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)};u.prototype.addHole=function e(t){this.holes.push(t)};u.prototype.destroy=function e(){this.shape=null;this.holes=null};return u}();r.default=i},{}],55:[function(e,t,r){"use strict";r.__esModule=true;var i=e("../../renderers/canvas/CanvasRenderer");var n=a(i);var R=e("../../const");function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var s=function(){function t(e){o(this,t);this.renderer=e}t.prototype.render=function e(t){var r=this.renderer;var i=r.context;var n=t.worldAlpha;var a=t.transform.worldTransform;var o=r.resolution;if(this._prevTint!==this.tint){this.dirty=true}i.setTransform(a.a*o,a.b*o,a.c*o,a.d*o,a.tx*o,a.ty*o);if(t.dirty){this.updateGraphicsTint(t);t.dirty=false}r.setBlendMode(t.blendMode);for(var s=0;s<t.graphicsData.length;s++){var u=t.graphicsData[s];var l=u.shape;var h=u._fillTint;var f=u._lineTint;i.lineWidth=u.lineWidth;if(u.type===R.SHAPES.POLY){i.beginPath();this.renderPolygon(l.points,l.closed,i);for(var c=0;c<u.holes.length;c++){this.renderPolygon(u.holes[c].points,true,i)}if(u.fill){i.globalAlpha=u.fillAlpha*n;i.fillStyle="#"+("00000"+(h|0).toString(16)).substr(-6);i.fill()}if(u.lineWidth){i.globalAlpha=u.lineAlpha*n;i.strokeStyle="#"+("00000"+(f|0).toString(16)).substr(-6);i.stroke()}}else if(u.type===R.SHAPES.RECT){if(u.fillColor||u.fillColor===0){i.globalAlpha=u.fillAlpha*n;i.fillStyle="#"+("00000"+(h|0).toString(16)).substr(-6);i.fillRect(l.x,l.y,l.width,l.height)}if(u.lineWidth){i.globalAlpha=u.lineAlpha*n;i.strokeStyle="#"+("00000"+(f|0).toString(16)).substr(-6);i.strokeRect(l.x,l.y,l.width,l.height)}}else if(u.type===R.SHAPES.CIRC){i.beginPath();i.arc(l.x,l.y,l.radius,0,2*Math.PI);i.closePath();if(u.fill){i.globalAlpha=u.fillAlpha*n;i.fillStyle="#"+("00000"+(h|0).toString(16)).substr(-6);i.fill()}if(u.lineWidth){i.globalAlpha=u.lineAlpha*n;i.strokeStyle="#"+("00000"+(f|0).toString(16)).substr(-6);i.stroke()}}else if(u.type===R.SHAPES.ELIP){var d=l.width*2;var p=l.height*2;var v=l.x-d/2;var y=l.y-p/2;i.beginPath();var g=.5522848;var m=d/2*g;var _=p/2*g;var b=v+d;var x=y+p;var T=v+d/2;var w=y+p/2;i.moveTo(v,w);i.bezierCurveTo(v,w-_,T-m,y,T,y);i.bezierCurveTo(T+m,y,b,w-_,b,w);i.bezierCurveTo(b,w+_,T+m,x,T,x);i.bezierCurveTo(T-m,x,v,w+_,v,w);i.closePath();if(u.fill){i.globalAlpha=u.fillAlpha*n;i.fillStyle="#"+("00000"+(h|0).toString(16)).substr(-6);i.fill()}if(u.lineWidth){i.globalAlpha=u.lineAlpha*n;i.strokeStyle="#"+("00000"+(f|0).toString(16)).substr(-6);i.stroke()}}else if(u.type===R.SHAPES.RREC){var E=l.x;var S=l.y;var O=l.width;var M=l.height;var P=l.radius;var C=Math.min(O,M)/2|0;P=P>C?C:P;i.beginPath();i.moveTo(E,S+P);i.lineTo(E,S+M-P);i.quadraticCurveTo(E,S+M,E+P,S+M);i.lineTo(E+O-P,S+M);i.quadraticCurveTo(E+O,S+M,E+O,S+M-P);i.lineTo(E+O,S+P);i.quadraticCurveTo(E+O,S,E+O-P,S);i.lineTo(E+P,S);i.quadraticCurveTo(E,S,E,S+P);i.closePath();if(u.fillColor||u.fillColor===0){i.globalAlpha=u.fillAlpha*n;i.fillStyle="#"+("00000"+(h|0).toString(16)).substr(-6);i.fill()}if(u.lineWidth){i.globalAlpha=u.lineAlpha*n;i.strokeStyle="#"+("00000"+(f|0).toString(16)).substr(-6);i.stroke()}}}};t.prototype.updateGraphicsTint=function e(t){t._prevTint=t.tint;var r=(t.tint>>16&255)/255;var i=(t.tint>>8&255)/255;var n=(t.tint&255)/255;for(var a=0;a<t.graphicsData.length;++a){var o=t.graphicsData[a];var s=o.fillColor|0;var u=o.lineColor|0;o._fillTint=((s>>16&255)/255*r*255<<16)+((s>>8&255)/255*i*255<<8)+(s&255)/255*n*255;o._lineTint=((u>>16&255)/255*r*255<<16)+((u>>8&255)/255*i*255<<8)+(u&255)/255*n*255}};t.prototype.renderPolygon=function e(t,r,i){i.moveTo(t[0],t[1]);for(var n=1;n<t.length/2;++n){i.lineTo(t[n*2],t[n*2+1])}if(r){i.closePath()}};t.prototype.destroy=function e(){this.renderer=null};return t}();r.default=s;n.default.registerPlugin("graphics",s)},{"../../const":46,"../../renderers/canvas/CanvasRenderer":77}],56:[function(e,t,r){"use strict";r.__esModule=true;r.default=i;function i(e,t,r,i,n,a,o,s){var u=arguments.length>8&&arguments[8]!==undefined?arguments[8]:[];var l=20;var h=0;var f=0;var c=0;var d=0;var p=0;u.push(e,t);for(var v=1,y=0;v<=l;++v){y=v/l;h=1-y;f=h*h;c=f*h;d=y*y;p=d*y;u.push(c*e+3*f*y*r+3*h*d*n+p*o,c*t+3*f*y*i+3*h*d*a+p*s)}return u}},{}],57:[function(e,t,r){"use strict";r.__esModule=true;var h=e("../../utils");var f=e("../../const");var i=e("../../renderers/webgl/utils/ObjectRenderer");var n=x(i);var a=e("../../renderers/webgl/WebGLRenderer");var o=x(a);var s=e("./WebGLGraphicsData");var u=x(s);var l=e("./shaders/PrimitiveShader");var c=x(l);var d=e("./utils/buildPoly");var p=x(d);var v=e("./utils/buildRectangle");var y=x(v);var g=e("./utils/buildRoundedRectangle");var m=x(g);var _=e("./utils/buildCircle");var b=x(_);function x(e){return e&&e.__esModule?e:{default:e}}function T(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function w(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function E(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var S=function(r){E(i,r);function i(e){T(this,i);var t=w(this,r.call(this,e));t.graphicsDataPool=[];t.primitiveShader=null;t.gl=e.gl;t.CONTEXT_UID=0;return t}i.prototype.onContextChange=function e(){this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID;this.primitiveShader=new c.default(this.gl)};i.prototype.destroy=function e(){n.default.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t){this.graphicsDataPool[t].destroy()}this.graphicsDataPool=null};i.prototype.render=function e(t){var r=this.renderer;var i=r.gl;var n=void 0;var a=t._webGL[this.CONTEXT_UID];if(!a||t.dirty!==a.dirty){this.updateGraphics(t);a=t._webGL[this.CONTEXT_UID]}var o=this.primitiveShader;r.bindShader(o);r.state.setBlendMode(t.blendMode);for(var s=0,u=a.data.length;s<u;s++){n=a.data[s];var l=n.shader;r.bindShader(l);l.uniforms.translationMatrix=t.transform.worldTransform.toArray(true);l.uniforms.tint=(0,h.hex2rgb)(t.tint);l.uniforms.alpha=t.worldAlpha;r.bindVao(n.vao);if(n.nativeLines){i.drawArrays(i.LINES,0,n.points.length/6)}else{n.vao.draw(i.TRIANGLE_STRIP,n.indices.length)}}};i.prototype.updateGraphics=function e(t){var r=this.renderer.gl;var i=t._webGL[this.CONTEXT_UID];if(!i){i=t._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:r,clearDirty:-1,dirty:-1}}i.dirty=t.dirty;if(t.clearDirty!==i.clearDirty){i.clearDirty=t.clearDirty;for(var n=0;n<i.data.length;n++){this.graphicsDataPool.push(i.data[n])}i.data.length=0;i.lastIndex=0}var a=void 0;var o=void 0;for(var s=i.lastIndex;s<t.graphicsData.length;s++){var u=t.graphicsData[s];a=this.getWebGLData(i,0);if(u.nativeLines&&u.lineWidth){o=this.getWebGLData(i,0,true);i.lastIndex++}if(u.type===f.SHAPES.POLY){(0,p.default)(u,a,o)}if(u.type===f.SHAPES.RECT){(0,y.default)(u,a,o)}else if(u.type===f.SHAPES.CIRC||u.type===f.SHAPES.ELIP){(0,b.default)(u,a,o)}else if(u.type===f.SHAPES.RREC){(0,m.default)(u,a,o)}i.lastIndex++}this.renderer.bindVao(null);for(var l=0;l<i.data.length;l++){a=i.data[l];if(a.dirty){a.upload()}}};i.prototype.getWebGLData=function e(t,r,i){var n=t.data[t.data.length-1];if(!n||n.nativeLines!==i||n.points.length>32e4){n=this.graphicsDataPool.pop()||new u.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState);n.nativeLines=i;n.reset(r);t.data.push(n)}n.dirty=true;return n};return i}(n.default);r.default=S;o.default.registerPlugin("graphics",S)},{"../../const":46,"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../utils":125,"./WebGLGraphicsData":58,"./shaders/PrimitiveShader":59,"./utils/buildCircle":60,"./utils/buildPoly":62,"./utils/buildRectangle":63,"./utils/buildRoundedRectangle":64}],58:[function(e,t,r){"use strict";r.__esModule=true;var i=e("pixi-gl-core");var n=a(i);function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var s=function(){function i(e,t,r){o(this,i);this.gl=e;this.color=[0,0,0];this.points=[];this.indices=[];this.buffer=n.default.GLBuffer.createVertexBuffer(e);this.indexBuffer=n.default.GLBuffer.createIndexBuffer(e);this.dirty=true;this.nativeLines=false;this.glPoints=null;this.glIndices=null;this.shader=t;this.vao=new n.default.VertexArrayObject(e,r).addIndex(this.indexBuffer).addAttribute(this.buffer,t.attributes.aVertexPosition,e.FLOAT,false,4*6,0).addAttribute(this.buffer,t.attributes.aColor,e.FLOAT,false,4*6,2*4)}i.prototype.reset=function e(){this.points.length=0;this.indices.length=0};i.prototype.upload=function e(){this.glPoints=new Float32Array(this.points);this.buffer.upload(this.glPoints);this.glIndices=new Uint16Array(this.indices);this.indexBuffer.upload(this.glIndices);this.dirty=false};i.prototype.destroy=function e(){this.color=null;this.points=null;this.indices=null;this.vao.destroy();this.buffer.destroy();this.indexBuffer.destroy();this.gl=null;this.buffer=null;this.indexBuffer=null;this.glPoints=null;this.glIndices=null};return i}();r.default=s},{"pixi-gl-core":15}],59:[function(e,t,r){"use strict";r.__esModule=true;var i=e("../../../Shader");var n=a(i);function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var l=function(t){u(r,t);function r(e){o(this,r);return s(this,t.call(this,e,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return r}(n.default);r.default=l},{"../../../Shader":44}],60:[function(e,t,r){"use strict";r.__esModule=true;r.default=a;var i=e("./buildLine");var x=n(i);var T=e("../../../const");var w=e("../../../utils");function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r){var i=e.shape;var n=i.x;var a=i.y;var o=void 0;var s=void 0;if(e.type===T.SHAPES.CIRC){o=i.radius;s=i.radius}else{o=i.width;s=i.height}if(o===0||s===0){return}var u=Math.floor(30*Math.sqrt(i.radius))||Math.floor(15*Math.sqrt(i.width+i.height));var l=Math.PI*2/u;if(e.fill){var h=(0,w.hex2rgb)(e.fillColor);var f=e.fillAlpha;var c=h[0]*f;var d=h[1]*f;var p=h[2]*f;var v=t.points;var y=t.indices;var g=v.length/6;y.push(g);for(var m=0;m<u+1;m++){v.push(n,a,c,d,p,f);v.push(n+Math.sin(l*m)*o,a+Math.cos(l*m)*s,c,d,p,f);y.push(g++,g++)}y.push(g-1)}if(e.lineWidth){var _=e.points;e.points=[];for(var b=0;b<u+1;b++){e.points.push(n+Math.sin(l*b)*o,a+Math.cos(l*b)*s)}(0,x.default)(e,t,r);e.points=_}}},{"../../../const":46,"../../../utils":125,"./buildLine":61}],61:[function(e,t,r){"use strict";r.__esModule=true;r.default=function(e,t,r){if(e.nativeLines){n(e,r)}else{i(e,t)}};var W=e("../../../math");var H=e("../../../utils");function i(e,t){var r=e.points;if(r.length===0){return}var i=new W.Point(r[0],r[1]);var n=new W.Point(r[r.length-2],r[r.length-1]);if(i.x===n.x&&i.y===n.y){r=r.slice();r.pop();r.pop();n=new W.Point(r[r.length-2],r[r.length-1]);var a=n.x+(i.x-n.x)*.5;var o=n.y+(i.y-n.y)*.5;r.unshift(a,o);r.push(a,o)}var s=t.points;var u=t.indices;var l=r.length/2;var h=r.length;var f=s.length/6;var c=e.lineWidth/2;var d=(0,H.hex2rgb)(e.lineColor);var p=e.lineAlpha;var v=d[0]*p;var y=d[1]*p;var g=d[2]*p;var m=r[0];var _=r[1];var b=r[2];var x=r[3];var T=0;var w=0;var E=-(_-x);var S=m-b;var O=0;var M=0;var P=0;var C=0;var R=Math.sqrt(E*E+S*S);E/=R;S/=R;E*=c;S*=c;s.push(m-E,_-S,v,y,g,p);s.push(m+E,_+S,v,y,g,p);for(var A=1;A<l-1;++A){m=r[(A-1)*2];_=r[(A-1)*2+1];b=r[A*2];x=r[A*2+1];T=r[(A+1)*2];w=r[(A+1)*2+1];E=-(_-x);S=m-b;R=Math.sqrt(E*E+S*S);E/=R;S/=R;E*=c;S*=c;O=-(x-w);M=b-T;R=Math.sqrt(O*O+M*M);O/=R;M/=R;O*=c;M*=c;var I=-S+_-(-S+x);var D=-E+b-(-E+m);var L=(-E+m)*(-S+x)-(-E+b)*(-S+_);var N=-M+w-(-M+x);var F=-O+b-(-O+T);var k=(-O+T)*(-M+x)-(-O+b)*(-M+w);var B=I*F-N*D;if(Math.abs(B)<.1){B+=10.1;s.push(b-E,x-S,v,y,g,p);s.push(b+E,x+S,v,y,g,p);continue}var j=(D*k-F*L)/B;var U=(N*L-I*k)/B;var X=(j-b)*(j-b)+(U-x)*(U-x);if(X>196*c*c){P=E-O;C=S-M;R=Math.sqrt(P*P+C*C);P/=R;C/=R;P*=c;C*=c;s.push(b-P,x-C);s.push(v,y,g,p);s.push(b+P,x+C);s.push(v,y,g,p);s.push(b-P,x-C);s.push(v,y,g,p);h++}else{s.push(j,U);s.push(v,y,g,p);s.push(b-(j-b),x-(U-x));s.push(v,y,g,p)}}m=r[(l-2)*2];_=r[(l-2)*2+1];b=r[(l-1)*2];x=r[(l-1)*2+1];E=-(_-x);S=m-b;R=Math.sqrt(E*E+S*S);E/=R;S/=R;E*=c;S*=c;s.push(b-E,x-S);s.push(v,y,g,p);s.push(b+E,x+S);s.push(v,y,g,p);u.push(f);for(var G=0;G<h;++G){u.push(f++)}u.push(f-1)}function n(e,t){var r=0;var i=e.points;if(i.length===0)return;var n=t.points;var a=i.length/2;var o=(0,H.hex2rgb)(e.lineColor);var s=e.lineAlpha;var u=o[0]*s;var l=o[1]*s;var h=o[2]*s;for(r=1;r<a;r++){var f=i[(r-1)*2];var c=i[(r-1)*2+1];var d=i[r*2];var p=i[r*2+1];n.push(f,c);n.push(u,l,h,s);n.push(d,p);n.push(u,l,h,s)}}},{"../../../math":70,"../../../utils":125}],62:[function(e,t,r){"use strict";r.__esModule=true;r.default=o;var i=e("./buildLine");var b=a(i);var x=e("../../../utils");var n=e("earcut");var T=a(n);function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){e.points=e.shape.points.slice();var i=e.points;if(e.fill&&i.length>=6){var n=[];var a=e.holes;for(var o=0;o<a.length;o++){var s=a[o];n.push(i.length/2);i=i.concat(s.points)}var u=t.points;var l=t.indices;var h=i.length/2;var f=(0,x.hex2rgb)(e.fillColor);var c=e.fillAlpha;var d=f[0]*c;var p=f[1]*c;var v=f[2]*c;var y=(0,T.default)(i,n,2);if(!y){return}var g=u.length/6;for(var m=0;m<y.length;m+=3){l.push(y[m]+g);l.push(y[m]+g);l.push(y[m+1]+g);l.push(y[m+2]+g);l.push(y[m+2]+g)}for(var _=0;_<h;_++){u.push(i[_*2],i[_*2+1],d,p,v,c)}}if(e.lineWidth>0){(0,b.default)(e,t,r)}}},{"../../../utils":125,"./buildLine":61,earcut:2}],63:[function(e,t,r){"use strict";r.__esModule=true;r.default=a;var i=e("./buildLine");var g=n(i);var m=e("../../../utils");function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r){var i=e.shape;var n=i.x;var a=i.y;var o=i.width;var s=i.height;if(e.fill){var u=(0,m.hex2rgb)(e.fillColor);var l=e.fillAlpha;var h=u[0]*l;var f=u[1]*l;var c=u[2]*l;var d=t.points;var p=t.indices;var v=d.length/6;d.push(n,a);d.push(h,f,c,l);d.push(n+o,a);d.push(h,f,c,l);d.push(n,a+s);d.push(h,f,c,l);d.push(n+o,a+s);d.push(h,f,c,l);p.push(v,v,v+1,v+2,v+3,v+3)}if(e.lineWidth){var y=e.points;e.points=[n,a,n+o,a,n+o,a+s,n,a+s,n,a];(0,g.default)(e,t,r);e.points=y}}},{"../../../utils":125,"./buildLine":61}],64:[function(e,t,r){"use strict";r.__esModule=true;r.default=o;var i=e("earcut");var E=a(i);var n=e("./buildLine");var S=a(n);var O=e("../../../utils");function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){var i=e.shape;var n=i.x;var a=i.y;var o=i.width;var s=i.height;var u=i.radius;var l=[];l.push(n,a+u);M(n,a+s-u,n,a+s,n+u,a+s,l);M(n+o-u,a+s,n+o,a+s,n+o,a+s-u,l);M(n+o,a+u,n+o,a,n+o-u,a,l);M(n+u,a,n,a,n,a+u+1e-10,l);if(e.fill){var h=(0,O.hex2rgb)(e.fillColor);var f=e.fillAlpha;var c=h[0]*f;var d=h[1]*f;var p=h[2]*f;var v=t.points;var y=t.indices;var g=v.length/6;var m=(0,E.default)(l,null,2);for(var _=0,b=m.length;_<b;_+=3){y.push(m[_]+g);y.push(m[_]+g);y.push(m[_+1]+g);y.push(m[_+2]+g);y.push(m[_+2]+g)}for(var x=0,T=l.length;x<T;x++){v.push(l[x],l[++x],c,d,p,f)}}if(e.lineWidth){var w=e.points;e.points=l;(0,S.default)(e,t,r);e.points=w}}function g(e,t,r){var i=t-e;return e+i*r}function M(e,t,r,i,n,a){var o=arguments.length>6&&arguments[6]!==undefined?arguments[6]:[];var s=20;var u=o;var l=0;var h=0;var f=0;var c=0;var d=0;var p=0;for(var v=0,y=0;v<=s;++v){y=v/s;l=g(e,r,y);h=g(t,i,y);f=g(r,n,y);c=g(i,a,y);d=g(l,f,y);p=g(h,c,y);u.push(d,p)}return u}},{"../../../utils":125,"./buildLine":61,earcut:2}],65:[function(e,t,r){"use strict";r.__esModule=true;r.autoDetectRenderer=r.Application=r.Filter=r.SpriteMaskFilter=r.Quad=r.RenderTarget=r.ObjectRenderer=r.WebGLManager=r.Shader=r.CanvasRenderTarget=r.TextureUvs=r.VideoBaseTexture=r.BaseRenderTexture=r.RenderTexture=r.BaseTexture=r.TextureMatrix=r.Texture=r.Spritesheet=r.CanvasGraphicsRenderer=r.GraphicsRenderer=r.GraphicsData=r.Graphics=r.TextMetrics=r.TextStyle=r.Text=r.SpriteRenderer=r.CanvasTinter=r.CanvasSpriteRenderer=r.Sprite=r.TransformBase=r.TransformStatic=r.Transform=r.Container=r.DisplayObject=r.Bounds=r.glCore=r.WebGLRenderer=r.CanvasRenderer=r.ticker=r.utils=r.settings=undefined;var i=e("./const");Object.keys(i).forEach(function(t){if(t==="default"||t==="__esModule")return;Object.defineProperty(r,t,{enumerable:true,get:function e(){return i[t]}})});var n=e("./math");Object.keys(n).forEach(function(t){if(t==="default"||t==="__esModule")return;Object.defineProperty(r,t,{enumerable:true,get:function e(){return n[t]}})});var a=e("pixi-gl-core");Object.defineProperty(r,"glCore",{enumerable:true,get:function e(){return Q(a).default}});var o=e("./display/Bounds");Object.defineProperty(r,"Bounds",{enumerable:true,get:function e(){return Q(o).default}});var s=e("./display/DisplayObject");Object.defineProperty(r,"DisplayObject",{enumerable:true,get:function e(){return Q(s).default}});var u=e("./display/Container");Object.defineProperty(r,"Container",{enumerable:true,get:function e(){return Q(u).default}});var l=e("./display/Transform");Object.defineProperty(r,"Transform",{enumerable:true,get:function e(){return Q(l).default}});var h=e("./display/TransformStatic");Object.defineProperty(r,"TransformStatic",{enumerable:true,get:function e(){return Q(h).default}});var f=e("./display/TransformBase");Object.defineProperty(r,"TransformBase",{enumerable:true,get:function e(){return Q(f).default}});var c=e("./sprites/Sprite");Object.defineProperty(r,"Sprite",{enumerable:true,get:function e(){return Q(c).default}});var d=e("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(r,"CanvasSpriteRenderer",{enumerable:true,get:function e(){return Q(d).default}});var p=e("./sprites/canvas/CanvasTinter");Object.defineProperty(r,"CanvasTinter",{enumerable:true,get:function e(){return Q(p).default}});var v=e("./sprites/webgl/SpriteRenderer");Object.defineProperty(r,"SpriteRenderer",{enumerable:true,get:function e(){return Q(v).default}});var y=e("./text/Text");Object.defineProperty(r,"Text",{enumerable:true,get:function e(){return Q(y).default}});var g=e("./text/TextStyle");Object.defineProperty(r,"TextStyle",{enumerable:true,get:function e(){return Q(g).default}});var m=e("./text/TextMetrics");Object.defineProperty(r,"TextMetrics",{enumerable:true,get:function e(){return Q(m).default}});var _=e("./graphics/Graphics");Object.defineProperty(r,"Graphics",{enumerable:true,get:function e(){return Q(_).default}});var b=e("./graphics/GraphicsData");Object.defineProperty(r,"GraphicsData",{enumerable:true,get:function e(){return Q(b).default}});var x=e("./graphics/webgl/GraphicsRenderer");Object.defineProperty(r,"GraphicsRenderer",{enumerable:true,get:function e(){return Q(x).default}});var T=e("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(r,"CanvasGraphicsRenderer",{enumerable:true,get:function e(){return Q(T).default}});var w=e("./textures/Spritesheet");Object.defineProperty(r,"Spritesheet",{enumerable:true,get:function e(){return Q(w).default}});var E=e("./textures/Texture");Object.defineProperty(r,"Texture",{enumerable:true,get:function e(){return Q(E).default}});var S=e("./textures/TextureMatrix");Object.defineProperty(r,"TextureMatrix",{enumerable:true,get:function e(){return Q(S).default}});var O=e("./textures/BaseTexture");Object.defineProperty(r,"BaseTexture",{enumerable:true,get:function e(){return Q(O).default}});var M=e("./textures/RenderTexture");Object.defineProperty(r,"RenderTexture",{enumerable:true,get:function e(){return Q(M).default}});var P=e("./textures/BaseRenderTexture");Object.defineProperty(r,"BaseRenderTexture",{enumerable:true,get:function e(){return Q(P).default}});var C=e("./textures/VideoBaseTexture");Object.defineProperty(r,"VideoBaseTexture",{enumerable:true,get:function e(){return Q(C).default}});var R=e("./textures/TextureUvs");Object.defineProperty(r,"TextureUvs",{enumerable:true,get:function e(){return Q(R).default}});var A=e("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(r,"CanvasRenderTarget",{enumerable:true,get:function e(){return Q(A).default}});var I=e("./Shader");Object.defineProperty(r,"Shader",{enumerable:true,get:function e(){return Q(I).default}});var D=e("./renderers/webgl/managers/WebGLManager");Object.defineProperty(r,"WebGLManager",{enumerable:true,get:function e(){return Q(D).default}});var L=e("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(r,"ObjectRenderer",{enumerable:true,get:function e(){return Q(L).default}});var N=e("./renderers/webgl/utils/RenderTarget");Object.defineProperty(r,"RenderTarget",{enumerable:true,get:function e(){return Q(N).default}});var F=e("./renderers/webgl/utils/Quad");Object.defineProperty(r,"Quad",{enumerable:true,get:function e(){return Q(F).default}});var k=e("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(r,"SpriteMaskFilter",{enumerable:true,get:function e(){return Q(k).default}});var B=e("./renderers/webgl/filters/Filter");Object.defineProperty(r,"Filter",{enumerable:true,get:function e(){return Q(B).default}});var j=e("./Application");Object.defineProperty(r,"Application",{enumerable:true,get:function e(){return Q(j).default}});var U=e("./autoDetectRenderer");Object.defineProperty(r,"autoDetectRenderer",{enumerable:true,get:function e(){return U.autoDetectRenderer}});var X=e("./utils");var G=J(X);var W=e("./ticker");var H=J(W);var Y=e("./settings");var V=Q(Y);var z=e("./renderers/canvas/CanvasRenderer");var q=Q(z);var K=e("./renderers/webgl/WebGLRenderer");var Z=Q(K);function J(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function Q(e){return e&&e.__esModule?e:{default:e}}r.settings=V.default;r.utils=G;r.ticker=H;r.CanvasRenderer=q.default;r.WebGLRenderer=Z.default},{"./Application":43,"./Shader":44,"./autoDetectRenderer":45,"./const":46,"./display/Bounds":47,"./display/Container":48,"./display/DisplayObject":49,"./display/Transform":50,"./display/TransformBase":51,"./display/TransformStatic":52,"./graphics/Graphics":53,"./graphics/GraphicsData":54,"./graphics/canvas/CanvasGraphicsRenderer":55,"./graphics/webgl/GraphicsRenderer":57,"./math":70,"./renderers/canvas/CanvasRenderer":77,"./renderers/canvas/utils/CanvasRenderTarget":79,"./renderers/webgl/WebGLRenderer":84,"./renderers/webgl/filters/Filter":86,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":89,"./renderers/webgl/managers/WebGLManager":93,"./renderers/webgl/utils/ObjectRenderer":94,"./renderers/webgl/utils/Quad":95,"./renderers/webgl/utils/RenderTarget":96,"./settings":101,"./sprites/Sprite":102,"./sprites/canvas/CanvasSpriteRenderer":103,"./sprites/canvas/CanvasTinter":104,"./sprites/webgl/SpriteRenderer":106,"./text/Text":108,"./text/TextMetrics":109,"./text/TextStyle":110,"./textures/BaseRenderTexture":111,"./textures/BaseTexture":112,"./textures/RenderTexture":113,"./textures/Spritesheet":114,"./textures/Texture":115,"./textures/TextureMatrix":116,"./textures/TextureUvs":117,"./textures/VideoBaseTexture":118,"./ticker":121,"./utils":125,"pixi-gl-core":15}],66:[function(e,t,r){"use strict";r.__esModule=true;var i=e("./Matrix");var h=n(i);function n(e){return e&&e.__esModule?e:{default:e}}var f=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1];var c=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1];var d=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1];var p=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1];var v=[];var y=[];function g(e){if(e<0){return-1}if(e>0){return 1}return 0}function a(){for(var e=0;e<16;e++){var t=[];y.push(t);for(var r=0;r<16;r++){var i=g(f[e]*f[r]+d[e]*c[r]);var n=g(c[e]*f[r]+p[e]*c[r]);var a=g(f[e]*d[r]+d[e]*p[r]);var o=g(c[e]*d[r]+p[e]*p[r]);for(var s=0;s<16;s++){if(f[s]===i&&c[s]===n&&d[s]===a&&p[s]===o){t.push(s);break}}}}for(var u=0;u<16;u++){var l=new h.default;l.set(f[u],c[u],d[u],p[u],0,0);v.push(l)}}a();var o={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function e(t){return f[t]},uY:function e(t){return c[t]},vX:function e(t){return d[t]},vY:function e(t){return p[t]},inv:function e(t){if(t&8){return t&15}return-t&7},add:function e(t,r){return y[t][r]},sub:function e(t,r){return y[t][o.inv(r)]},rotate180:function e(t){return t^4},isVertical:function e(t){return(t&3)===2},byDirection:function e(t,r){if(Math.abs(t)*2<=Math.abs(r)){if(r>=0){return o.S}return o.N}else if(Math.abs(r)*2<=Math.abs(t)){if(t>0){return o.E}return o.W}else if(r>0){if(t>0){return o.SE}return o.SW}else if(t>0){return o.NE}return o.NW},matrixAppendRotationInv:function e(t,r){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var a=v[o.inv(r)];a.tx=i;a.ty=n;t.append(a)}};r.default=o},{"./Matrix":67}],67:[function(e,t,r){"use strict";r.__esModule=true;var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var n=e("./Point");var s=a(n);function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function o(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;u(this,o);this.a=e;this.b=t;this.c=r;this.d=i;this.tx=n;this.ty=a;this.array=null}o.prototype.fromArray=function e(t){this.a=t[0];this.b=t[1];this.c=t[3];this.d=t[4];this.tx=t[2];this.ty=t[5]};o.prototype.set=function e(t,r,i,n,a,o){this.a=t;this.b=r;this.c=i;this.d=n;this.tx=a;this.ty=o;return this};o.prototype.toArray=function e(t,r){if(!this.array){this.array=new Float32Array(9)}var i=r||this.array;if(t){i[0]=this.a;i[1]=this.b;i[2]=0;i[3]=this.c;i[4]=this.d;i[5]=0;i[6]=this.tx;i[7]=this.ty;i[8]=1}else{i[0]=this.a;i[1]=this.c;i[2]=this.tx;i[3]=this.b;i[4]=this.d;i[5]=this.ty;i[6]=0;i[7]=0;i[8]=1}return i};o.prototype.apply=function e(t,r){r=r||new s.default;var i=t.x;var n=t.y;r.x=this.a*i+this.c*n+this.tx;r.y=this.b*i+this.d*n+this.ty;return r};o.prototype.applyInverse=function e(t,r){r=r||new s.default;var i=1/(this.a*this.d+this.c*-this.b);var n=t.x;var a=t.y;r.x=this.d*i*n+-this.c*i*a+(this.ty*this.c-this.tx*this.d)*i;r.y=this.a*i*a+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i;return r};o.prototype.translate=function e(t,r){this.tx+=t;this.ty+=r;return this};o.prototype.scale=function e(t,r){this.a*=t;this.d*=r;this.c*=t;this.b*=r;this.tx*=t;this.ty*=r;return this};o.prototype.rotate=function e(t){var r=Math.cos(t);var i=Math.sin(t);var n=this.a;var a=this.c;var o=this.tx;this.a=n*r-this.b*i;this.b=n*i+this.b*r;this.c=a*r-this.d*i;this.d=a*i+this.d*r;this.tx=o*r-this.ty*i;this.ty=o*i+this.ty*r;return this};o.prototype.append=function e(t){var r=this.a;var i=this.b;var n=this.c;var a=this.d;this.a=t.a*r+t.b*n;this.b=t.a*i+t.b*a;this.c=t.c*r+t.d*n;this.d=t.c*i+t.d*a;this.tx=t.tx*r+t.ty*n+this.tx;this.ty=t.tx*i+t.ty*a+this.ty;return this};o.prototype.setTransform=function e(t,r,i,n,a,o,s,u,l){var h=Math.sin(s);var f=Math.cos(s);var c=Math.cos(l);var d=Math.sin(l);var p=-Math.sin(u);var v=Math.cos(u);var y=f*a;var g=h*a;var m=-h*o;var _=f*o;this.a=c*y+d*m;this.b=c*g+d*_;this.c=p*y+v*m;this.d=p*g+v*_;this.tx=t+(i*y+n*m);this.ty=r+(i*g+n*_);return this};o.prototype.prepend=function e(t){var r=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var i=this.a;var n=this.c;this.a=i*t.a+this.b*t.c;this.b=i*t.b+this.b*t.d;this.c=n*t.a+this.d*t.c;this.d=n*t.b+this.d*t.d}this.tx=r*t.a+this.ty*t.c+t.tx;this.ty=r*t.b+this.ty*t.d+t.ty;return this};o.prototype.decompose=function e(t){var r=this.a;var i=this.b;var n=this.c;var a=this.d;var o=-Math.atan2(-n,a);var s=Math.atan2(i,r);var u=Math.abs(o+s);if(u<1e-5){t.rotation=s;if(r<0&&a>=0){t.rotation+=t.rotation<=0?Math.PI:-Math.PI}t.skew.x=t.skew.y=0}else{t.skew.x=o;t.skew.y=s}t.scale.x=Math.sqrt(r*r+i*i);t.scale.y=Math.sqrt(n*n+a*a);t.position.x=this.tx;t.position.y=this.ty;return t};o.prototype.invert=function e(){var t=this.a;var r=this.b;var i=this.c;var n=this.d;var a=this.tx;var o=t*n-r*i;this.a=n/o;this.b=-r/o;this.c=-i/o;this.d=t/o;this.tx=(i*this.ty-n*a)/o;this.ty=-(t*this.ty-r*a)/o;return this};o.prototype.identity=function e(){this.a=1;this.b=0;this.c=0;this.d=1;this.tx=0;this.ty=0;return this};o.prototype.clone=function e(){var t=new o;t.a=this.a;t.b=this.b;t.c=this.c;t.d=this.d;t.tx=this.tx;t.ty=this.ty;return t};o.prototype.copy=function e(t){t.a=this.a;t.b=this.b;t.c=this.c;t.d=this.d;t.tx=this.tx;t.ty=this.ty;return t};i(o,null,[{key:"IDENTITY",get:function e(){return new o}},{key:"TEMP_MATRIX",get:function e(){return new o}}]);return o}();r.default=o},{"./Point":69}],68:[function(e,t,r){"use strict";r.__esModule=true;var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var n=function(){function n(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;a(this,n);this._x=r;this._y=i;this.cb=e;this.scope=t}n.prototype.set=function e(t,r){var i=t||0;var n=r||(r!==0?i:0);if(this._x!==i||this._y!==n){this._x=i;this._y=n;this.cb.call(this.scope)}};n.prototype.copy=function e(t){if(this._x!==t.x||this._y!==t.y){this._x=t.x;this._y=t.y;this.cb.call(this.scope)}};i(n,[{key:"x",get:function e(){return this._x},set:function e(t){if(this._x!==t){this._x=t;this.cb.call(this.scope)}}},{key:"y",get:function e(){return this._y},set:function e(t){if(this._y!==t){this._y=t;this.cb.call(this.scope)}}}]);return n}();r.default=n},{}],69:[function(e,t,r){"use strict";r.__esModule=true;function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var n=function(){function r(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;i(this,r);this.x=e;this.y=t}r.prototype.clone=function e(){return new r(this.x,this.y)};r.prototype.copy=function e(t){this.set(t.x,t.y)};r.prototype.equals=function e(t){return t.x===this.x&&t.y===this.y};r.prototype.set=function e(t,r){this.x=t||0;this.y=r||(r!==0?this.x:0)};return r}();r.default=n},{}],70:[function(e,t,r){"use strict";r.__esModule=true;var i=e("./Point");Object.defineProperty(r,"Point",{enumerable:true,get:function e(){return c(i).default}});var n=e("./ObservablePoint");Object.defineProperty(r,"ObservablePoint",{enumerable:true,get:function e(){return c(n).default}});var a=e("./Matrix");Object.defineProperty(r,"Matrix",{enumerable:true,get:function e(){return c(a).default}});var o=e("./GroupD8");Object.defineProperty(r,"GroupD8",{enumerable:true,get:function e(){return c(o).default}});var s=e("./shapes/Circle");Object.defineProperty(r,"Circle",{enumerable:true,get:function e(){return c(s).default}});var u=e("./shapes/Ellipse");Object.defineProperty(r,"Ellipse",{enumerable:true,get:function e(){return c(u).default}});var l=e("./shapes/Polygon");Object.defineProperty(r,"Polygon",{enumerable:true,get:function e(){return c(l).default}});var h=e("./shapes/Rectangle");Object.defineProperty(r,"Rectangle",{enumerable:true,get:function e(){return c(h).default}});var f=e("./shapes/RoundedRectangle");Object.defineProperty(r,"RoundedRectangle",{enumerable:true,get:function e(){return c(f).default}});function c(e){return e&&e.__esModule?e:{default:e}}},{"./GroupD8":66,"./Matrix":67,"./ObservablePoint":68,"./Point":69,"./shapes/Circle":71,"./shapes/Ellipse":72,"./shapes/Polygon":73,"./shapes/Rectangle":74,"./shapes/RoundedRectangle":75}],71:[function(e,t,r){"use strict";r.__esModule=true;var i=e("./Rectangle");var n=o(i);var a=e("../../const");function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var u=function(){function i(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;s(this,i);this.x=e;this.y=t;this.radius=r;this.type=a.SHAPES.CIRC}i.prototype.clone=function e(){return new i(this.x,this.y,this.radius)};i.prototype.contains=function e(t,r){if(this.radius<=0){return false}var i=this.radius*this.radius;var n=this.x-t;var a=this.y-r;n*=n;a*=a;return n+a<=i};i.prototype.getBounds=function e(){return new n.default(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)};return i}();r.default=u},{"../../const":46,"./Rectangle":74}],72:[function(e,t,r){"use strict";r.__esModule=true;var i=e("./Rectangle");var a=n(i);var o=e("../../const");function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var u=function(){function n(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;s(this,n);this.x=e;this.y=t;this.width=r;this.height=i;this.type=o.SHAPES.ELIP}n.prototype.clone=function e(){return new n(this.x,this.y,this.width,this.height)};n.prototype.contains=function e(t,r){if(this.width<=0||this.height<=0){return false}var i=(t-this.x)/this.width;var n=(r-this.y)/this.height;i*=i;n*=n;return i+n<=1};n.prototype.getBounds=function e(){return new a.default(this.x-this.width,this.y-this.height,this.width,this.height)};return n}();r.default=u},{"../../const":46,"./Rectangle":74}],73:[function(e,t,r){"use strict";r.__esModule=true;var i=e("../Point");var s=n(i);var u=e("../../const");function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=function(){function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++){t[r]=arguments[r]}l(this,o);if(Array.isArray(t[0])){t=t[0]}if(t[0]instanceof s.default){var i=[];for(var n=0,a=t.length;n<a;n++){i.push(t[n].x,t[n].y)}t=i}this.closed=true;this.points=t;this.type=u.SHAPES.POLY}o.prototype.clone=function e(){return new o(this.points.slice())};o.prototype.close=function e(){var t=this.points;if(t[0]!==t[t.length-2]||t[1]!==t[t.length-1]){t.push(t[0],t[1])}};o.prototype.contains=function e(t,r){var i=false;var n=this.points.length/2;for(var a=0,o=n-1;a<n;o=a++){var s=this.points[a*2];var u=this.points[a*2+1];var l=this.points[o*2];var h=this.points[o*2+1];var f=u>r!==h>r&&t<(l-s)*((r-u)/(h-u))+s;if(f){i=!i}}return i};return o}();r.default=a},{"../../const":46,"../Point":69}],74:[function(e,t,r){"use strict";r.__esModule=true;var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var a=e("../../const");function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var n=function(){function n(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;o(this,n);this.x=Number(e);this.y=Number(t);this.width=Number(r);this.height=Number(i);this.type=a.SHAPES.RECT}n.prototype.clone=function e(){return new n(this.x,this.y,this.width,this.height)};n.prototype.copy=function e(t){this.x=t.x;this.y=t.y;this.width=t.width;this.height=t.height;return this};n.prototype.contains=function e(t,r){if(this.width<=0||this.height<=0){return false}if(t>=this.x&&t<this.x+this.width){if(r>=this.y&&r<this.y+this.height){return true}}return false};n.prototype.pad=function e(t,r){t=t||0;r=r||(r!==0?t:0);this.x-=t;this.y-=r;this.width+=t*2;this.height+=r*2};n.prototype.fit=function e(t){if(this.x<t.x){this.width+=this.x;if(this.width<0){this.width=0}this.x=t.x}if(this.y<t.y){this.height+=this.y;if(this.height<0){this.height=0}this.y=t.y}if(this.x+this.width>t.x+t.width){this.width=t.width-this.x;if(this.width<0){this.width=0}}if(this.y+this.height>t.y+t.height){this.height=t.height-this.y;if(this.height<0){this.height=0}}};n.prototype.enlarge=function e(t){var r=Math.min(this.x,t.x);var i=Math.max(this.x+this.width,t.x+t.width);var n=Math.min(this.y,t.y);var a=Math.max(this.y+this.height,t.y+t.height);this.x=r;this.width=i-r;this.y=n;this.height=a-n};i(n,[{key:"left",get:function e(){return this.x}},{key:"right",get:function e(){return this.x+this.width}},{key:"top",get:function e(){return this.y}},{key:"bottom",get:function e(){return this.y+this.height}}],[{key:"EMPTY",get:function e(){return new n(0,0,0,0)}}]);return n}();r.default=n},{"../../const":46}],75:[function(e,t,r){"use strict";r.__esModule=true;var o=e("../../const");function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function(){function a(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:20;s(this,a);this.x=e;this.y=t;this.width=r;this.height=i;this.radius=n;this.type=o.SHAPES.RREC}a.prototype.clone=function e(){return new a(this.x,this.y,this.width,this.height,this.radius)};a.prototype.contains=function e(t,r){if(this.width<=0||this.height<=0){return false}if(t>=this.x&&t<=this.x+this.width){if(r>=this.y&&r<=this.y+this.height){if(r>=this.y+this.radius&&r<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius){return true}var i=t-(this.x+this.radius);var n=r-(this.y+this.radius);var a=this.radius*this.radius;if(i*i+n*n<=a){return true}i=t-(this.x+this.width-this.radius);if(i*i+n*n<=a){return true}n=r-(this.y+this.height-this.radius);if(i*i+n*n<=a){return true}i=t-(this.x+this.radius);if(i*i+n*n<=a){return true}}}return false};return a}();r.default=i},{"../../const":46}],76:[function(e,t,r){"use strict";r.__esModule=true;var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var s=e("../utils");var u=e("../math");var l=e("../const");var n=e("../settings");var h=v(n);var a=e("../display/Container");var f=v(a);var o=e("../textures/RenderTexture");var c=v(o);var d=e("eventemitter3");var p=v(d);function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var _=new u.Matrix;var b=function(a){m(o,a);function o(e,t,r,i){y(this,o);var n=g(this,a.call(this));(0,s.sayHello)(e);if(typeof t==="number"){t=Object.assign({width:t,height:r||h.default.RENDER_OPTIONS.height},i)}t=Object.assign({},h.default.RENDER_OPTIONS,t);n.options=t;n.type=l.RENDERER_TYPE.UNKNOWN;n.screen=new u.Rectangle(0,0,t.width,t.height);n.view=t.view||document.createElement("canvas");n.resolution=t.resolution||h.default.RESOLUTION;n.transparent=t.transparent;n.autoResize=t.autoResize||false;n.blendModes=null;n.preserveDrawingBuffer=t.preserveDrawingBuffer;n.clearBeforeRender=t.clearBeforeRender;n.roundPixels=t.roundPixels;n._backgroundColor=0;n._backgroundColorRgba=[0,0,0,0];n._backgroundColorString="#000000";n.backgroundColor=t.backgroundColor||n._backgroundColor;n._tempDisplayObjectParent=new f.default;n._lastObjectRendered=n._tempDisplayObjectParent;return n}o.prototype.resize=function e(t,r){this.screen.width=t;this.screen.height=r;this.view.width=t*this.resolution;this.view.height=r*this.resolution;if(this.autoResize){this.view.style.width=t+"px";this.view.style.height=r+"px"}};o.prototype.generateTexture=function e(t,r,i,n){n=n||t.getLocalBounds();var a=c.default.create(n.width|0,n.height|0,r,i);_.tx=-n.x;_.ty=-n.y;this.render(t,a,false,_,true);return a};o.prototype.destroy=function e(t){if(t&&this.view.parentNode){this.view.parentNode.removeChild(this.view)}this.type=l.RENDERER_TYPE.UNKNOWN;this.view=null;this.screen=null;this.resolution=0;this.transparent=false;this.autoResize=false;this.blendModes=null;this.options=null;this.preserveDrawingBuffer=false;this.clearBeforeRender=false;this.roundPixels=false;this._backgroundColor=0;this._backgroundColorRgba=null;this._backgroundColorString=null;this._tempDisplayObjectParent=null;this._lastObjectRendered=null};i(o,[{key:"width",get:function e(){return this.view.width}},{key:"height",get:function e(){return this.view.height}},{key:"backgroundColor",get:function e(){return this._backgroundColor},set:function e(t){this._backgroundColor=t;this._backgroundColorString=(0,s.hex2string)(t);(0,s.hex2rgb)(t,this._backgroundColorRgba)}}]);return o}(p.default);r.default=b},{"../const":46,"../display/Container":48,"../math":70,"../settings":101,"../textures/RenderTexture":113,"../utils":125,eventemitter3:3}],77:[function(e,t,r){"use strict";r.__esModule=true;var i=e("../SystemRenderer");var n=v(i);var a=e("./utils/CanvasMaskManager");var o=v(a);var s=e("./utils/CanvasRenderTarget");var f=v(s);var u=e("./utils/mapCanvasBlendModesToPixi");var l=v(u);var h=e("../../utils");var c=e("../../const");var d=e("../../settings");var p=v(d);function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var _=function(n){m(a,n);function a(e,t,r){y(this,a);var i=g(this,n.call(this,"Canvas",e,t,r));i.type=c.RENDERER_TYPE.CANVAS;i.rootContext=i.view.getContext("2d",{alpha:i.transparent});i.context=i.rootContext;i.refresh=true;i.maskManager=new o.default(i);i.smoothProperty="imageSmoothingEnabled";if(!i.rootContext.imageSmoothingEnabled){if(i.rootContext.webkitImageSmoothingEnabled){i.smoothProperty="webkitImageSmoothingEnabled"}else if(i.rootContext.mozImageSmoothingEnabled){i.smoothProperty="mozImageSmoothingEnabled"}else if(i.rootContext.oImageSmoothingEnabled){i.smoothProperty="oImageSmoothingEnabled"}else if(i.rootContext.msImageSmoothingEnabled){i.smoothProperty="msImageSmoothingEnabled"}}i.initPlugins();i.blendModes=(0,l.default)();i._activeBlendMode=null;i.renderingToScreen=false;i.resize(i.options.width,i.options.height);return i}a.prototype.render=function e(t,r,i,n,a){if(!this.view){return}this.renderingToScreen=!r;this.emit("prerender");var o=this.resolution;if(r){r=r.baseTexture||r;if(!r._canvasRenderTarget){r._canvasRenderTarget=new f.default(r.width,r.height,r.resolution);r.source=r._canvasRenderTarget.canvas;r.valid=true}this.context=r._canvasRenderTarget.context;this.resolution=r._canvasRenderTarget.resolution}else{this.context=this.rootContext}var s=this.context;if(!r){this._lastObjectRendered=t}if(!a){var u=t.parent;var l=this._tempDisplayObjectParent.transform.worldTransform;if(n){n.copy(l);this._tempDisplayObjectParent.transform._worldID=-1}else{l.identity()}t.parent=this._tempDisplayObjectParent;t.updateTransform();t.parent=u}s.save();s.setTransform(1,0,0,1,0,0);s.globalAlpha=1;this._activeBlendMode=c.BLEND_MODES.NORMAL;s.globalCompositeOperation=this.blendModes[c.BLEND_MODES.NORMAL];if(navigator.isCocoonJS&&this.view.screencanvas){s.fillStyle="black";s.clear()}if(i!==undefined?i:this.clearBeforeRender){if(this.renderingToScreen){if(this.transparent){s.clearRect(0,0,this.width,this.height)}else{s.fillStyle=this._backgroundColorString;s.fillRect(0,0,this.width,this.height)}}}var h=this.context;this.context=s;t.renderCanvas(this);this.context=h;s.restore();this.resolution=o;this.emit("postrender")};a.prototype.clear=function e(t){var r=this.context;t=t||this._backgroundColorString;if(!this.transparent&&t){r.fillStyle=t;r.fillRect(0,0,this.width,this.height)}else{r.clearRect(0,0,this.width,this.height)}};a.prototype.setBlendMode=function e(t){if(this._activeBlendMode===t){return}this._activeBlendMode=t;this.context.globalCompositeOperation=this.blendModes[t]};a.prototype.destroy=function e(t){this.destroyPlugins();n.prototype.destroy.call(this,t);this.context=null;this.refresh=true;this.maskManager.destroy();this.maskManager=null;this.smoothProperty=null};a.prototype.resize=function e(t,r){n.prototype.resize.call(this,t,r);if(this.smoothProperty){this.rootContext[this.smoothProperty]=p.default.SCALE_MODE===c.SCALE_MODES.LINEAR}};a.prototype.invalidateBlendMode=function e(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)};return a}(n.default);r.default=_;h.pluginTarget.mixin(_)},{"../../const":46,"../../settings":101,"../../utils":125,"../SystemRenderer":76,"./utils/CanvasMaskManager":78,"./utils/CanvasRenderTarget":79,"./utils/mapCanvasBlendModesToPixi":81}],78:[function(e,t,r){"use strict";r.__esModule=true;var O=e("../../../const");function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var n=function(){function t(e){i(this,t);this.renderer=e}t.prototype.pushMask=function e(t){var r=this.renderer;r.context.save();var i=t.alpha;var n=t.transform.worldTransform;var a=r.resolution;r.context.setTransform(n.a*a,n.b*a,n.c*a,n.d*a,n.tx*a,n.ty*a);if(!t._texture){this.renderGraphicsShape(t);r.context.clip()}t.worldAlpha=i};t.prototype.renderGraphicsShape=function e(t){var r=this.renderer.context;var i=t.graphicsData.length;if(i===0){return}r.beginPath();for(var n=0;n<i;n++){var a=t.graphicsData[n];var o=a.shape;if(a.type===O.SHAPES.POLY){var s=o.points;r.moveTo(s[0],s[1]);for(var u=1;u<s.length/2;u++){r.lineTo(s[u*2],s[u*2+1])}if(s[0]===s[s.length-2]&&s[1]===s[s.length-1]){r.closePath()}}else if(a.type===O.SHAPES.RECT){r.rect(o.x,o.y,o.width,o.height);r.closePath()}else if(a.type===O.SHAPES.CIRC){r.arc(o.x,o.y,o.radius,0,2*Math.PI);r.closePath()}else if(a.type===O.SHAPES.ELIP){var l=o.width*2;var h=o.height*2;var f=o.x-l/2;var c=o.y-h/2;var d=.5522848;var p=l/2*d;var v=h/2*d;var y=f+l;var g=c+h;var m=f+l/2;var _=c+h/2;r.moveTo(f,_);r.bezierCurveTo(f,_-v,m-p,c,m,c);r.bezierCurveTo(m+p,c,y,_-v,y,_);r.bezierCurveTo(y,_+v,m+p,g,m,g);r.bezierCurveTo(m-p,g,f,_+v,f,_);r.closePath()}else if(a.type===O.SHAPES.RREC){var b=o.x;var x=o.y;var T=o.width;var w=o.height;var E=o.radius;var S=Math.min(T,w)/2|0;E=E>S?S:E;r.moveTo(b,x+E);r.lineTo(b,x+w-E);r.quadraticCurveTo(b,x+w,b+E,x+w);r.lineTo(b+T-E,x+w);r.quadraticCurveTo(b+T,x+w,b+T,x+w-E);r.lineTo(b+T,x+E);r.quadraticCurveTo(b+T,x,b+T-E,x);r.lineTo(b+E,x);r.quadraticCurveTo(b,x,b,x+E);r.closePath()}}};t.prototype.popMask=function e(t){t.context.restore();t.invalidateBlendMode()};t.prototype.destroy=function e(){};return t}();r.default=n},{"../../../const":46}],79:[function(e,t,r){"use strict";r.__esModule=true;var n=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var i=e("../../../settings");var a=o(i);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var u=function(){function i(e,t,r){s(this,i);this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");this.resolution=r||a.default.RESOLUTION;this.resize(e,t)}i.prototype.clear=function e(){this.context.setTransform(1,0,0,1,0,0);this.context.clearRect(0,0,this.canvas.width,this.canvas.height)};i.prototype.resize=function e(t,r){this.canvas.width=t*this.resolution;this.canvas.height=r*this.resolution};i.prototype.destroy=function e(){this.context=null;this.canvas=null};n(i,[{key:"width",get:function e(){return this.canvas.width},set:function e(t){this.canvas.width=t}},{key:"height",get:function e(){return this.canvas.height},set:function e(t){this.canvas.height=t}}]);return i}();r.default=u},{"../../../settings":101}],80:[function(e,t,r){"use strict";r.__esModule=true;r.default=i;function o(e){var t=document.createElement("canvas");t.width=6;t.height=1;var r=t.getContext("2d");r.fillStyle=e;r.fillRect(0,0,6,1);return t}function i(){if(typeof document==="undefined"){return false}var e=o("#ff00ff");var t=o("#ffff00");var r=document.createElement("canvas");r.width=6;r.height=1;var i=r.getContext("2d");i.globalCompositeOperation="multiply";i.drawImage(e,0,0);i.drawImage(t,2,0);var n=i.getImageData(2,0,1,1);if(!n){return false}var a=n.data;return a[0]===255&&a[1]===0&&a[2]===0}},{}],81:[function(e,t,r){"use strict";r.__esModule=true;r.default=s;var i=e("../../../const");var n=e("./canUseNewCanvasBlendModes");var a=o(n);function o(e){return e&&e.__esModule?e:{default:e}}function s(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];if((0,a.default)()){e[i.BLEND_MODES.NORMAL]="source-over";e[i.BLEND_MODES.ADD]="lighter";e[i.BLEND_MODES.MULTIPLY]="multiply";e[i.BLEND_MODES.SCREEN]="screen";e[i.BLEND_MODES.OVERLAY]="overlay";e[i.BLEND_MODES.DARKEN]="darken";e[i.BLEND_MODES.LIGHTEN]="lighten";e[i.BLEND_MODES.COLOR_DODGE]="color-dodge";e[i.BLEND_MODES.COLOR_BURN]="color-burn";e[i.BLEND_MODES.HARD_LIGHT]="hard-light";e[i.BLEND_MODES.SOFT_LIGHT]="soft-light";e[i.BLEND_MODES.DIFFERENCE]="difference";e[i.BLEND_MODES.EXCLUSION]="exclusion";e[i.BLEND_MODES.HUE]="hue";e[i.BLEND_MODES.SATURATION]="saturate";e[i.BLEND_MODES.COLOR]="color";e[i.BLEND_MODES.LUMINOSITY]="luminosity"}else{e[i.BLEND_MODES.NORMAL]="source-over";e[i.BLEND_MODES.ADD]="lighter";e[i.BLEND_MODES.MULTIPLY]="source-over";e[i.BLEND_MODES.SCREEN]="source-over";e[i.BLEND_MODES.OVERLAY]="source-over";e[i.BLEND_MODES.DARKEN]="source-over";e[i.BLEND_MODES.LIGHTEN]="source-over";e[i.BLEND_MODES.COLOR_DODGE]="source-over";e[i.BLEND_MODES.COLOR_BURN]="source-over";e[i.BLEND_MODES.HARD_LIGHT]="source-over";e[i.BLEND_MODES.SOFT_LIGHT]="source-over";e[i.BLEND_MODES.DIFFERENCE]="source-over";e[i.BLEND_MODES.EXCLUSION]="source-over";e[i.BLEND_MODES.HUE]="source-over";e[i.BLEND_MODES.SATURATION]="source-over";e[i.BLEND_MODES.COLOR]="source-over";e[i.BLEND_MODES.LUMINOSITY]="source-over"}e[i.BLEND_MODES.NORMAL_NPM]=e[i.BLEND_MODES.NORMAL];e[i.BLEND_MODES.ADD_NPM]=e[i.BLEND_MODES.ADD];e[i.BLEND_MODES.SCREEN_NPM]=e[i.BLEND_MODES.SCREEN];return e}},{"../../../const":46,"./canUseNewCanvasBlendModes":80}],82:[function(e,t,r){"use strict";r.__esModule=true;var i=e("../../const");var n=e("../../settings");var a=o(n);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var u=function(){function t(e){s(this,t);this.renderer=e;this.count=0;this.checkCount=0;this.maxIdle=a.default.GC_MAX_IDLE;this.checkCountMax=a.default.GC_MAX_CHECK_COUNT;this.mode=a.default.GC_MODE}t.prototype.update=function e(){this.count++;if(this.mode===i.GC_MODES.MANUAL){return}this.checkCount++;if(this.checkCount>this.checkCountMax){this.checkCount=0;this.run()}};t.prototype.run=function e(){var t=this.renderer.textureManager;var r=t._managedTextures;var i=false;for(var n=0;n<r.length;n++){var a=r[n];if(!a._glRenderTargets&&this.count-a.touched>this.maxIdle){t.destroyTexture(a,true);r[n]=null;i=true}}if(i){var o=0;for(var s=0;s<r.length;s++){if(r[s]!==null){r[o++]=r[s]}}r.length=o}};t.prototype.unload=function e(t){var r=this.renderer.textureManager;if(t._texture&&t._texture._glRenderTargets){r.destroyTexture(t._texture,true)}for(var i=t.children.length-1;i>=0;i--){this.unload(t.children[i])}};return t}();r.default=u},{"../../const":46,"../../settings":101}],83:[function(e,t,r){"use strict";r.__esModule=true;var l=e("pixi-gl-core");var h=e("../../const");var i=e("./utils/RenderTarget");var f=n(i);var s=e("../../utils");function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function t(e){a(this,t);this.renderer=e;this.gl=e.gl;this._managedTextures=[]}t.prototype.bindTexture=function e(){};t.prototype.getTexture=function e(){};t.prototype.updateTexture=function e(t,r){var i=this.gl;var n=!!t._glRenderTargets;if(!t.hasLoaded){return null}var a=this.renderer.boundTextures;if(r===undefined){r=0;for(var o=0;o<a.length;++o){if(a[o]===t){r=o;break}}}a[r]=t;i.activeTexture(i.TEXTURE0+r);var s=t._glTextures[this.renderer.CONTEXT_UID];if(!s){if(n){var u=new f.default(this.gl,t.width,t.height,t.scaleMode,t.resolution);u.resize(t.width,t.height);t._glRenderTargets[this.renderer.CONTEXT_UID]=u;s=u.texture}else{s=new l.GLTexture(this.gl,null,null,null,null);s.bind(r);s.premultiplyAlpha=true;s.upload(t.source)}t._glTextures[this.renderer.CONTEXT_UID]=s;t.on("update",this.updateTexture,this);t.on("dispose",this.destroyTexture,this);this._managedTextures.push(t);if(t.isPowerOfTwo){if(t.mipmap){s.enableMipmap()}if(t.wrapMode===h.WRAP_MODES.CLAMP){s.enableWrapClamp()}else if(t.wrapMode===h.WRAP_MODES.REPEAT){s.enableWrapRepeat()}else{s.enableWrapMirrorRepeat()}}else{s.enableWrapClamp()}if(t.scaleMode===h.SCALE_MODES.NEAREST){s.enableNearestScaling()}else{s.enableLinearScaling()}}else if(n){t._glRenderTargets[this.renderer.CONTEXT_UID].resize(t.width,t.height)}else{s.upload(t.source)}return s};t.prototype.destroyTexture=function e(t,r){t=t.baseTexture||t;if(!t.hasLoaded){return}var i=this.renderer.CONTEXT_UID;var n=t._glTextures;var a=t._glRenderTargets;if(n[i]){this.renderer.unbindTexture(t);n[i].destroy();t.off("update",this.updateTexture,this);t.off("dispose",this.destroyTexture,this);delete n[i];if(!r){var o=this._managedTextures.indexOf(t);if(o!==-1){(0,s.removeItems)(this._managedTextures,o,1)}}}if(a&&a[i]){a[i].destroy();delete a[i]}};t.prototype.removeAll=function e(){for(var t=0;t<this._managedTextures.length;++t){var r=this._managedTextures[t];if(r._glTextures[this.renderer.CONTEXT_UID]){delete r._glTextures[this.renderer.CONTEXT_UID]}}};t.prototype.destroy=function e(){for(var t=0;t<this._managedTextures.length;++t){var r=this._managedTextures[t];this.destroyTexture(r,true);r.off("update",this.updateTexture,this);r.off("dispose",this.destroyTexture,this)}this._managedTextures=null};return t}();r.default=o},{"../../const":46,"../../utils":125,"./utils/RenderTarget":96,"pixi-gl-core":15}],84:[function(e,t,r){"use strict";r.__esModule=true;var i=e("../SystemRenderer");var o=A(i);var n=e("./managers/MaskManager");var s=A(n);var a=e("./managers/StencilManager");var u=A(a);var l=e("./managers/FilterManager");var h=A(l);var f=e("./utils/RenderTarget");var c=A(f);var d=e("./utils/ObjectRenderer");var p=A(d);var v=e("./TextureManager");var y=A(v);var g=e("../../textures/BaseTexture");var m=A(g);var _=e("./TextureGarbageCollector");var b=A(_);var x=e("./WebGLState");var T=A(x);var w=e("./utils/mapWebGLDrawModesToPixi");var E=A(w);var S=e("./utils/validateContext");var O=A(S);var M=e("../../utils");var P=e("pixi-gl-core");var C=A(P);var R=e("../../const");function A(e){return e&&e.__esModule?e:{default:e}}function I(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function D(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function L(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var N=0;var F=function(n){L(a,n);function a(e,t,r){I(this,a);var i=D(this,n.call(this,"WebGL",e,t,r));i.legacy=i.options.legacy;if(i.legacy){C.default.VertexArrayObject.FORCE_NATIVE=true}i.type=R.RENDERER_TYPE.WEBGL;i.handleContextLost=i.handleContextLost.bind(i);i.handleContextRestored=i.handleContextRestored.bind(i);i.view.addEventListener("webglcontextlost",i.handleContextLost,false);i.view.addEventListener("webglcontextrestored",i.handleContextRestored,false);i._contextOptions={alpha:i.transparent,antialias:i.options.antialias,premultipliedAlpha:i.transparent&&i.transparent!=="notMultiplied",stencil:true,preserveDrawingBuffer:i.options.preserveDrawingBuffer,powerPreference:i.options.powerPreference};i._backgroundColorRgba[3]=i.transparent?0:1;i.maskManager=new s.default(i);i.stencilManager=new u.default(i);i.emptyRenderer=new p.default(i);i.currentRenderer=i.emptyRenderer;i.textureManager=null;i.filterManager=null;i.initPlugins();if(i.options.context){(0,O.default)(i.options.context)}i.gl=i.options.context||C.default.createContext(i.view,i._contextOptions);i.CONTEXT_UID=N++;i.state=new T.default(i.gl);i.renderingToScreen=true;i.boundTextures=null;i._activeShader=null;i._activeVao=null;i._activeRenderTarget=null;i._initContext();i.drawModes=(0,E.default)(i.gl);i._nextTextureLocation=0;i.setBlendMode(0);return i}a.prototype._initContext=function e(){var t=this.gl;if(t.isContextLost()&&t.getExtension("WEBGL_lose_context")){t.getExtension("WEBGL_lose_context").restoreContext()}var r=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null;this._activeVao=null;this.boundTextures=new Array(r);this.emptyTextures=new Array(r);this.textureManager=new y.default(this);this.filterManager=new h.default(this);this.textureGC=new b.default(this);this.state.resetToDefault();this.rootRenderTarget=new c.default(t,this.width,this.height,null,this.resolution,true);this.rootRenderTarget.clearColor=this._backgroundColorRgba;this.bindRenderTarget(this.rootRenderTarget);var i=new C.default.GLTexture.fromData(t,null,1,1);var n={_glTextures:{}};n._glTextures[this.CONTEXT_UID]={};for(var a=0;a<r;a++){var o=new m.default;o._glTextures[this.CONTEXT_UID]=i;this.boundTextures[a]=n;this.emptyTextures[a]=o;this.bindTexture(null,a)}this.emit("context",t);this.resize(this.screen.width,this.screen.height)};a.prototype.render=function e(t,r,i,n,a){this.renderingToScreen=!r;this.emit("prerender");if(!this.gl||this.gl.isContextLost()){return}this._nextTextureLocation=0;if(!r){this._lastObjectRendered=t}if(!a){var o=t.parent;t.parent=this._tempDisplayObjectParent;t.updateTransform();t.parent=o}this.bindRenderTexture(r,n);this.currentRenderer.start();if(i!==undefined?i:this.clearBeforeRender){this._activeRenderTarget.clear()}t.renderWebGL(this);this.currentRenderer.flush();this.textureGC.update();this.emit("postrender")};a.prototype.setObjectRenderer=function e(t){if(this.currentRenderer===t){return}this.currentRenderer.stop();this.currentRenderer=t;this.currentRenderer.start()};a.prototype.flush=function e(){this.setObjectRenderer(this.emptyRenderer)};a.prototype.resize=function e(t,r){o.default.prototype.resize.call(this,t,r);this.rootRenderTarget.resize(t,r);if(this._activeRenderTarget===this.rootRenderTarget){this.rootRenderTarget.activate();if(this._activeShader){this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(true)}}};a.prototype.setBlendMode=function e(t){this.state.setBlendMode(t)};a.prototype.clear=function e(t){this._activeRenderTarget.clear(t)};a.prototype.setTransform=function e(t){this._activeRenderTarget.transform=t};a.prototype.clearRenderTexture=function e(t,r){var i=t.baseTexture;var n=i._glRenderTargets[this.CONTEXT_UID];if(n){n.clear(r)}return this};a.prototype.bindRenderTexture=function e(t,r){var i=void 0;if(t){var n=t.baseTexture;if(!n._glRenderTargets[this.CONTEXT_UID]){this.textureManager.updateTexture(n,0)}this.unbindTexture(n);i=n._glRenderTargets[this.CONTEXT_UID];i.setFrame(t.frame)}else{i=this.rootRenderTarget}i.transform=r;this.bindRenderTarget(i);return this};a.prototype.bindRenderTarget=function e(t){if(t!==this._activeRenderTarget){this._activeRenderTarget=t;t.activate();if(this._activeShader){this._activeShader.uniforms.projectionMatrix=t.projectionMatrix.toArray(true)}this.stencilManager.setMaskStack(t.stencilMaskStack)}return this};a.prototype.bindShader=function e(t,r){if(this._activeShader!==t){this._activeShader=t;t.bind();if(r!==false){t.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(true)}}return this};a.prototype.bindTexture=function e(t,r,i){t=t||this.emptyTextures[r];t=t.baseTexture||t;t.touched=this.textureGC.count;if(!i){for(var n=0;n<this.boundTextures.length;n++){if(this.boundTextures[n]===t){return n}}if(r===undefined){this._nextTextureLocation++;this._nextTextureLocation%=this.boundTextures.length;r=this.boundTextures.length-this._nextTextureLocation-1}}else{r=r||0}var a=this.gl;var o=t._glTextures[this.CONTEXT_UID];if(!o){this.textureManager.updateTexture(t,r)}else{this.boundTextures[r]=t;a.activeTexture(a.TEXTURE0+r);a.bindTexture(a.TEXTURE_2D,o.texture)}return r};a.prototype.unbindTexture=function e(t){var r=this.gl;t=t.baseTexture||t;for(var i=0;i<this.boundTextures.length;i++){if(this.boundTextures[i]===t){this.boundTextures[i]=this.emptyTextures[i];r.activeTexture(r.TEXTURE0+i);r.bindTexture(r.TEXTURE_2D,this.emptyTextures[i]._glTextures[this.CONTEXT_UID].texture)}}return this};a.prototype.createVao=function e(){return new C.default.VertexArrayObject(this.gl,this.state.attribState)};a.prototype.bindVao=function e(t){if(this._activeVao===t){return this}if(t){t.bind()}else if(this._activeVao){this._activeVao.unbind()}this._activeVao=t;return this};a.prototype.reset=function e(){this.setObjectRenderer(this.emptyRenderer);this.bindVao(null);this._activeShader=null;this._activeRenderTarget=this.rootRenderTarget;for(var t=0;t<this.boundTextures.length;t++){this.boundTextures[t]=this.emptyTextures[t]}this.rootRenderTarget.activate();this.state.resetToDefault();return this};a.prototype.handleContextLost=function e(t){t.preventDefault()};a.prototype.handleContextRestored=function e(){this.textureManager.removeAll();this.filterManager.destroy(true);this._initContext()};a.prototype.destroy=function e(t){this.destroyPlugins();this.view.removeEventListener("webglcontextlost",this.handleContextLost);this.view.removeEventListener("webglcontextrestored",this.handleContextRestored);this.textureManager.destroy();n.prototype.destroy.call(this,t);this.uid=0;this.maskManager.destroy();this.stencilManager.destroy();this.filterManager.destroy();this.maskManager=null;this.filterManager=null;this.textureManager=null;this.currentRenderer=null;this.handleContextLost=null;this.handleContextRestored=null;this._contextOptions=null;this.gl.useProgram(null);if(this.gl.getExtension("WEBGL_lose_context")){this.gl.getExtension("WEBGL_lose_context").loseContext()}this.gl=null};return a}(o.default);r.default=F;M.pluginTarget.mixin(F)},{"../../const":46,"../../textures/BaseTexture":112,"../../utils":125,"../SystemRenderer":76,"./TextureGarbageCollector":82,"./TextureManager":83,"./WebGLState":85,"./managers/FilterManager":90,"./managers/MaskManager":91,"./managers/StencilManager":92,"./utils/ObjectRenderer":94,"./utils/RenderTarget":96,"./utils/mapWebGLDrawModesToPixi":99,"./utils/validateContext":100,"pixi-gl-core":15}],85:[function(e,t,r){"use strict";r.__esModule=true;var i=e("./utils/mapWebGLBlendModesToPixi");var n=a(i);function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var s=0;var u=1;var l=2;var h=3;var f=4;var c=function(){function t(e){o(this,t);this.activeState=new Uint8Array(16);this.defaultState=new Uint8Array(16);this.defaultState[0]=1;this.stackIndex=0;this.stack=[];this.gl=e;this.maxAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS);this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)};this.blendModes=(0,n.default)(e);this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")}t.prototype.push=function e(){var t=this.stack[this.stackIndex];if(!t){t=this.stack[this.stackIndex]=new Uint8Array(16)}++this.stackIndex;for(var r=0;r<this.activeState.length;r++){t[r]=this.activeState[r]}};t.prototype.pop=function e(){var t=this.stack[--this.stackIndex];this.setState(t)};t.prototype.setState=function e(t){this.setBlend(t[s]);this.setDepthTest(t[u]);this.setFrontFace(t[l]);this.setCullFace(t[h]);this.setBlendMode(t[f])};t.prototype.setBlend=function e(t){t=t?1:0;if(this.activeState[s]===t){return}this.activeState[s]=t;this.gl[t?"enable":"disable"](this.gl.BLEND)};t.prototype.setBlendMode=function e(t){if(t===this.activeState[f]){return}this.activeState[f]=t;var r=this.blendModes[t];if(r.length===2){this.gl.blendFunc(r[0],r[1])}else{this.gl.blendFuncSeparate(r[0],r[1],r[2],r[3])}};t.prototype.setDepthTest=function e(t){t=t?1:0;if(this.activeState[u]===t){return}this.activeState[u]=t;this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)};t.prototype.setCullFace=function e(t){t=t?1:0;if(this.activeState[h]===t){return}this.activeState[h]=t;this.gl[t?"enable":"disable"](this.gl.CULL_FACE)};t.prototype.setFrontFace=function e(t){t=t?1:0;if(this.activeState[l]===t){return}this.activeState[l]=t;this.gl.frontFace(this.gl[t?"CW":"CCW"])};t.prototype.resetAttributes=function e(){for(var t=0;t<this.attribState.tempAttribState.length;t++){this.attribState.tempAttribState[t]=0}for(var r=0;r<this.attribState.attribState.length;r++){this.attribState.attribState[r]=0}for(var i=1;i<this.maxAttribs;i++){this.gl.disableVertexAttribArray(i)}};t.prototype.resetToDefault=function e(){if(this.nativeVaoExtension){this.nativeVaoExtension.bindVertexArrayOES(null)}this.resetAttributes();for(var t=0;t<this.activeState.length;++t){this.activeState[t]=32}this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,false);this.setState(this.defaultState)};return t}();r.default=c},{"./utils/mapWebGLBlendModesToPixi":98}],86:[function(e,t,r){"use strict";r.__esModule=true;var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var n=e("./extractUniformsFromSrc");var a=h(n);var o=e("../../../utils");var s=e("../../../const");var u=e("../../../settings");var l=h(u);function h(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var c={};var d=function(){function n(e,t,r){f(this,n);this.vertexSrc=e||n.defaultVertexSrc;this.fragmentSrc=t||n.defaultFragmentSrc;this._blendMode=s.BLEND_MODES.NORMAL;this.uniformData=r||(0,a.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler");this.uniforms={};for(var i in this.uniformData){this.uniforms[i]=this.uniformData[i].value;if(this.uniformData[i].type){this.uniformData[i].type=this.uniformData[i].type.toLowerCase()}}this.glShaders={};if(!c[this.vertexSrc+this.fragmentSrc]){c[this.vertexSrc+this.fragmentSrc]=(0,o.uid)()}this.glShaderKey=c[this.vertexSrc+this.fragmentSrc];this.padding=4;this.resolution=l.default.RESOLUTION;this.enabled=true;this.autoFit=true}n.prototype.apply=function e(t,r,i,n,a){t.applyFilter(this,r,i,n)};i(n,[{key:"blendMode",get:function e(){return this._blendMode},set:function e(t){this._blendMode=t}}],[{key:"defaultVertexSrc",get:function e(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function e(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]);return n}();r.default=d},{"../../../const":46,"../../../settings":101,"../../../utils":125,"./extractUniformsFromSrc":87}],87:[function(e,t,r){"use strict";r.__esModule=true;r.default=o;var i=e("pixi-gl-core");var n=a(i);function a(e){return e&&e.__esModule?e:{default:e}}var f=n.default.shader.defaultValue;function o(e,t,r){var i=s(e,r);var n=s(t,r);return Object.assign(i,n)}function s(e){var t=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$");var r={};var i=void 0;var n=e.replace(/\s+/g," ").split(/\s*;\s*/);for(var a=0;a<n.length;a++){var o=n[a].trim();if(o.indexOf("uniform")>-1){var s=o.split(" ");var u=s[1];var l=s[2];var h=1;if(l.indexOf("[")>-1){i=l.split(/\[|]/);l=i[0];h*=Number(i[1])}if(!l.match(t)){r[l]={value:f(u,h),name:l,type:u}}}}return r}},{"pixi-gl-core":15}],88:[function(e,t,r){"use strict";r.__esModule=true;r.calculateScreenSpaceMatrix=i;r.calculateNormalizedScreenSpaceMatrix=n;r.calculateSpriteMatrix=a;var s=e("../../../math");function i(e,t,r){var i=e.identity();i.translate(t.x/r.width,t.y/r.height);i.scale(r.width,r.height);return i}function n(e,t,r){var i=e.identity();i.translate(t.x/r.width,t.y/r.height);var n=r.width/t.width;var a=r.height/t.height;i.scale(n,a);return i}function a(e,t,r,i){var n=i._texture.orig;var a=e.set(r.width,0,0,r.height,t.x,t.y);var o=i.worldTransform.copy(s.Matrix.TEMP_MATRIX);o.invert();a.prepend(o);a.scale(1/n.width,1/n.height);a.translate(i.anchor.x,i.anchor.y);return a}},{"../../../math":70}],89:[function(e,t,r){"use strict";r.__esModule=true;var i=e("../Filter");var n=l(i);var a=e("../../../../math");var o=e("path");var s=e("../../../../textures/TextureMatrix");var u=l(s);function l(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var d=function(i){c(n,i);function n(e){h(this,n);var t=new a.Matrix;var r=f(this,i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));e.renderable=false;r.maskSprite=e;r.maskMatrix=t;return r}n.prototype.apply=function e(t,r,i){var n=this.maskSprite;var a=this.maskSprite.texture;if(!a.valid){return}if(!a.transform){a.transform=new u.default(a,0)}a.transform.update();this.uniforms.mask=a;this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(a.transform.mapCoord);this.uniforms.alpha=n.worldAlpha;this.uniforms.maskClamp=a.transform.uClampFrame;t.applyFilter(this,r,i)};return n}(n.default);r.default=d},{"../../../../math":70,"../../../../textures/TextureMatrix":116,"../Filter":86,path:8}],90:[function(e,t,r){"use strict";r.__esModule=true;var i=e("./WebGLManager");var n=g(i);var a=e("../utils/RenderTarget");var u=g(a);var o=e("../utils/Quad");var s=g(o);var l=e("../../../math");var h=e("../../../Shader");var f=g(h);var c=e("../filters/filterTransforms");var d=y(c);var p=e("bit-twiddle");var v=g(p);function y(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function g(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function _(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}function b(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var x=function e(){b(this,e);this.renderTarget=null;this.sourceFrame=new l.Rectangle;this.destinationFrame=new l.Rectangle;this.filters=[];this.target=null;this.resolution=1};var T=function(r){_(i,r);function i(e){b(this,i);var t=m(this,r.call(this,e));t.gl=t.renderer.gl;t.quad=new s.default(t.gl,e.state.attribState);t.shaderCache={};t.pool={};t.filterData=null;t.managedFilters=[];return t}i.prototype.pushFilter=function e(t,r){var i=this.renderer;var n=this.filterData;if(!n){n=this.renderer._activeRenderTarget.filterStack;var a=new x;a.sourceFrame=a.destinationFrame=this.renderer._activeRenderTarget.size;a.renderTarget=i._activeRenderTarget;this.renderer._activeRenderTarget.filterData=n={index:0,stack:[a]};this.filterData=n}var o=n.stack[++n.index];if(!o){o=n.stack[n.index]=new x}var s=r[0].resolution;var u=r[0].padding|0;var l=t.filterArea||t.getBounds(true);var h=o.sourceFrame;var f=o.destinationFrame;h.x=(l.x*s|0)/s;h.y=(l.y*s|0)/s;h.width=(l.width*s|0)/s;h.height=(l.height*s|0)/s;if(n.stack[0].renderTarget.transform){}else if(r[0].autoFit){h.fit(n.stack[0].destinationFrame)}h.pad(u);f.width=h.width;f.height=h.height;var c=this.getPotRenderTarget(i.gl,h.width,h.height,s);o.target=t;o.filters=r;o.resolution=s;o.renderTarget=c;c.setFrame(f,h);i.bindRenderTarget(c);c.clear()};i.prototype.popFilter=function e(){var t=this.filterData;var r=t.stack[t.index-1];var i=t.stack[t.index];this.quad.map(i.renderTarget.size,i.sourceFrame).upload();var n=i.filters;if(n.length===1){n[0].apply(this,i.renderTarget,r.renderTarget,false,i);this.freePotRenderTarget(i.renderTarget)}else{var a=i.renderTarget;var o=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,i.resolution);o.setFrame(i.destinationFrame,i.sourceFrame);o.clear();var s=0;for(s=0;s<n.length-1;++s){n[s].apply(this,a,o,true,i);var u=a;a=o;o=u}n[s].apply(this,a,r.renderTarget,false,i);this.freePotRenderTarget(a);this.freePotRenderTarget(o)}t.index--;if(t.index===0){this.filterData=null}};i.prototype.applyFilter=function e(t,r,i,n){var a=this.renderer;var o=a.gl;var s=t.glShaders[a.CONTEXT_UID];if(!s){if(t.glShaderKey){s=this.shaderCache[t.glShaderKey];if(!s){s=new f.default(this.gl,t.vertexSrc,t.fragmentSrc);t.glShaders[a.CONTEXT_UID]=this.shaderCache[t.glShaderKey]=s;this.managedFilters.push(t)}}else{s=t.glShaders[a.CONTEXT_UID]=new f.default(this.gl,t.vertexSrc,t.fragmentSrc);this.managedFilters.push(t)}a.bindVao(null);this.quad.initVao(s)}a.bindVao(this.quad.vao);a.bindRenderTarget(i);if(n){o.disable(o.SCISSOR_TEST);a.clear();o.enable(o.SCISSOR_TEST)}if(i===a.maskManager.scissorRenderTarget){a.maskManager.pushScissorMask(null,a.maskManager.scissorData)}a.bindShader(s);var u=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=u;this.syncUniforms(s,t);a.state.setBlendMode(t.blendMode);o.activeTexture(o.TEXTURE0);o.bindTexture(o.TEXTURE_2D,r.texture.texture);this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0);o.bindTexture(o.TEXTURE_2D,u._glTextures[this.renderer.CONTEXT_UID].texture)};i.prototype.syncUniforms=function e(t,r){var i=r.uniformData;var n=r.uniforms;var a=1;var o=void 0;if(t.uniforms.filterArea){o=this.filterData.stack[this.filterData.index];var s=t.uniforms.filterArea;s[0]=o.renderTarget.size.width;s[1]=o.renderTarget.size.height;s[2]=o.sourceFrame.x;s[3]=o.sourceFrame.y;t.uniforms.filterArea=s}if(t.uniforms.filterClamp){o=o||this.filterData.stack[this.filterData.index];var u=t.uniforms.filterClamp;u[0]=0;u[1]=0;u[2]=(o.sourceFrame.width-1)/o.renderTarget.size.width;u[3]=(o.sourceFrame.height-1)/o.renderTarget.size.height;t.uniforms.filterClamp=u}for(var l in i){var h=i[l].type;if(h==="sampler2d"&&n[l]!==0){if(n[l].baseTexture){t.uniforms[l]=this.renderer.bindTexture(n[l].baseTexture,a)}else{t.uniforms[l]=a;var f=this.renderer.gl;this.renderer.boundTextures[a]=this.renderer.emptyTextures[a];f.activeTexture(f.TEXTURE0+a);n[l].texture.bind()}a++}else if(h==="mat3"){if(n[l].a!==undefined){t.uniforms[l]=n[l].toArray(true)}else{t.uniforms[l]=n[l]}}else if(h==="vec2"){if(n[l].x!==undefined){var c=t.uniforms[l]||new Float32Array(2);c[0]=n[l].x;c[1]=n[l].y;t.uniforms[l]=c}else{t.uniforms[l]=n[l]}}else if(h==="float"){if(t.uniforms.data[l].value!==i[l]){t.uniforms[l]=n[l]}}else{t.uniforms[l]=n[l]}}};i.prototype.getRenderTarget=function e(t,r){var i=this.filterData.stack[this.filterData.index];var n=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,r||i.resolution);n.setFrame(i.destinationFrame,i.sourceFrame);return n};i.prototype.returnRenderTarget=function e(t){this.freePotRenderTarget(t)};i.prototype.calculateScreenSpaceMatrix=function e(t){var r=this.filterData.stack[this.filterData.index];return d.calculateScreenSpaceMatrix(t,r.sourceFrame,r.renderTarget.size)};i.prototype.calculateNormalizedScreenSpaceMatrix=function e(t){var r=this.filterData.stack[this.filterData.index];return d.calculateNormalizedScreenSpaceMatrix(t,r.sourceFrame,r.renderTarget.size,r.destinationFrame)};i.prototype.calculateSpriteMatrix=function e(t,r){var i=this.filterData.stack[this.filterData.index];return d.calculateSpriteMatrix(t,i.sourceFrame,i.renderTarget.size,r)};i.prototype.destroy=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var r=this.renderer;var i=this.managedFilters;for(var n=0;n<i.length;n++){if(!t){i[n].glShaders[r.CONTEXT_UID].destroy()}delete i[n].glShaders[r.CONTEXT_UID]}this.shaderCache={};if(!t){this.emptyPool()}else{this.pool={}}};i.prototype.getPotRenderTarget=function e(t,r,i,n){r=v.default.nextPow2(r*n);i=v.default.nextPow2(i*n);var a=(r&65535)<<16|i&65535;if(!this.pool[a]){this.pool[a]=[]}var o=this.pool[a].pop();if(!o){var s=this.renderer.boundTextures[0];t.activeTexture(t.TEXTURE0);o=new u.default(t,r,i,null,1);t.bindTexture(t.TEXTURE_2D,s._glTextures[this.renderer.CONTEXT_UID].texture)}o.resolution=n;o.defaultFrame.width=o.size.width=r/n;o.defaultFrame.height=o.size.height=i/n;return o};i.prototype.emptyPool=function e(){for(var t in this.pool){var r=this.pool[t];if(r){for(var i=0;i<r.length;i++){r[i].destroy(true)}}}this.pool={}};i.prototype.freePotRenderTarget=function e(t){var r=t.size.width*t.resolution;var i=t.size.height*t.resolution;var n=(r&65535)<<16|i&65535;this.pool[n].push(t)};return i}(n.default);r.default=T},{"../../../Shader":44,"../../../math":70,"../filters/filterTransforms":88,"../utils/Quad":95,"../utils/RenderTarget":96,"./WebGLManager":93,"bit-twiddle":1}],91:[function(e,t,r){"use strict";r.__esModule=true;var i=e("./WebGLManager");var n=s(i);var a=e("../filters/spriteMask/SpriteMaskFilter");var o=s(a);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var f=function(r){h(i,r);function i(e){u(this,i);var t=l(this,r.call(this,e));t.scissor=false;t.scissorData=null;t.scissorRenderTarget=null;t.enableScissor=true;t.alphaMaskPool=[];t.alphaMaskIndex=0;return t}i.prototype.pushMask=function e(t,r){if(r.texture){this.pushSpriteMask(t,r)}else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&r.isFastRect()){var i=r.worldTransform;var n=Math.atan2(i.b,i.a);n=Math.round(n*(180/Math.PI));if(n%90){this.pushStencilMask(r)}else{this.pushScissorMask(t,r)}}else{this.pushStencilMask(r)}};i.prototype.popMask=function e(t,r){if(r.texture){this.popSpriteMask(t,r)}else if(this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length){this.popScissorMask(t,r)}else{this.popStencilMask(t,r)}};i.prototype.pushSpriteMask=function e(t,r){var i=this.alphaMaskPool[this.alphaMaskIndex];if(!i){i=this.alphaMaskPool[this.alphaMaskIndex]=[new o.default(r)]}i[0].resolution=this.renderer.resolution;i[0].maskSprite=r;t.filterArea=r.getBounds(true);this.renderer.filterManager.pushFilter(t,i);this.alphaMaskIndex++};i.prototype.popSpriteMask=function e(){this.renderer.filterManager.popFilter();this.alphaMaskIndex--};i.prototype.pushStencilMask=function e(t){this.renderer.currentRenderer.stop();this.renderer.stencilManager.pushStencil(t)};i.prototype.popStencilMask=function e(){this.renderer.currentRenderer.stop();this.renderer.stencilManager.popStencil()};i.prototype.pushScissorMask=function e(t,r){r.renderable=true;var i=this.renderer._activeRenderTarget;var n=r.getBounds();n.fit(i.size);r.renderable=false;this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var a=this.renderer.resolution;this.renderer.gl.scissor(n.x*a,(i.root?i.size.height-n.y-n.height:n.y)*a,n.width*a,n.height*a);this.scissorRenderTarget=i;this.scissorData=r;this.scissor=true};i.prototype.popScissorMask=function e(){this.scissorRenderTarget=null;this.scissorData=null;this.scissor=false;var t=this.renderer.gl;t.disable(t.SCISSOR_TEST)};return i}(n.default);r.default=f},{"../filters/spriteMask/SpriteMaskFilter":89,"./WebGLManager":93}],92:[function(e,t,r){"use strict";r.__esModule=true;var i=e("./WebGLManager");var n=a(i);function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var l=function(r){u(i,r);function i(e){o(this,i);var t=s(this,r.call(this,e));t.stencilMaskStack=null;return t}i.prototype.setMaskStack=function e(t){this.stencilMaskStack=t;var r=this.renderer.gl;if(t.length===0){r.disable(r.STENCIL_TEST)}else{r.enable(r.STENCIL_TEST)}};i.prototype.pushStencil=function e(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);this.renderer._activeRenderTarget.attachStencilBuffer();var r=this.renderer.gl;var i=this.stencilMaskStack.length;if(i===0){r.enable(r.STENCIL_TEST)}this.stencilMaskStack.push(t);r.colorMask(false,false,false,false);r.stencilFunc(r.EQUAL,i,this._getBitwiseMask());r.stencilOp(r.KEEP,r.KEEP,r.INCR);this.renderer.plugins.graphics.render(t);this._useCurrent()};i.prototype.popStencil=function e(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var t=this.renderer.gl;var r=this.stencilMaskStack.pop();if(this.stencilMaskStack.length===0){t.disable(t.STENCIL_TEST);t.clear(t.STENCIL_BUFFER_BIT);t.clearStencil(0)}else{t.colorMask(false,false,false,false);t.stencilOp(t.KEEP,t.KEEP,t.DECR);this.renderer.plugins.graphics.render(r);this._useCurrent()}};i.prototype._useCurrent=function e(){var t=this.renderer.gl;t.colorMask(true,true,true,true);t.stencilFunc(t.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask());t.stencilOp(t.KEEP,t.KEEP,t.KEEP)};i.prototype._getBitwiseMask=function e(){return(1<<this.stencilMaskStack.length)-1};i.prototype.destroy=function e(){n.default.prototype.destroy.call(this);this.stencilMaskStack.stencilStack=null};return i}(n.default);r.default=l},{"./WebGLManager":93}],93:[function(e,t,r){"use strict";r.__esModule=true;function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var n=function(){function t(e){i(this,t);this.renderer=e;this.renderer.on("context",this.onContextChange,this)}t.prototype.onContextChange=function e(){};t.prototype.destroy=function e(){this.renderer.off("context",this.onContextChange,this);this.renderer=null};return t}();r.default=n},{}],94:[function(e,t,r){"use strict";r.__esModule=true;var i=e("../managers/WebGLManager");var n=a(i);function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var l=function(e){u(t,e);function t(){o(this,t);return s(this,e.apply(this,arguments))}t.prototype.start=function e(){};t.prototype.stop=function e(){this.flush()};t.prototype.flush=function e(){};t.prototype.render=function e(t){};return t}(n.default);r.default=l},{"../managers/WebGLManager":93}],95:[function(e,t,r){"use strict";r.__esModule=true;var i=e("pixi-gl-core");var n=s(i);var a=e("../../../utils/createIndicesForQuads");var o=s(a);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var l=function(){function i(e,t){u(this,i);this.gl=e;this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]);this.uvs=new Float32Array([0,0,1,0,1,1,0,1]);this.interleaved=new Float32Array(8*2);for(var r=0;r<4;r++){this.interleaved[r*4]=this.vertices[r*2];this.interleaved[r*4+1]=this.vertices[r*2+1];this.interleaved[r*4+2]=this.uvs[r*2];this.interleaved[r*4+3]=this.uvs[r*2+1]}this.indices=(0,o.default)(1);this.vertexBuffer=n.default.GLBuffer.createVertexBuffer(e,this.interleaved,e.STATIC_DRAW);this.indexBuffer=n.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW);this.vao=new n.default.VertexArrayObject(e,t)}i.prototype.initVao=function e(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,false,4*4,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,false,4*4,2*4)};i.prototype.map=function e(t,r){var i=0;var n=0;this.uvs[0]=i;this.uvs[1]=n;this.uvs[2]=i+r.width/t.width;this.uvs[3]=n;this.uvs[4]=i+r.width/t.width;this.uvs[5]=n+r.height/t.height;this.uvs[6]=i;this.uvs[7]=n+r.height/t.height;i=r.x;n=r.y;this.vertices[0]=i;this.vertices[1]=n;this.vertices[2]=i+r.width;this.vertices[3]=n;this.vertices[4]=i+r.width;this.vertices[5]=n+r.height;this.vertices[6]=i;this.vertices[7]=n+r.height;return this};i.prototype.upload=function e(){for(var t=0;t<4;t++){this.interleaved[t*4]=this.vertices[t*2];this.interleaved[t*4+1]=this.vertices[t*2+1];this.interleaved[t*4+2]=this.uvs[t*2];this.interleaved[t*4+3]=this.uvs[t*2+1]}this.vertexBuffer.upload(this.interleaved);return this};i.prototype.destroy=function e(){var t=this.gl;t.deleteBuffer(this.vertexBuffer);t.deleteBuffer(this.indexBuffer)};return i}();r.default=l},{"../../../utils/createIndicesForQuads":123,"pixi-gl-core":15}],96:[function(e,t,r){"use strict";r.__esModule=true;var s=e("../../../math");var u=e("../../../const");var i=e("../../../settings");var l=n(i);var h=e("pixi-gl-core");function n(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=function(){function o(e,t,r,i,n,a){f(this,o);this.gl=e;this.frameBuffer=null;this.texture=null;this.clearColor=[0,0,0,0];this.size=new s.Rectangle(0,0,1,1);this.resolution=n||l.default.RESOLUTION;this.projectionMatrix=new s.Matrix;this.transform=null;this.frame=null;this.defaultFrame=new s.Rectangle;this.destinationFrame=null;this.sourceFrame=null;this.stencilBuffer=null;this.stencilMaskStack=[];this.filterData=null;this.scaleMode=i!==undefined?i:l.default.SCALE_MODE;this.root=a;if(!this.root){this.frameBuffer=h.GLFramebuffer.createRGBA(e,100,100);if(this.scaleMode===u.SCALE_MODES.NEAREST){this.frameBuffer.texture.enableNearestScaling()}else{this.frameBuffer.texture.enableLinearScaling()}this.texture=this.frameBuffer.texture}else{this.frameBuffer=new h.GLFramebuffer(e,100,100);this.frameBuffer.framebuffer=null}this.setFrame();this.resize(t,r)}o.prototype.clear=function e(t){var r=t||this.clearColor;this.frameBuffer.clear(r[0],r[1],r[2],r[3])};o.prototype.attachStencilBuffer=function e(){if(!this.root){this.frameBuffer.enableStencil()}};o.prototype.setFrame=function e(t,r){this.destinationFrame=t||this.destinationFrame||this.defaultFrame;this.sourceFrame=r||this.sourceFrame||this.destinationFrame};o.prototype.activate=function e(){var t=this.gl;this.frameBuffer.bind();this.calculateProjection(this.destinationFrame,this.sourceFrame);if(this.transform){this.projectionMatrix.append(this.transform)}if(this.destinationFrame!==this.sourceFrame){t.enable(t.SCISSOR_TEST);t.scissor(this.destinationFrame.x|0,this.destinationFrame.y|0,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)}else{t.disable(t.SCISSOR_TEST)}t.viewport(this.destinationFrame.x|0,this.destinationFrame.y|0,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)};o.prototype.calculateProjection=function e(t,r){var i=this.projectionMatrix;r=r||t;i.identity();if(!this.root){i.a=1/t.width*2;i.d=1/t.height*2;i.tx=-1-r.x*i.a;i.ty=-1-r.y*i.d}else{i.a=1/t.width*2;i.d=-1/t.height*2;i.tx=-1-r.x*i.a;i.ty=1-r.y*i.d}};o.prototype.resize=function e(t,r){t=t|0;r=r|0;if(this.size.width===t&&this.size.height===r){return}this.size.width=t;this.size.height=r;this.defaultFrame.width=t;this.defaultFrame.height=r;this.frameBuffer.resize(t*this.resolution,r*this.resolution);var i=this.frame||this.size;this.calculateProjection(i)};o.prototype.destroy=function e(){this.frameBuffer.destroy();this.frameBuffer=null;this.texture=null};return o}();r.default=a},{"../../../const":46,"../../../math":70,"../../../settings":101,"pixi-gl-core":15}],97:[function(e,t,r){"use strict";r.__esModule=true;r.default=a;var i=e("pixi-gl-core");var o=n(i);function n(e){return e&&e.__esModule?e:{default:e}}var s=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function a(e,t){var r=!t;if(e===0){throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`")}if(r){var i=document.createElement("canvas");i.width=1;i.height=1;t=o.default.createContext(i)}var n=t.createShader(t.FRAGMENT_SHADER);while(true){var a=s.replace(/%forloop%/gi,u(e));t.shaderSource(n,a);t.compileShader(n);if(!t.getShaderParameter(n,t.COMPILE_STATUS)){e=e/2|0}else{break}}if(r){if(t.getExtension("WEBGL_lose_context")){t.getExtension("WEBGL_lose_context").loseContext()}}return e}function u(e){var t="";for(var r=0;r<e;++r){if(r>0){t+="\nelse "}if(r<e-1){t+="if(test == "+r+".0){}"}}return t}},{"pixi-gl-core":15}],98:[function(e,t,r){"use strict";r.__esModule=true;r.default=n;var i=e("../../../const");function n(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];t[i.BLEND_MODES.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA];t[i.BLEND_MODES.ADD]=[e.ONE,e.DST_ALPHA];t[i.BLEND_MODES.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA];t[i.BLEND_MODES.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR];t[i.BLEND_MODES.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA];t[i.BLEND_MODES.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA];t[i.BLEND_MODES.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA];t[i.BLEND_MODES.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA];t[i.BLEND_MODES.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA];t[i.BLEND_MODES.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA];t[i.BLEND_MODES.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA];t[i.BLEND_MODES.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA];t[i.BLEND_MODES.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA];t[i.BLEND_MODES.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA];t[i.BLEND_MODES.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA];t[i.BLEND_MODES.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA];t[i.BLEND_MODES.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA];t[i.BLEND_MODES.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA];t[i.BLEND_MODES.ADD_NPM]=[e.SRC_ALPHA,e.DST_ALPHA,e.ONE,e.DST_ALPHA];t[i.BLEND_MODES.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_COLOR];return t}},{"../../../const":46}],99:[function(e,t,r){"use strict";r.__esModule=true;r.default=n;var i=e("../../../const");function n(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};t[i.DRAW_MODES.POINTS]=e.POINTS;t[i.DRAW_MODES.LINES]=e.LINES;t[i.DRAW_MODES.LINE_LOOP]=e.LINE_LOOP;t[i.DRAW_MODES.LINE_STRIP]=e.LINE_STRIP;t[i.DRAW_MODES.TRIANGLES]=e.TRIANGLES;t[i.DRAW_MODES.TRIANGLE_STRIP]=e.TRIANGLE_STRIP;t[i.DRAW_MODES.TRIANGLE_FAN]=e.TRIANGLE_FAN;return t}},{"../../../const":46}],100:[function(e,t,r){"use strict";r.__esModule=true;r.default=i;function i(e){var t=e.getContextAttributes();if(!t.stencil){console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}}},{}],101:[function(e,t,r){"use strict";r.__esModule=true;var i=e("./utils/maxRecommendedTextures");var n=s(i);var a=e("./utils/canUploadSameBuffer");var o=s(a);function s(e){return e&&e.__esModule?e:{default:e}}r.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:true,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,n.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:false,forceFXAA:false,autoResize:false,transparent:false,backgroundColor:0,clearBeforeRender:true,preserveDrawingBuffer:false,roundPixels:false,width:800,height:600,legacy:false},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,o.default)()}},{"./utils/canUploadSameBuffer":122,"./utils/maxRecommendedTextures":127}],102:[function(e,t,r){"use strict";r.__esModule=true;var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var o=e("../math");var s=e("../utils");var u=e("../const");var n=e("../textures/Texture");var l=f(n);var a=e("../display/Container");var h=f(a);function f(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var v=new o.Point;var y=function(n){p(a,n);function a(e){c(this,a);var t=d(this,n.call(this));t._anchor=new o.ObservablePoint(t._onAnchorUpdate,t);t._texture=null;t._width=0;t._height=0;t._tint=null;t._tintRGB=null;t.tint=16777215;t.blendMode=u.BLEND_MODES.NORMAL;t.shader=null;t.cachedTint=16777215;t.texture=e||l.default.EMPTY;t.vertexData=new Float32Array(8);t.vertexTrimmedData=null;t._transformID=-1;t._textureID=-1;t._transformTrimmedID=-1;t._textureTrimmedID=-1;t.pluginName="sprite";return t}a.prototype._onTextureUpdate=function e(){this._textureID=-1;this._textureTrimmedID=-1;this.cachedTint=16777215;if(this._width){this.scale.x=(0,s.sign)(this.scale.x)*this._width/this._texture.orig.width}if(this._height){this.scale.y=(0,s.sign)(this.scale.y)*this._height/this._texture.orig.height}};a.prototype._onAnchorUpdate=function e(){this._transformID=-1;this._transformTrimmedID=-1};a.prototype.calculateVertices=function e(){if(this._transformID===this.transform._worldID&&this._textureID===this._texture._updateID){return}this._transformID=this.transform._worldID;this._textureID=this._texture._updateID;var t=this._texture;var r=this.transform.worldTransform;var i=r.a;var n=r.b;var a=r.c;var o=r.d;var s=r.tx;var u=r.ty;var l=this.vertexData;var h=t.trim;var f=t.orig;var c=this._anchor;var d=0;var p=0;var v=0;var y=0;if(h){p=h.x-c._x*f.width;d=p+h.width;y=h.y-c._y*f.height;v=y+h.height}else{p=-c._x*f.width;d=p+f.width;y=-c._y*f.height;v=y+f.height}l[0]=i*p+a*y+s;l[1]=o*y+n*p+u;l[2]=i*d+a*y+s;l[3]=o*y+n*d+u;l[4]=i*d+a*v+s;l[5]=o*v+n*d+u;l[6]=i*p+a*v+s;l[7]=o*v+n*p+u};a.prototype.calculateTrimmedVertices=function e(){if(!this.vertexTrimmedData){this.vertexTrimmedData=new Float32Array(8)}else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID){return}this._transformTrimmedID=this.transform._worldID;this._textureTrimmedID=this._texture._updateID;var t=this._texture;var r=this.vertexTrimmedData;var i=t.orig;var n=this._anchor;var a=this.transform.worldTransform;var o=a.a;var s=a.b;var u=a.c;var l=a.d;var h=a.tx;var f=a.ty;var c=-n._x*i.width;var d=c+i.width;var p=-n._y*i.height;var v=p+i.height;r[0]=o*c+u*p+h;r[1]=l*p+s*c+f;r[2]=o*d+u*p+h;r[3]=l*p+s*d+f;r[4]=o*d+u*v+h;r[5]=l*v+s*d+f;r[6]=o*c+u*v+h;r[7]=l*v+s*c+f};a.prototype._renderWebGL=function e(t){this.calculateVertices();t.setObjectRenderer(t.plugins[this.pluginName]);t.plugins[this.pluginName].render(this)};a.prototype._renderCanvas=function e(t){t.plugins[this.pluginName].render(this)};a.prototype._calculateBounds=function e(){var t=this._texture.trim;var r=this._texture.orig;if(!t||t.width===r.width&&t.height===r.height){this.calculateVertices();this._bounds.addQuad(this.vertexData)}else{this.calculateTrimmedVertices();this._bounds.addQuad(this.vertexTrimmedData)}};a.prototype.getLocalBounds=function e(t){if(this.children.length===0){this._bounds.minX=this._texture.orig.width*-this._anchor._x;this._bounds.minY=this._texture.orig.height*-this._anchor._y;this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x);this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y);if(!t){if(!this._localBoundsRect){this._localBoundsRect=new o.Rectangle}t=this._localBoundsRect}return this._bounds.getRectangle(t)}return n.prototype.getLocalBounds.call(this,t)};a.prototype.containsPoint=function e(t){this.worldTransform.applyInverse(t,v);var r=this._texture.orig.width;var i=this._texture.orig.height;var n=-r*this.anchor.x;var a=0;if(v.x>=n&&v.x<n+r){a=-i*this.anchor.y;if(v.y>=a&&v.y<a+i){return true}}return false};a.prototype.destroy=function e(t){n.prototype.destroy.call(this,t);this._anchor=null;var r=typeof t==="boolean"?t:t&&t.texture;if(r){var i=typeof t==="boolean"?t:t&&t.baseTexture;this._texture.destroy(!!i)}this._texture=null;this.shader=null};a.from=function e(t){return new a(l.default.from(t))};a.fromFrame=function e(t){var r=s.TextureCache[t];if(!r){throw new Error('The frameId "'+t+'" does not exist in the texture cache')}return new a(r)};a.fromImage=function e(t,r,i){return new a(l.default.fromImage(t,r,i))};i(a,[{key:"width",get:function e(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function e(t){var r=(0,s.sign)(this.scale.x)||1;this.scale.x=r*t/this._texture.orig.width;this._width=t}},{key:"height",get:function e(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function e(t){var r=(0,s.sign)(this.scale.y)||1;this.scale.y=r*t/this._texture.orig.height;this._height=t}},{key:"anchor",get:function e(){return this._anchor},set:function e(t){this._anchor.copy(t)}},{key:"tint",get:function e(){return this._tint},set:function e(t){this._tint=t;this._tintRGB=(t>>16)+(t&65280)+((t&255)<<16)}},{key:"texture",get:function e(){return this._texture},set:function e(t){if(this._texture===t){return}this._texture=t;this.cachedTint=16777215;this._textureID=-1;this._textureTrimmedID=-1;if(t){if(t.baseTexture.hasLoaded){this._onTextureUpdate()}else{t.once("update",this._onTextureUpdate,this)}}}}]);return a}(h.default);r.default=y},{"../const":46,"../display/Container":48,"../math":70,"../textures/Texture":115,"../utils":125}],103:[function(e,t,r){"use strict";r.__esModule=true;var i=e("../../renderers/canvas/CanvasRenderer");var n=o(i);var f=e("../../const");var c=e("../../math");var a=e("./CanvasTinter");var d=o(a);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var p=new c.Matrix;var u=function(){function t(e){s(this,t);this.renderer=e}t.prototype.render=function e(t){var r=t._texture;var i=this.renderer;var n=r._frame.width;var a=r._frame.height;var o=t.transform.worldTransform;var s=0;var u=0;if(r.orig.width<=0||r.orig.height<=0||!r.baseTexture.source){return}i.setBlendMode(t.blendMode);if(r.valid){i.context.globalAlpha=t.worldAlpha;var l=r.baseTexture.scaleMode===f.SCALE_MODES.LINEAR;if(i.smoothProperty&&i.context[i.smoothProperty]!==l){i.context[i.smoothProperty]=l}if(r.trim){s=r.trim.width/2+r.trim.x-t.anchor.x*r.orig.width;u=r.trim.height/2+r.trim.y-t.anchor.y*r.orig.height}else{s=(.5-t.anchor.x)*r.orig.width;u=(.5-t.anchor.y)*r.orig.height}if(r.rotate){o.copy(p);o=p;c.GroupD8.matrixAppendRotationInv(o,r.rotate,s,u);s=0;u=0}s-=n/2;u-=a/2;if(i.roundPixels){i.context.setTransform(o.a,o.b,o.c,o.d,o.tx*i.resolution|0,o.ty*i.resolution|0);s=s|0;u=u|0}else{i.context.setTransform(o.a,o.b,o.c,o.d,o.tx*i.resolution,o.ty*i.resolution)}var h=r.baseTexture.resolution;if(t.tint!==16777215){if(t.cachedTint!==t.tint||t.tintedTexture.tintId!==t._texture._updateID){t.cachedTint=t.tint;t.tintedTexture=d.default.getTintedTexture(t,t.tint)}i.context.drawImage(t.tintedTexture,0,0,n*h,a*h,s*i.resolution,u*i.resolution,n*i.resolution,a*i.resolution)}else{i.context.drawImage(r.baseTexture.source,r._frame.x*h,r._frame.y*h,n*h,a*h,s*i.resolution,u*i.resolution,n*i.resolution,a*i.resolution)}}};t.prototype.destroy=function e(){this.renderer=null};return t}();r.default=u;n.default.registerPlugin("sprite",u)},{"../../const":46,"../../math":70,"../../renderers/canvas/CanvasRenderer":77,"./CanvasTinter":104}],104:[function(e,t,r){"use strict";r.__esModule=true;var p=e("../../utils");var i=e("../../renderers/canvas/utils/canUseNewCanvasBlendModes");var n=a(i);function a(e){return e&&e.__esModule?e:{default:e}}var u={getTintedTexture:function e(t,r){var i=t._texture;r=u.roundColor(r);var n="#"+("00000"+(r|0).toString(16)).substr(-6);i.tintCache=i.tintCache||{};var a=i.tintCache[n];var o=void 0;if(a){if(a.tintId===i._updateID){return i.tintCache[n]}o=i.tintCache[n]}else{o=u.canvas||document.createElement("canvas")}u.tintMethod(i,r,o);o.tintId=i._updateID;if(u.convertTintToImage){var s=new Image;s.src=o.toDataURL();i.tintCache[n]=s}else{i.tintCache[n]=o;u.canvas=null}return o},tintWithMultiply:function e(t,r,i){var n=i.getContext("2d");var a=t._frame.clone();var o=t.baseTexture.resolution;a.x*=o;a.y*=o;a.width*=o;a.height*=o;i.width=Math.ceil(a.width);i.height=Math.ceil(a.height);n.save();n.fillStyle="#"+("00000"+(r|0).toString(16)).substr(-6);n.fillRect(0,0,a.width,a.height);n.globalCompositeOperation="multiply";n.drawImage(t.baseTexture.source,a.x,a.y,a.width,a.height,0,0,a.width,a.height);n.globalCompositeOperation="destination-atop";n.drawImage(t.baseTexture.source,a.x,a.y,a.width,a.height,0,0,a.width,a.height);n.restore()},tintWithOverlay:function e(t,r,i){var n=i.getContext("2d");var a=t._frame.clone();var o=t.baseTexture.resolution;a.x*=o;a.y*=o;a.width*=o;a.height*=o;i.width=Math.ceil(a.width);i.height=Math.ceil(a.height);n.save();n.globalCompositeOperation="copy";n.fillStyle="#"+("00000"+(r|0).toString(16)).substr(-6);n.fillRect(0,0,a.width,a.height);n.globalCompositeOperation="destination-atop";n.drawImage(t.baseTexture.source,a.x,a.y,a.width,a.height,0,0,a.width,a.height);n.restore()},tintWithPerPixel:function e(t,r,i){var n=i.getContext("2d");var a=t._frame.clone();var o=t.baseTexture.resolution;a.x*=o;a.y*=o;a.width*=o;a.height*=o;i.width=Math.ceil(a.width);i.height=Math.ceil(a.height);n.save();n.globalCompositeOperation="copy";n.drawImage(t.baseTexture.source,a.x,a.y,a.width,a.height,0,0,a.width,a.height);n.restore();var s=(0,p.hex2rgb)(r);var u=s[0];var l=s[1];var h=s[2];var f=n.getImageData(0,0,a.width,a.height);var c=f.data;for(var d=0;d<c.length;d+=4){c[d+0]*=u;c[d+1]*=l;c[d+2]*=h}n.putImageData(f,0,0)},roundColor:function e(t){var r=u.cacheStepsPerColorChannel;var i=(0,p.hex2rgb)(t);i[0]=Math.min(255,i[0]/r*r);i[1]=Math.min(255,i[1]/r*r);i[2]=Math.min(255,i[2]/r*r);return(0,p.rgb2hex)(i)},cacheStepsPerColorChannel:8,convertTintToImage:false,canUseMultiply:(0,n.default)(),tintMethod:0};u.tintMethod=u.canUseMultiply?u.tintWithMultiply:u.tintWithPerPixel;r.default=u},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":80,"../../utils":125}],105:[function(e,t,r){"use strict";r.__esModule=true;function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var n=function(){function t(e){i(this,t);this.vertices=new ArrayBuffer(e);this.float32View=new Float32Array(this.vertices);this.uint32View=new Uint32Array(this.vertices)}t.prototype.destroy=function e(){this.vertices=null;this.positions=null;this.uvs=null;this.colors=null};return t}();r.default=n},{}],106:[function(e,t,r){"use strict";r.__esModule=true;var i=e("../../renderers/webgl/utils/ObjectRenderer");var n=m(i);var a=e("../../renderers/webgl/WebGLRenderer");var o=m(a);var s=e("../../utils/createIndicesForQuads");var u=m(s);var l=e("./generateMultiTextureShader");var h=m(l);var f=e("../../renderers/webgl/utils/checkMaxIfStatmentsInShader");var c=m(f);var d=e("./BatchBuffer");var p=m(d);var v=e("../../settings");var B=m(v);var j=e("../../utils");var y=e("pixi-gl-core");var U=m(y);var g=e("bit-twiddle");var X=m(g);function m(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function b(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function x(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var G=0;var W=0;var T=function(n){x(a,n);function a(e){_(this,a);var t=b(this,n.call(this,e));t.vertSize=5;t.vertByteSize=t.vertSize*4;t.size=B.default.SPRITE_BATCH_SIZE;t.buffers=[];for(var r=1;r<=X.default.nextPow2(t.size);r*=2){t.buffers.push(new p.default(r*4*t.vertByteSize))}t.indices=(0,u.default)(t.size);t.shader=null;t.currentIndex=0;t.groups=[];for(var i=0;i<t.size;i++){t.groups[i]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0}}t.sprites=[];t.vertexBuffers=[];t.vaos=[];t.vaoMax=2;t.vertexCount=0;t.renderer.on("prerender",t.onPrerender,t);return t}a.prototype.onContextChange=function e(){var t=this.renderer.gl;if(this.renderer.legacy){this.MAX_TEXTURES=1}else{this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),B.default.SPRITE_MAX_TEXTURES);this.MAX_TEXTURES=(0,c.default)(this.MAX_TEXTURES,t)}this.shader=(0,h.default)(t,this.MAX_TEXTURES);this.indexBuffer=U.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW);this.renderer.bindVao(null);var r=this.shader.attributes;for(var i=0;i<this.vaoMax;i++){var n=this.vertexBuffers[i]=U.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW);var a=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(n,r.aVertexPosition,t.FLOAT,false,this.vertByteSize,0).addAttribute(n,r.aTextureCoord,t.UNSIGNED_SHORT,true,this.vertByteSize,2*4).addAttribute(n,r.aColor,t.UNSIGNED_BYTE,true,this.vertByteSize,3*4);if(r.aTextureId){a.addAttribute(n,r.aTextureId,t.FLOAT,false,this.vertByteSize,4*4)}this.vaos[i]=a}this.vao=this.vaos[0];this.currentBlendMode=99999;this.boundTextures=new Array(this.MAX_TEXTURES)};a.prototype.onPrerender=function e(){this.vertexCount=0};a.prototype.render=function e(t){if(this.currentIndex>=this.size){this.flush()}if(!t._texture._uvs){return}this.sprites[this.currentIndex++]=t};a.prototype.flush=function e(){if(this.currentIndex===0){return}var t=this.renderer.gl;var r=this.MAX_TEXTURES;var i=X.default.nextPow2(this.currentIndex);var n=X.default.log2(i);var a=this.buffers[n];var o=this.sprites;var s=this.groups;var u=a.float32View;var l=a.uint32View;var h=this.boundTextures;var f=this.renderer.boundTextures;var c=this.renderer.textureGC.count;var d=0;var p=void 0;var v=void 0;var y=1;var g=0;var m=s[0];var _=void 0;var b=void 0;var x=j.premultiplyBlendMode[o[0]._texture.baseTexture.premultipliedAlpha?1:0][o[0].blendMode];m.textureCount=0;m.start=0;m.blend=x;G++;var T=void 0;for(T=0;T<r;++T){var w=f[T];if(w._enabled===G){h[T]=this.renderer.emptyTextures[T];continue}h[T]=w;w._virtalBoundId=T;w._enabled=G}G++;for(T=0;T<this.currentIndex;++T){var E=o[T];p=E._texture.baseTexture;var S=j.premultiplyBlendMode[Number(p.premultipliedAlpha)][E.blendMode];if(x!==S){x=S;v=null;g=r;G++}if(v!==p){v=p;if(p._enabled!==G){if(g===r){G++;m.size=T-m.start;g=0;m=s[y++];m.blend=x;m.textureCount=0;m.start=T}p.touched=c;if(p._virtalBoundId===-1){for(var O=0;O<r;++O){var M=(O+W)%r;var P=h[M];if(P._enabled!==G){W++;P._virtalBoundId=-1;p._virtalBoundId=M;h[M]=p;break}}}p._enabled=G;m.textureCount++;m.ids[g]=p._virtalBoundId;m.textures[g++]=p}}_=E.vertexData;b=E._texture._uvs.uvsUint32;if(this.renderer.roundPixels){var C=this.renderer.resolution;u[d]=(_[0]*C|0)/C;u[d+1]=(_[1]*C|0)/C;u[d+5]=(_[2]*C|0)/C;u[d+6]=(_[3]*C|0)/C;u[d+10]=(_[4]*C|0)/C;u[d+11]=(_[5]*C|0)/C;u[d+15]=(_[6]*C|0)/C;u[d+16]=(_[7]*C|0)/C}else{u[d]=_[0];u[d+1]=_[1];u[d+5]=_[2];u[d+6]=_[3];u[d+10]=_[4];u[d+11]=_[5];u[d+15]=_[6];u[d+16]=_[7]}l[d+2]=b[0];l[d+7]=b[1];l[d+12]=b[2];l[d+17]=b[3];var R=Math.min(E.worldAlpha,1);var A=R<1&&p.premultipliedAlpha?(0,j.premultiplyTint)(E._tintRGB,R):E._tintRGB+(R*255<<24);l[d+3]=l[d+8]=l[d+13]=l[d+18]=A;u[d+4]=u[d+9]=u[d+14]=u[d+19]=p._virtalBoundId;d+=20}m.size=T-m.start;if(!B.default.CAN_UPLOAD_SAME_BUFFER){if(this.vaoMax<=this.vertexCount){this.vaoMax++;var I=this.shader.attributes;var D=this.vertexBuffers[this.vertexCount]=U.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW);var L=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(D,I.aVertexPosition,t.FLOAT,false,this.vertByteSize,0).addAttribute(D,I.aTextureCoord,t.UNSIGNED_SHORT,true,this.vertByteSize,2*4).addAttribute(D,I.aColor,t.UNSIGNED_BYTE,true,this.vertByteSize,3*4);if(I.aTextureId){L.addAttribute(D,I.aTextureId,t.FLOAT,false,this.vertByteSize,4*4)}this.vaos[this.vertexCount]=L}this.renderer.bindVao(this.vaos[this.vertexCount]);this.vertexBuffers[this.vertexCount].upload(a.vertices,0,false);this.vertexCount++}else{this.vertexBuffers[this.vertexCount].upload(a.vertices,0,true)}for(T=0;T<r;++T){f[T]._virtalBoundId=-1}for(T=0;T<y;++T){var N=s[T];var F=N.textureCount;for(var k=0;k<F;k++){v=N.textures[k];if(f[N.ids[k]]!==v){this.renderer.bindTexture(v,N.ids[k],true)}v._virtalBoundId=-1}this.renderer.state.setBlendMode(N.blend);t.drawElements(t.TRIANGLES,N.size*6,t.UNSIGNED_SHORT,N.start*6*2)}this.currentIndex=0};a.prototype.start=function e(){this.renderer.bindShader(this.shader);if(B.default.CAN_UPLOAD_SAME_BUFFER){this.renderer.bindVao(this.vaos[this.vertexCount]);this.vertexBuffers[this.vertexCount].bind()}};a.prototype.stop=function e(){this.flush()};a.prototype.destroy=function e(){for(var t=0;t<this.vaoMax;t++){if(this.vertexBuffers[t]){this.vertexBuffers[t].destroy()}if(this.vaos[t]){this.vaos[t].destroy()}}if(this.indexBuffer){this.indexBuffer.destroy()}this.renderer.off("prerender",this.onPrerender,this);n.prototype.destroy.call(this);if(this.shader){this.shader.destroy();this.shader=null}this.vertexBuffers=null;this.vaos=null;this.indexBuffer=null;this.indices=null;this.sprites=null;for(var r=0;r<this.buffers.length;++r){this.buffers[r].destroy()}};return a}(n.default);r.default=T;o.default.registerPlugin("sprite",T)},{"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":97,"../../settings":101,"../../utils":125,"../../utils/createIndicesForQuads":123,"./BatchBuffer":105,"./generateMultiTextureShader":107,"bit-twiddle":1,"pixi-gl-core":15}],107:[function(e,t,r){"use strict";r.__esModule=true;r.default=o;var i=e("../../Shader");var s=a(i);var n=e("path");function a(e){return e&&e.__esModule?e:{default:e}}var u=["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n");function o(e,t){var r="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n";var i=u;i=i.replace(/%count%/gi,t);i=i.replace(/%forloop%/gi,l(t));var n=new s.default(e,r,i);var a=[];for(var o=0;o<t;o++){a[o]=o}n.bind();n.uniforms.uSamplers=a;return n}function l(e){var t="";t+="\n";t+="\n";for(var r=0;r<e;r++){if(r>0){t+="\nelse "}if(r<e-1){t+="if(textureId == "+r+".0)"}t+="\n{";t+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);";t+="\n}"}t+="\n";t+="\n";return t}},{"../../Shader":44,path:8}],108:[function(e,t,r){"use strict";r.__esModule=true;var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var n=e("../sprites/Sprite");var a=_(n);var o=e("../textures/Texture");var s=_(o);var u=e("../math");var l=e("../utils");var y=e("../const");var h=e("../settings");var f=_(h);var c=e("./TextStyle");var d=_(c);var p=e("./TextMetrics");var m=_(p);var v=e("../utils/trimCanvas");var g=_(v);function _(e){return e&&e.__esModule?e:{default:e}}function b(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function x(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function T(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var w={texture:true,children:false,baseTexture:true};var E=function(a){T(o,a);function o(e,t,r){b(this,o);r=r||document.createElement("canvas");r.width=3;r.height=3;var i=s.default.fromCanvas(r,f.default.SCALE_MODE,"text");i.orig=new u.Rectangle;i.trim=new u.Rectangle;var n=x(this,a.call(this,i));s.default.addToCache(n._texture,n._texture.baseTexture.textureCacheIds[0]);n.canvas=r;n.context=n.canvas.getContext("2d");n.resolution=f.default.RESOLUTION;n._text=null;n._style=null;n._styleListener=null;n._font="";n.text=e;n.style=t;n.localStyleID=-1;return n}o.prototype.updateText=function e(t){var r=this._style;if(this.localStyleID!==r.styleID){this.dirty=true;this.localStyleID=r.styleID}if(!this.dirty&&t){return}this._font=this._style.toFontString();var i=this.context;var n=m.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas);var a=n.width;var o=n.height;var s=n.lines;var u=n.lineHeight;var l=n.lineWidths;var h=n.maxLineWidth;var f=n.fontProperties;this.canvas.width=Math.ceil((a+r.padding*2)*this.resolution);this.canvas.height=Math.ceil((o+r.padding*2)*this.resolution);i.scale(this.resolution,this.resolution);i.clearRect(0,0,this.canvas.width,this.canvas.height);i.font=this._font;i.strokeStyle=r.stroke;i.lineWidth=r.strokeThickness;i.textBaseline=r.textBaseline;i.lineJoin=r.lineJoin;i.miterLimit=r.miterLimit;var c=void 0;var d=void 0;if(r.dropShadow){i.fillStyle=r.dropShadowColor;i.globalAlpha=r.dropShadowAlpha;i.shadowBlur=r.dropShadowBlur;if(r.dropShadowBlur>0){i.shadowColor=r.dropShadowColor}var p=Math.cos(r.dropShadowAngle)*r.dropShadowDistance;var v=Math.sin(r.dropShadowAngle)*r.dropShadowDistance;for(var y=0;y<s.length;y++){c=r.strokeThickness/2;d=r.strokeThickness/2+y*u+f.ascent;if(r.align==="right"){c+=h-l[y]}else if(r.align==="center"){c+=(h-l[y])/2}if(r.fill){this.drawLetterSpacing(s[y],c+p+r.padding,d+v+r.padding);if(r.stroke&&r.strokeThickness){i.strokeStyle=r.dropShadowColor;this.drawLetterSpacing(s[y],c+p+r.padding,d+v+r.padding,true);i.strokeStyle=r.stroke}}}}i.shadowBlur=0;i.globalAlpha=1;i.fillStyle=this._generateFillStyle(r,s);for(var g=0;g<s.length;g++){c=r.strokeThickness/2;d=r.strokeThickness/2+g*u+f.ascent;if(r.align==="right"){c+=h-l[g]}else if(r.align==="center"){c+=(h-l[g])/2}if(r.stroke&&r.strokeThickness){this.drawLetterSpacing(s[g],c+r.padding,d+r.padding,true)}if(r.fill){this.drawLetterSpacing(s[g],c+r.padding,d+r.padding)}}this.updateTexture()};o.prototype.drawLetterSpacing=function e(t,r,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var a=this._style;var o=a.letterSpacing;if(o===0){if(n){this.context.strokeText(t,r,i)}else{this.context.fillText(t,r,i)}return}var s=String.prototype.split.call(t,"");var u=r;var l=0;var h="";while(l<t.length){h=s[l++];if(n){this.context.strokeText(h,u,i)}else{this.context.fillText(h,u,i)}u+=this.context.measureText(h).width+o}};o.prototype.updateTexture=function e(){var t=this.canvas;if(this._style.trim){var r=(0,g.default)(t);t.width=r.width;t.height=r.height;this.context.putImageData(r.data,0,0)}var i=this._texture;var n=this._style;var a=n.trim?0:n.padding;var o=i.baseTexture;o.hasLoaded=true;o.resolution=this.resolution;o.realWidth=t.width;o.realHeight=t.height;o.width=t.width/this.resolution;o.height=t.height/this.resolution;i.trim.width=i._frame.width=t.width/this.resolution;i.trim.height=i._frame.height=t.height/this.resolution;i.trim.x=-a;i.trim.y=-a;i.orig.width=i._frame.width-a*2;i.orig.height=i._frame.height-a*2;this._onTextureUpdate();o.emit("update",o);this.dirty=false};o.prototype.renderWebGL=function e(t){if(this.resolution!==t.resolution){this.resolution=t.resolution;this.dirty=true}this.updateText(true);a.prototype.renderWebGL.call(this,t)};o.prototype._renderCanvas=function e(t){if(this.resolution!==t.resolution){this.resolution=t.resolution;this.dirty=true}this.updateText(true);a.prototype._renderCanvas.call(this,t)};o.prototype.getLocalBounds=function e(t){this.updateText(true);return a.prototype.getLocalBounds.call(this,t)};o.prototype._calculateBounds=function e(){this.updateText(true);this.calculateVertices();this._bounds.addQuad(this.vertexData)};o.prototype._onStyleChange=function e(){this.dirty=true};o.prototype._generateFillStyle=function e(t,r){if(!Array.isArray(t.fill)){return t.fill}if(navigator.isCocoonJS){return t.fill[0]}var i=void 0;var n=void 0;var a=void 0;var o=void 0;var s=this.canvas.width/this.resolution;var u=this.canvas.height/this.resolution;var l=t.fill.slice();var h=t.fillGradientStops.slice();if(!h.length){var f=l.length+1;for(var c=1;c<f;++c){h.push(c/f)}}l.unshift(t.fill[0]);h.unshift(0);l.push(t.fill[t.fill.length-1]);h.push(1);if(t.fillGradientType===y.TEXT_GRADIENT.LINEAR_VERTICAL){i=this.context.createLinearGradient(s/2,0,s/2,u);n=(l.length+1)*r.length;a=0;for(var d=0;d<r.length;d++){a+=1;for(var p=0;p<l.length;p++){if(typeof h[p]==="number"){o=h[p]/r.length+d/r.length}else{o=a/n}i.addColorStop(o,l[p]);a++}}}else{i=this.context.createLinearGradient(0,u/2,s,u/2);n=l.length+1;a=1;for(var v=0;v<l.length;v++){if(typeof h[v]==="number"){o=h[v]}else{o=a/n}i.addColorStop(o,l[v]);a++}}return i};o.prototype.destroy=function e(t){if(typeof t==="boolean"){t={children:t}}t=Object.assign({},w,t);a.prototype.destroy.call(this,t);this.context=null;this.canvas=null;this._style=null};i(o,[{key:"width",get:function e(){this.updateText(true);return Math.abs(this.scale.x)*this._texture.orig.width},set:function e(t){this.updateText(true);var r=(0,l.sign)(this.scale.x)||1;this.scale.x=r*t/this._texture.orig.width;this._width=t}},{key:"height",get:function e(){this.updateText(true);return Math.abs(this.scale.y)*this._texture.orig.height},set:function e(t){this.updateText(true);var r=(0,l.sign)(this.scale.y)||1;this.scale.y=r*t/this._texture.orig.height;this._height=t}},{key:"style",get:function e(){return this._style},set:function e(t){t=t||{};if(t instanceof d.default){this._style=t}else{this._style=new d.default(t)}this.localStyleID=-1;this.dirty=true}},{key:"text",get:function e(){return this._text},set:function e(t){t=String(t===""||t===null||t===undefined?" ":t);if(this._text===t){return}this._text=t;this.dirty=true}}]);return o}(a.default);r.default=E},{"../const":46,"../math":70,"../settings":101,"../sprites/Sprite":102,"../textures/Texture":115,"../utils":125,"../utils/trimCanvas":130,"./TextMetrics":109,"./TextStyle":110}],109:[function(e,t,r){"use strict";r.__esModule=true;function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function(){function b(e,t,r,i,n,a,o,s,u){l(this,b);this.text=e;this.style=t;this.width=r;this.height=i;this.lines=n;this.lineWidths=a;this.lineHeight=o;this.maxLineWidth=s;this.fontProperties=u}b.measureText=function e(t,r,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:b._canvas;i=i||r.wordWrap;var a=r.toFontString();var o=b.measureFont(a);var s=n.getContext("2d");s.font=a;var u=i?b.wordWrap(t,r,n):t;var l=u.split(/(?:\r\n|\r|\n)/);var h=new Array(l.length);var f=0;for(var c=0;c<l.length;c++){var d=s.measureText(l[c]).width+(l[c].length-1)*r.letterSpacing;h[c]=d;f=Math.max(f,d)}var p=f+r.strokeThickness;if(r.dropShadow){p+=r.dropShadowDistance}var v=r.lineHeight||o.fontSize+r.strokeThickness;var y=Math.max(v,o.fontSize+r.strokeThickness)+(l.length-1)*(v+r.leading);if(r.dropShadow){y+=r.dropShadowDistance}return new b(t,r,p,y,l,h,v+r.leading,f,o)};b.wordWrap=function e(t,r){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:b._canvas;var n=i.getContext("2d");var a="";var o=t.charAt(0);var s=t.split("\n");var u=r.wordWrapWidth;var l={};for(var h=0;h<s.length;h++){var f=u;var c=s[h].split(" ");for(var d=0;d<c.length;d++){var p=n.measureText(c[d]).width;if(r.breakWords&&p>u){var v=c[d].split("");for(var y=0;y<v.length;y++){var g=v[y];var m=l[g];if(m===undefined){m=n.measureText(g).width;l[g]=m}if(m>f){a+="\n"+g;f=u-m}else{if(y===0&&(d>0||o===" ")){a+=" "}a+=g;f-=m}}}else{var _=p+n.measureText(" ").width;if(d===0||_>f){if(d>0){a+="\n"}a+=c[d];f=u-p}else{f-=_;a+=" "+c[d]}}}if(h<s.length-1){a+="\n"}}return a};b.measureFont=function e(t){if(b._fonts[t]){return b._fonts[t]}var r={};var i=b._canvas;var n=b._context;n.font=t;var a=Math.ceil(n.measureText("|Mq").width);var o=Math.ceil(n.measureText("M").width);var s=2*o;o=o*1.4|0;i.width=a;i.height=s;n.fillStyle="#f00";n.fillRect(0,0,a,s);n.font=t;n.textBaseline="alphabetic";n.fillStyle="#000";n.fillText("|Mq",0,o);var u=n.getImageData(0,0,a,s).data;var l=u.length;var h=a*4;var f=0;var c=0;var d=false;for(f=0;f<o;++f){for(var p=0;p<h;p+=4){if(u[c+p]!==255){d=true;break}}if(!d){c+=h}else{break}}r.ascent=o-f;c=l-h;d=false;for(f=s;f>o;--f){for(var v=0;v<h;v+=4){if(u[c+v]!==255){d=true;break}}if(!d){c-=h}else{break}}r.descent=f-o;r.fontSize=r.ascent+r.descent;b._fonts[t]=r;return r};return b}();r.default=i;var n=document.createElement("canvas");n.width=n.height=10;i._canvas=n;i._context=n.getContext("2d");i._fonts={}},{}],110:[function(e,t,r){"use strict";r.__esModule=true;var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var n=e("../const");var a=e("../utils");function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var s={align:"left",breakWords:false,dropShadow:false,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:n.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:false,wordWrap:false,wordWrapWidth:100,leading:0};var u=function(){function r(e){o(this,r);this.styleID=0;this.reset();c(this,e,e)}r.prototype.clone=function e(){var t={};c(t,this,s);return new r(t)};r.prototype.reset=function e(){c(this,s,s)};r.prototype.toFontString=function e(){var t=typeof this.fontSize==="number"?this.fontSize+"px":this.fontSize;var r=this.fontFamily;if(!Array.isArray(this.fontFamily)){r=this.fontFamily.split(",")}for(var i=r.length-1;i>=0;i--){var n=r[i].trim();if(!/([\"\'])[^\'\"]+\1/.test(n)){n='"'+n+'"'}r[i]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+r.join(",")};i(r,[{key:"align",get:function e(){return this._align},set:function e(t){if(this._align!==t){this._align=t;this.styleID++}}},{key:"breakWords",get:function e(){return this._breakWords},set:function e(t){if(this._breakWords!==t){this._breakWords=t;this.styleID++}}},{key:"dropShadow",get:function e(){return this._dropShadow},set:function e(t){if(this._dropShadow!==t){this._dropShadow=t;this.styleID++}}},{key:"dropShadowAlpha",get:function e(){return this._dropShadowAlpha},set:function e(t){if(this._dropShadowAlpha!==t){this._dropShadowAlpha=t;this.styleID++}}},{key:"dropShadowAngle",get:function e(){return this._dropShadowAngle},set:function e(t){if(this._dropShadowAngle!==t){this._dropShadowAngle=t;this.styleID++}}},{key:"dropShadowBlur",get:function e(){return this._dropShadowBlur},set:function e(t){if(this._dropShadowBlur!==t){this._dropShadowBlur=t;this.styleID++}}},{key:"dropShadowColor",get:function e(){return this._dropShadowColor},set:function e(t){var r=h(t);if(this._dropShadowColor!==r){this._dropShadowColor=r;this.styleID++}}},{key:"dropShadowDistance",get:function e(){return this._dropShadowDistance},set:function e(t){if(this._dropShadowDistance!==t){this._dropShadowDistance=t;this.styleID++}}},{key:"fill",get:function e(){return this._fill},set:function e(t){var r=h(t);if(this._fill!==r){this._fill=r;this.styleID++}}},{key:"fillGradientType",get:function e(){return this._fillGradientType},set:function e(t){if(this._fillGradientType!==t){this._fillGradientType=t;this.styleID++}}},{key:"fillGradientStops",get:function e(){return this._fillGradientStops},set:function e(t){if(!f(this._fillGradientStops,t)){this._fillGradientStops=t;this.styleID++}}},{key:"fontFamily",get:function e(){return this._fontFamily},set:function e(t){if(this.fontFamily!==t){this._fontFamily=t;this.styleID++}}},{key:"fontSize",get:function e(){return this._fontSize},set:function e(t){if(this._fontSize!==t){this._fontSize=t;this.styleID++}}},{key:"fontStyle",get:function e(){return this._fontStyle},set:function e(t){if(this._fontStyle!==t){this._fontStyle=t;this.styleID++}}},{key:"fontVariant",get:function e(){return this._fontVariant},set:function e(t){if(this._fontVariant!==t){this._fontVariant=t;this.styleID++}}},{key:"fontWeight",get:function e(){return this._fontWeight},set:function e(t){if(this._fontWeight!==t){this._fontWeight=t;this.styleID++}}},{key:"letterSpacing",get:function e(){return this._letterSpacing},set:function e(t){if(this._letterSpacing!==t){this._letterSpacing=t;this.styleID++}}},{key:"lineHeight",get:function e(){return this._lineHeight},set:function e(t){if(this._lineHeight!==t){this._lineHeight=t;this.styleID++}}},{key:"leading",get:function e(){return this._leading},set:function e(t){if(this._leading!==t){this._leading=t;this.styleID++}}},{key:"lineJoin",get:function e(){return this._lineJoin},set:function e(t){if(this._lineJoin!==t){this._lineJoin=t;this.styleID++}}},{key:"miterLimit",get:function e(){return this._miterLimit},set:function e(t){if(this._miterLimit!==t){this._miterLimit=t;this.styleID++}}},{key:"padding",get:function e(){return this._padding},set:function e(t){if(this._padding!==t){this._padding=t;this.styleID++}}},{key:"stroke",get:function e(){return this._stroke},set:function e(t){var r=h(t);if(this._stroke!==r){this._stroke=r;this.styleID++}}},{key:"strokeThickness",get:function e(){return this._strokeThickness},set:function e(t){if(this._strokeThickness!==t){this._strokeThickness=t;this.styleID++}}},{key:"textBaseline",get:function e(){return this._textBaseline},set:function e(t){if(this._textBaseline!==t){this._textBaseline=t;this.styleID++}}},{key:"trim",get:function e(){return this._trim},set:function e(t){if(this._trim!==t){this._trim=t;this.styleID++}}},{key:"wordWrap",get:function e(){return this._wordWrap},set:function e(t){if(this._wordWrap!==t){this._wordWrap=t;this.styleID++}}},{key:"wordWrapWidth",get:function e(){return this._wordWrapWidth},set:function e(t){if(this._wordWrapWidth!==t){this._wordWrapWidth=t;this.styleID++}}}]);return r}();r.default=u;function l(e){if(typeof e==="number"){return(0,a.hex2string)(e)}else if(typeof e==="string"){if(e.indexOf("0x")===0){e=e.replace("0x","#")}}return e}function h(e){if(!Array.isArray(e)){return l(e)}else{for(var t=0;t<e.length;++t){e[t]=l(e[t])}return e}}function f(e,t){if(!Array.isArray(e)||!Array.isArray(t)){return false}if(e.length!==t.length){return false}for(var r=0;r<e.length;++r){if(e[r]!==t[r]){return false}}return true}function c(e,t,r){for(var i in r){if(Array.isArray(t[i])){e[i]=t[i].slice()}else{e[i]=t[i]}}}},{"../const":46,"../utils":125}],111:[function(e,t,r){"use strict";r.__esModule=true;var i=e("./BaseTexture");var n=o(i);var a=e("../settings");var s=o(a);function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var f=function(a){h(o,a);function o(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:100;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;var r=arguments[2];var i=arguments[3];u(this,o);var n=l(this,a.call(this,null,r));n.resolution=i||s.default.RESOLUTION;n.width=Math.ceil(e);n.height=Math.ceil(t);n.realWidth=n.width*n.resolution;n.realHeight=n.height*n.resolution;n.scaleMode=r!==undefined?r:s.default.SCALE_MODE;n.hasLoaded=true;n._glRenderTargets={};n._canvasRenderTarget=null;n.valid=false;return n}o.prototype.resize=function e(t,r){t=Math.ceil(t);r=Math.ceil(r);if(t===this.width&&r===this.height){return}this.valid=t>0&&r>0;this.width=t;this.height=r;this.realWidth=this.width*this.resolution;this.realHeight=this.height*this.resolution;if(!this.valid){return}this.emit("update",this)};o.prototype.destroy=function e(){a.prototype.destroy.call(this,true);this.renderer=null};return o}(n.default);r.default=f},{"../settings":101,"./BaseTexture":112}],112:[function(e,t,r){"use strict";r.__esModule=true;var u=e("../utils");var i=e("../settings");var a=c(i);var n=e("eventemitter3");var o=c(n);var s=e("../utils/determineCrossOrigin");var l=c(s);var h=e("bit-twiddle");var f=c(h);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var y=function(n){v(s,n);function s(e,t,r){d(this,s);var i=p(this,n.call(this));i.uid=(0,u.uid)();i.touched=0;i.resolution=r||a.default.RESOLUTION;i.width=100;i.height=100;i.realWidth=100;i.realHeight=100;i.scaleMode=t!==undefined?t:a.default.SCALE_MODE;i.hasLoaded=false;i.isLoading=false;i.source=null;i.origSource=null;i.imageType=null;i.sourceScale=1;i.premultipliedAlpha=true;i.imageUrl=null;i.isPowerOfTwo=false;i.mipmap=a.default.MIPMAP_TEXTURES;i.wrapMode=a.default.WRAP_MODE;i._glTextures={};i._enabled=0;i._virtalBoundId=-1;i._destroyed=false;i.textureCacheIds=[];if(e){i.loadSource(e)}return i}s.prototype.update=function e(){if(this.imageType!=="svg"){this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width;this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height;this._updateDimensions()}this.emit("update",this)};s.prototype._updateDimensions=function e(){this.width=this.realWidth/this.resolution;this.height=this.realHeight/this.resolution;this.isPowerOfTwo=f.default.isPow2(this.realWidth)&&f.default.isPow2(this.realHeight)};s.prototype.loadSource=function e(t){var r=this.isLoading;this.hasLoaded=false;this.isLoading=false;if(r&&this.source){this.source.onload=null;this.source.onerror=null}var i=!this.source;this.source=t;if((t.src&&t.complete||t.getContext)&&t.width&&t.height){this._updateImageType();if(this.imageType==="svg"){this._loadSvgSource()}else{this._sourceLoaded()}if(i){this.emit("loaded",this)}}else if(!t.getContext){this.isLoading=true;var n=this;t.onload=function(){n._updateImageType();t.onload=null;t.onerror=null;if(!n.isLoading){return}n.isLoading=false;n._sourceLoaded();if(n.imageType==="svg"){n._loadSvgSource();return}n.emit("loaded",n)};t.onerror=function(){t.onload=null;t.onerror=null;if(!n.isLoading){return}n.isLoading=false;n.emit("error",n)};if(t.complete&&t.src){t.onload=null;t.onerror=null;if(n.imageType==="svg"){n._loadSvgSource();return}this.isLoading=false;if(t.width&&t.height){this._sourceLoaded();if(r){this.emit("loaded",this)}}else if(r){this.emit("error",this)}}}};s.prototype._updateImageType=function e(){if(!this.imageUrl){return}var t=(0,u.decomposeDataUri)(this.imageUrl);var r=void 0;if(t&&t.mediaType==="image"){var i=t.subType.split("+")[0];r=(0,u.getUrlFileExtension)("."+i);if(!r){throw new Error("Invalid image type in data URI.")}}else{r=(0,u.getUrlFileExtension)(this.imageUrl);if(!r){r="png"}}this.imageType=r};s.prototype._loadSvgSource=function e(){if(this.imageType!=="svg"){return}var t=(0,u.decomposeDataUri)(this.imageUrl);if(t){this._loadSvgSourceUsingDataUri(t)}else{this._loadSvgSourceUsingXhr()}};s.prototype._loadSvgSourceUsingDataUri=function e(t){var r=void 0;if(t.encoding==="base64"){if(!atob){throw new Error("Your browser doesn't support base64 conversions.")}r=atob(t.data)}else{r=t.data}this._loadSvgSourceUsingString(r)};s.prototype._loadSvgSourceUsingXhr=function e(){var t=this;var r=new XMLHttpRequest;r.onload=function(){if(r.readyState!==r.DONE||r.status!==200){throw new Error("Failed to load SVG using XHR.")}t._loadSvgSourceUsingString(r.response)};r.onerror=function(){return t.emit("error",t)};r.open("GET",this.imageUrl,true);r.send()};s.prototype._loadSvgSourceUsingString=function e(t){var r=(0,u.getSvgSize)(t);var i=r.width;var n=r.height;if(!i||!n){throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.")}this.realWidth=Math.round(i*this.sourceScale);this.realHeight=Math.round(n*this.sourceScale);this._updateDimensions();var a=document.createElement("canvas");a.width=this.realWidth;a.height=this.realHeight;a._pixiId="canvas_"+(0,u.uid)();a.getContext("2d").drawImage(this.source,0,0,i,n,0,0,this.realWidth,this.realHeight);this.origSource=this.source;this.source=a;s.addToCache(this,a._pixiId);this.isLoading=false;this._sourceLoaded();this.emit("loaded",this)};s.prototype._sourceLoaded=function e(){this.hasLoaded=true;this.update()};s.prototype.destroy=function e(){if(this.imageUrl){delete u.TextureCache[this.imageUrl];this.imageUrl=null;if(!navigator.isCocoonJS){this.source.src=""}}this.source=null;this.dispose();s.removeFromCache(this);this.textureCacheIds=null;this._destroyed=true};s.prototype.dispose=function e(){this.emit("dispose",this)};s.prototype.updateSourceImage=function e(t){this.source.src=t;this.loadSource(this.source)};s.fromImage=function e(t,r,i,n){var a=u.BaseTextureCache[t];if(!a){var o=new Image;if(r===undefined&&t.indexOf("data:")!==0){o.crossOrigin=(0,l.default)(t)}else if(r){o.crossOrigin=typeof r==="string"?r:"anonymous"}a=new s(o,i);a.imageUrl=t;if(n){a.sourceScale=n}a.resolution=(0,u.getResolutionOfUrl)(t);o.src=t;s.addToCache(a,t)}return a};s.fromCanvas=function e(t,r){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"canvas";if(!t._pixiId){t._pixiId=i+"_"+(0,u.uid)()}var n=u.BaseTextureCache[t._pixiId];if(!n){n=new s(t,r);s.addToCache(n,t._pixiId)}return n};s.from=function e(t,r,i){if(typeof t==="string"){return s.fromImage(t,undefined,r,i)}else if(t instanceof HTMLImageElement){var n=t.src;var a=u.BaseTextureCache[n];if(!a){a=new s(t,r);a.imageUrl=n;if(i){a.sourceScale=i}a.resolution=(0,u.getResolutionOfUrl)(n);s.addToCache(a,n)}return a}else if(t instanceof HTMLCanvasElement){return s.fromCanvas(t,r)}return t};s.addToCache=function e(t,r){if(r){if(t.textureCacheIds.indexOf(r)===-1){t.textureCacheIds.push(r)}if(u.BaseTextureCache[r]){console.warn("BaseTexture added to the cache with an id ["+r+"] that already had an entry")}u.BaseTextureCache[r]=t}};s.removeFromCache=function e(t){if(typeof t==="string"){var r=u.BaseTextureCache[t];if(r){var i=r.textureCacheIds.indexOf(t);if(i>-1){r.textureCacheIds.splice(i,1)}delete u.BaseTextureCache[t];return r}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n){delete u.BaseTextureCache[t.textureCacheIds[n]]}t.textureCacheIds.length=0;return t}return null};return s}(o.default);r.default=y},{"../settings":101,"../utils":125,"../utils/determineCrossOrigin":124,"bit-twiddle":1,eventemitter3:3}],113:[function(e,t,r){"use strict";r.__esModule=true;var i=e("./BaseRenderTexture");var h=o(i);var n=e("./Texture");var a=o(n);function o(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=function(u){s(l,u);function l(e,t){f(this,l);var r=null;if(!(e instanceof h.default)){var i=arguments[1];var n=arguments[2];var a=arguments[3];var o=arguments[4];console.warn("Please use RenderTexture.create("+i+", "+n+") instead of the ctor directly.");r=arguments[0];t=null;e=new h.default(i,n,a,o)}var s=c(this,u.call(this,e,t));s.legacyRenderer=r;s.valid=true;s._updateUvs();return s}l.prototype.resize=function e(t,r,i){t=Math.ceil(t);r=Math.ceil(r);this.valid=t>0&&r>0;this._frame.width=this.orig.width=t;this._frame.height=this.orig.height=r;if(!i){this.baseTexture.resize(t,r)}this._updateUvs()};l.create=function e(t,r,i,n){return new l(new h.default(t,r,i,n))};return l}(a.default);r.default=u},{"./BaseRenderTexture":111,"./Texture":115}],114:[function(e,t,r){"use strict";r.__esModule=true;var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var f=e("../");var n=e("../utils");function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){i(h,null,[{key:"BATCH_SIZE",get:function e(){return 1e3}}]);function h(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;a(this,h);this.baseTexture=e;this.textures={};this.data=t;this.resolution=this._updateResolution(r||this.baseTexture.imageUrl);this._frames=this.data.frames;this._frameKeys=Object.keys(this._frames);this._batchIndex=0;this._callback=null}h.prototype._updateResolution=function e(t){var r=this.data.meta.scale;var i=(0,n.getResolutionOfUrl)(t,null);if(i===null){i=r!==undefined?parseFloat(r):1}if(i!==1){this.baseTexture.resolution=i;this.baseTexture.update()}return i};h.prototype.parse=function e(t){this._batchIndex=0;this._callback=t;if(this._frameKeys.length<=h.BATCH_SIZE){this._processFrames(0);this._parseComplete()}else{this._nextBatch()}};h.prototype._processFrames=function e(t){var r=t;var i=h.BATCH_SIZE;var n=this.baseTexture.sourceScale;while(r-t<i&&r<this._frameKeys.length){var a=this._frameKeys[r];var o=this._frames[a].frame;if(o){var s=null;var u=null;var l=new f.Rectangle(0,0,Math.floor(this._frames[a].sourceSize.w*n)/this.resolution,Math.floor(this._frames[a].sourceSize.h*n)/this.resolution);if(this._frames[a].rotated){s=new f.Rectangle(Math.floor(o.x*n)/this.resolution,Math.floor(o.y*n)/this.resolution,Math.floor(o.h*n)/this.resolution,Math.floor(o.w*n)/this.resolution)}else{s=new f.Rectangle(Math.floor(o.x*n)/this.resolution,Math.floor(o.y*n)/this.resolution,Math.floor(o.w*n)/this.resolution,Math.floor(o.h*n)/this.resolution)}if(this._frames[a].trimmed){u=new f.Rectangle(Math.floor(this._frames[a].spriteSourceSize.x*n)/this.resolution,Math.floor(this._frames[a].spriteSourceSize.y*n)/this.resolution,Math.floor(o.w*n)/this.resolution,Math.floor(o.h*n)/this.resolution)}this.textures[a]=new f.Texture(this.baseTexture,s,l,u,this._frames[a].rotated?2:0);f.Texture.addToCache(this.textures[a],a)}r++}};h.prototype._parseComplete=function e(){var t=this._callback;this._callback=null;this._batchIndex=0;t.call(this,this.textures)};h.prototype._nextBatch=function e(){var t=this;this._processFrames(this._batchIndex*h.BATCH_SIZE);this._batchIndex++;setTimeout(function(){if(t._batchIndex*h.BATCH_SIZE<t._frameKeys.length){t._nextBatch()}else{t._parseComplete()}},0)};h.prototype.destroy=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;for(var r in this.textures){this.textures[r].destroy()}this._frames=null;this._frameKeys=null;this.data=null;this.textures=null;if(t){this.baseTexture.destroy()}this.baseTexture=null};return h}();r.default=o},{"../":65,"../utils":125}],115:[function(e,t,r){"use strict";r.__esModule=true;var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var n=e("./BaseTexture");var u=y(n);var a=e("./VideoBaseTexture");var l=y(a);var o=e("./TextureUvs");var h=y(o);var s=e("eventemitter3");var f=y(s);var c=e("../math");var d=e("../utils");var p=e("../settings");var v=y(p);function y(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function m(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function _(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var b=function(o){_(s,o);function s(e,t,r,i,n){g(this,s);var a=m(this,o.call(this));a.noFrame=false;if(!t){a.noFrame=true;t=new c.Rectangle(0,0,1,1)}if(e instanceof s){e=e.baseTexture}a.baseTexture=e;a._frame=t;a.trim=i;a.valid=false;a.requiresUpdate=false;a._uvs=null;a.orig=r||t;a._rotate=Number(n||0);if(n===true){a._rotate=2}else if(a._rotate%2!==0){throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually")}if(e.hasLoaded){if(a.noFrame){t=new c.Rectangle(0,0,e.width,e.height);e.on("update",a.onBaseTextureUpdated,a)}a.frame=t}else{e.once("loaded",a.onBaseTextureLoaded,a)}a._updateID=0;a.transform=null;a.textureCacheIds=[];return a}s.prototype.update=function e(){this.baseTexture.update()};s.prototype.onBaseTextureLoaded=function e(t){this._updateID++;if(this.noFrame){this.frame=new c.Rectangle(0,0,t.width,t.height)}else{this.frame=this._frame}this.baseTexture.on("update",this.onBaseTextureUpdated,this);this.emit("update",this)};s.prototype.onBaseTextureUpdated=function e(t){this._updateID++;this._frame.width=t.width;this._frame.height=t.height;this.emit("update",this)};s.prototype.destroy=function e(t){if(this.baseTexture){if(t){if(d.TextureCache[this.baseTexture.imageUrl]){s.removeFromCache(this.baseTexture.imageUrl)}this.baseTexture.destroy()}this.baseTexture.off("update",this.onBaseTextureUpdated,this);this.baseTexture.off("loaded",this.onBaseTextureLoaded,this);this.baseTexture=null}this._frame=null;this._uvs=null;this.trim=null;this.orig=null;this.valid=false;s.removeFromCache(this);this.textureCacheIds=null};s.prototype.clone=function e(){return new s(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)};s.prototype._updateUvs=function e(){if(!this._uvs){this._uvs=new h.default}this._uvs.set(this._frame,this.baseTexture,this.rotate);this._updateID++};s.fromImage=function e(t,r,i,n){var a=d.TextureCache[t];if(!a){a=new s(u.default.fromImage(t,r,i,n));s.addToCache(a,t)}return a};s.fromFrame=function e(t){var r=d.TextureCache[t];if(!r){throw new Error('The frameId "'+t+'" does not exist in the texture cache')}return r};s.fromCanvas=function e(t,r){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"canvas";return new s(u.default.fromCanvas(t,r,i))};s.fromVideo=function e(t,r){if(typeof t==="string"){return s.fromVideoUrl(t,r)}return new s(l.default.fromVideo(t,r))};s.fromVideoUrl=function e(t,r){return new s(l.default.fromUrl(t,r))};s.from=function e(t){if(typeof t==="string"){var r=d.TextureCache[t];if(!r){var i=t.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)!==null;if(i){return s.fromVideoUrl(t)}return s.fromImage(t)}return r}else if(t instanceof HTMLImageElement){return new s(u.default.from(t))}else if(t instanceof HTMLCanvasElement){return s.fromCanvas(t,v.default.SCALE_MODE,"HTMLCanvasElement")}else if(t instanceof HTMLVideoElement){return s.fromVideo(t)}else if(t instanceof u.default){return new s(t)}return t};s.fromLoader=function e(t,r,i){var n=new u.default(t,undefined,(0,d.getResolutionOfUrl)(r));var a=new s(n);n.imageUrl=r;if(!i){i=r}u.default.addToCache(a.baseTexture,i);s.addToCache(a,i);if(i!==r){u.default.addToCache(a.baseTexture,r);s.addToCache(a,r)}return a};s.addToCache=function e(t,r){if(r){if(t.textureCacheIds.indexOf(r)===-1){t.textureCacheIds.push(r)}if(d.TextureCache[r]){console.warn("Texture added to the cache with an id ["+r+"] that already had an entry")}d.TextureCache[r]=t}};s.removeFromCache=function e(t){if(typeof t==="string"){var r=d.TextureCache[t];if(r){var i=r.textureCacheIds.indexOf(t);if(i>-1){r.textureCacheIds.splice(i,1)}delete d.TextureCache[t];return r}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n){if(d.TextureCache[t.textureCacheIds[n]]===t){delete d.TextureCache[t.textureCacheIds[n]]}}t.textureCacheIds.length=0;return t}return null};i(s,[{key:"frame",get:function e(){return this._frame},set:function e(t){this._frame=t;this.noFrame=false;var r=t.x,i=t.y,n=t.width,a=t.height;var o=r+n>this.baseTexture.width;var s=i+a>this.baseTexture.height;if(o||s){var u=o&&s?"and":"or";var l="X: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.width;var h="Y: "+i+" + "+a+" = "+(i+a)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(l+" "+u+" "+h))}this.valid=n&&a&&this.baseTexture.hasLoaded;if(!this.trim&&!this.rotate){this.orig=t}if(this.valid){this._updateUvs()}}},{key:"rotate",get:function e(){return this._rotate},set:function e(t){this._rotate=t;if(this.valid){this._updateUvs()}}},{key:"width",get:function e(){return this.orig.width}},{key:"height",get:function e(){return this.orig.height}}]);return s}(f.default);r.default=b;function x(){var e=document.createElement("canvas");e.width=10;e.height=10;var t=e.getContext("2d");t.fillStyle="white";t.fillRect(0,0,10,10);return new b(new u.default(e))}function T(e){e.destroy=function e(){};e.on=function e(){};e.once=function e(){};e.emit=function e(){}}b.EMPTY=new b(new u.default);T(b.EMPTY);T(b.EMPTY.baseTexture);b.WHITE=x();T(b.WHITE);T(b.WHITE.baseTexture)},{"../math":70,"../settings":101,"../utils":125,"./BaseTexture":112,"./TextureUvs":117,"./VideoBaseTexture":118,eventemitter3:3}],116:[function(e,t,r){"use strict";r.__esModule=true;var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var n=e("../math/Matrix");var a=o(n);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var h=new a.default;var u=function(){function r(e,t){s(this,r);this._texture=e;this.mapCoord=new a.default;this.uClampFrame=new Float32Array(4);this.uClampOffset=new Float32Array(2);this._lastTextureID=-1;this.clampOffset=0;this.clampMargin=typeof t==="undefined"?.5:t}r.prototype.multiplyUvs=function e(t,r){if(r===undefined){r=t}var i=this.mapCoord;for(var n=0;n<t.length;n+=2){var a=t[n];var o=t[n+1];r[n]=a*i.a+o*i.c+i.tx;r[n+1]=a*i.b+o*i.d+i.ty}return r};r.prototype.update=function e(t){var r=this._texture;if(!r||!r.valid){return false}if(!t&&this._lastTextureID===r._updateID){return false}this._lastTextureID=r._updateID;var i=r._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=r.orig;var a=r.trim;if(a){h.set(n.width/a.width,0,0,n.height/a.height,-a.x/a.width,-a.y/a.height);this.mapCoord.append(h)}var o=r.baseTexture;var s=this.uClampFrame;var u=this.clampMargin/o.resolution;var l=this.clampOffset;s[0]=(r._frame.x+u+l)/o.width;s[1]=(r._frame.y+u+l)/o.height;s[2]=(r._frame.x+r._frame.width-u+l)/o.width;s[3]=(r._frame.y+r._frame.height-u+l)/o.height;this.uClampOffset[0]=l/o.realWidth;this.uClampOffset[1]=l/o.realHeight;return true};i(r,[{key:"texture",get:function e(){return this._texture},set:function e(t){this._texture=t;this._lastTextureID=-1}}]);return r}();r.default=u},{"../math/Matrix":67}],117:[function(e,t,r){"use strict";r.__esModule=true;var i=e("../math/GroupD8");var h=n(i);function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function e(){a(this,e);this.x0=0;this.y0=0;this.x1=1;this.y1=0;this.x2=1;this.y2=1;this.x3=0;this.y3=1;this.uvsUint32=new Uint32Array(4)}e.prototype.set=function e(t,r,i){var n=r.width;var a=r.height;if(i){var o=t.width/2/n;var s=t.height/2/a;var u=t.x/n+o;var l=t.y/a+s;i=h.default.add(i,h.default.NW);this.x0=u+o*h.default.uX(i);this.y0=l+s*h.default.uY(i);i=h.default.add(i,2);this.x1=u+o*h.default.uX(i);this.y1=l+s*h.default.uY(i);i=h.default.add(i,2);this.x2=u+o*h.default.uX(i);this.y2=l+s*h.default.uY(i);i=h.default.add(i,2);this.x3=u+o*h.default.uX(i);this.y3=l+s*h.default.uY(i)}else{this.x0=t.x/n;this.y0=t.y/a;this.x1=(t.x+t.width)/n;this.y1=t.y/a;this.x2=(t.x+t.width)/n;this.y2=(t.y+t.height)/a;this.x3=t.x/n;this.y3=(t.y+t.height)/a}this.uvsUint32[0]=(this.y0*65535&65535)<<16|this.x0*65535&65535;this.uvsUint32[1]=(this.y1*65535&65535)<<16|this.x1*65535&65535;this.uvsUint32[2]=(this.y2*65535&65535)<<16|this.x2*65535&65535;this.uvsUint32[3]=(this.y3*65535&65535)<<16|this.x3*65535&65535};return e}();r.default=o},{"../math/GroupD8":66}],118:[function(e,t,r){"use strict";r.__esModule=true;var n=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var i=e("./BaseTexture");var a=f(i);var o=e("../utils");var u=e("../ticker");var l=e("../const");var s=e("../utils/determineCrossOrigin");var h=f(s);function f(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var v=function(i){p(s,i);function s(e,t){c(this,s);if(!e){throw new Error("No video source element specified.")}if((e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height){e.complete=true}var r=d(this,i.call(this,e,t));r.width=e.videoWidth;r.height=e.videoHeight;r._autoUpdate=true;r._isAutoUpdating=false;r.autoPlay=true;r.update=r.update.bind(r);r._onCanPlay=r._onCanPlay.bind(r);e.addEventListener("play",r._onPlayStart.bind(r));e.addEventListener("pause",r._onPlayStop.bind(r));r.hasLoaded=false;r.__loaded=false;if(!r._isSourceReady()){e.addEventListener("canplay",r._onCanPlay);e.addEventListener("canplaythrough",r._onCanPlay)}else{r._onCanPlay()}return r}s.prototype._isSourcePlaying=function e(){var t=this.source;return t.currentTime>0&&t.paused===false&&t.ended===false&&t.readyState>2};s.prototype._isSourceReady=function e(){return this.source.readyState===3||this.source.readyState===4};s.prototype._onPlayStart=function e(){if(!this.hasLoaded){this._onCanPlay()}if(!this._isAutoUpdating&&this.autoUpdate){u.shared.add(this.update,this,l.UPDATE_PRIORITY.HIGH);this._isAutoUpdating=true}};s.prototype._onPlayStop=function e(){if(this._isAutoUpdating){u.shared.remove(this.update,this);this._isAutoUpdating=false}};s.prototype._onCanPlay=function e(){this.hasLoaded=true;if(this.source){this.source.removeEventListener("canplay",this._onCanPlay);this.source.removeEventListener("canplaythrough",this._onCanPlay);this.width=this.source.videoWidth;this.height=this.source.videoHeight;if(!this.__loaded){this.__loaded=true;this.emit("loaded",this)}if(this._isSourcePlaying()){this._onPlayStart()}else if(this.autoPlay){this.source.play()}}};s.prototype.destroy=function e(){if(this._isAutoUpdating){u.shared.remove(this.update,this)}if(this.source&&this.source._pixiId){a.default.removeFromCache(this.source._pixiId);delete this.source._pixiId;this.source.pause();this.source.src="";this.source.load()}i.prototype.destroy.call(this)};s.fromVideo=function e(t,r){if(!t._pixiId){t._pixiId="video_"+(0,o.uid)()}var i=o.BaseTextureCache[t._pixiId];if(!i){i=new s(t,r);a.default.addToCache(i,t._pixiId)}return i};s.fromUrl=function e(t,r,i){var n=document.createElement("video");n.setAttribute("webkit-playsinline","");n.setAttribute("playsinline","");var a=Array.isArray(t)?t[0].src||t[0]:t.src||t;if(i===undefined&&a.indexOf("data:")!==0){n.crossOrigin=(0,h.default)(a)}else if(i){n.crossOrigin=typeof i==="string"?i:"anonymous"}if(Array.isArray(t)){for(var o=0;o<t.length;++o){n.appendChild(y(t[o].src||t[o],t[o].mime))}}else{n.appendChild(y(a,t.mime))}n.load();return s.fromVideo(n,r)};n(s,[{key:"autoUpdate",get:function e(){return this._autoUpdate},set:function e(t){if(t!==this._autoUpdate){this._autoUpdate=t;if(!this._autoUpdate&&this._isAutoUpdating){u.shared.remove(this.update,this);this._isAutoUpdating=false}else if(this._autoUpdate&&!this._isAutoUpdating){u.shared.add(this.update,this,l.UPDATE_PRIORITY.HIGH);this._isAutoUpdating=true}}}}]);return s}(a.default);r.default=v;v.fromUrls=v.fromUrl;function y(e,t){if(!t){t="video/"+e.substr(e.lastIndexOf(".")+1)}var r=document.createElement("source");r.src=e;r.type=t;return r}},{"../const":46,"../ticker":121,"../utils":125,"../utils/determineCrossOrigin":124,"./BaseTexture":112}],119:[function(e,t,r){"use strict";r.__esModule=true;var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var n=e("../settings");var a=l(n);var o=e("../const");var s=e("./TickerListener");var u=l(s);function l(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var f=function(){function e(){var t=this;h(this,e);this._head=new u.default(null,null,Infinity);this._requestId=null;this._maxElapsedMS=100;this.autoStart=false;this.deltaTime=1;this.elapsedMS=1/a.default.TARGET_FPMS;this.lastTime=-1;this.speed=1;this.started=false;this._tick=function(e){t._requestId=null;if(t.started){t.update(e);if(t.started&&t._requestId===null&&t._head.next){t._requestId=requestAnimationFrame(t._tick)}}}}e.prototype._requestIfNeeded=function e(){if(this._requestId===null&&this._head.next){this.lastTime=performance.now();this._requestId=requestAnimationFrame(this._tick)}};e.prototype._cancelIfNeeded=function e(){if(this._requestId!==null){cancelAnimationFrame(this._requestId);this._requestId=null}};e.prototype._startIfPossible=function e(){if(this.started){this._requestIfNeeded()}else if(this.autoStart){this.start()}};e.prototype.add=function e(t,r){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:o.UPDATE_PRIORITY.NORMAL;return this._addListener(new u.default(t,r,i))};e.prototype.addOnce=function e(t,r){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:o.UPDATE_PRIORITY.NORMAL;return this._addListener(new u.default(t,r,i,true))};e.prototype._addListener=function e(t){var r=this._head.next;var i=this._head;if(!r){t.connect(i)}else{while(r){if(t.priority>r.priority){t.connect(i);break}i=r;r=r.next}if(!t.previous){t.connect(i)}}this._startIfPossible();return this};e.prototype.remove=function e(t,r){var i=this._head.next;while(i){if(i.match(t,r)){i=i.destroy()}else{i=i.next}}if(!this._head.next){this._cancelIfNeeded()}return this};e.prototype.start=function e(){if(!this.started){this.started=true;this._requestIfNeeded()}};e.prototype.stop=function e(){if(this.started){this.started=false;this._cancelIfNeeded()}};e.prototype.destroy=function e(){this.stop();var t=this._head.next;while(t){t=t.destroy(true)}this._head.destroy();this._head=null};e.prototype.update=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:performance.now();var r=void 0;if(t>this.lastTime){r=this.elapsedMS=t-this.lastTime;if(r>this._maxElapsedMS){r=this._maxElapsedMS}this.deltaTime=r*a.default.TARGET_FPMS*this.speed;var i=this._head;var n=i.next;while(n){n=n.emit(this.deltaTime)}if(!i.next){this._cancelIfNeeded()}}else{this.deltaTime=this.elapsedMS=0}this.lastTime=t};i(e,[{key:"FPS",get:function e(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function e(){return 1e3/this._maxElapsedMS},set:function e(t){var r=Math.min(Math.max(0,t)/1e3,a.default.TARGET_FPMS);this._maxElapsedMS=1/r}}]);return e}();r.default=f},{"../const":46,"../settings":101,"./TickerListener":120}],120:[function(e,t,r){"use strict";r.__esModule=true;function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function(){function n(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;a(this,n);this.fn=e;this.context=t;this.priority=r;this.once=i;this.next=null;this.previous=null;this._destroyed=false}n.prototype.match=function e(t,r){r=r||null;return this.fn===t&&this.context===r};n.prototype.emit=function e(t){if(this.fn){if(this.context){this.fn.call(this.context,t)}else{this.fn(t)}}var r=this.next;if(this.once){this.destroy(true)}if(this._destroyed){this.next=null}return r};n.prototype.connect=function e(t){this.previous=t;if(t.next){t.next.previous=this}this.next=t.next;t.next=this};n.prototype.destroy=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;this._destroyed=true;this.fn=null;this.context=null;if(this.previous){this.previous.next=this.next}if(this.next){this.next.previous=this.previous}var r=this.previous;this.next=t?null:r;this.previous=null;return r};return n}();r.default=i},{}],121:[function(e,t,r){"use strict";r.__esModule=true;r.Ticker=r.shared=undefined;var i=e("./Ticker");var n=a(i);function a(e){return e&&e.__esModule?e:{default:e}}var o=new n.default;o.autoStart=true;o.destroy=function(){};r.shared=o;r.Ticker=n.default},{"./Ticker":119}],122:[function(e,t,r){"use strict";r.__esModule=true;r.default=i;function i(){var e=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);return!e}},{}],123:[function(e,t,r){"use strict";r.__esModule=true;r.default=i;function i(e){var t=e*6;var r=new Uint16Array(t);for(var i=0,n=0;i<t;i+=6,n+=4){r[i+0]=n+0;r[i+1]=n+1;r[i+2]=n+2;r[i+3]=n+0;r[i+4]=n+2;r[i+5]=n+3}return r}},{}],124:[function(e,t,r){"use strict";r.__esModule=true;r.default=s;var i=e("url");var n=a(i);function a(e){return e&&e.__esModule?e:{default:e}}var o=void 0;function s(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:window.location;if(e.indexOf("data:")===0){return""}t=t||window.location;if(!o){o=document.createElement("a")}o.href=e;e=n.default.parse(o.href);var r=!e.port&&t.port===""||e.port===t.port;if(e.hostname!==t.hostname||!r||e.protocol!==t.protocol){return"anonymous"}return""}},{url:38}],125:[function(e,t,r){"use strict";r.__esModule=true;r.premultiplyBlendMode=r.BaseTextureCache=r.TextureCache=r.mixins=r.pluginTarget=r.EventEmitter=r.removeItems=r.isMobile=undefined;r.uid=T;r.hex2rgb=w;r.hex2string=E;r.rgb2hex=S;r.getResolutionOfUrl=O;r.decomposeDataUri=M;r.getUrlFileExtension=P;r.getSvgSize=C;r.skipHello=R;r.sayHello=A;r.isWebGLSupported=I;r.sign=D;r.destroyTextureCache=F;r.clearTextureCache=k;r.correctBlendMode=j;r.premultiplyTint=U;r.premultiplyRgba=X;r.premultiplyTintToRgba=G;var i=e("../const");var n=e("../settings");var a=_(n);var o=e("eventemitter3");var s=_(o);var u=e("./pluginTarget");var l=_(u);var h=e("./mixin");var f=m(h);var c=e("ismobilejs");var d=m(c);var p=e("remove-array-items");var v=_(p);var y=e("./mapPremultipliedBlendModes");var g=_(y);function m(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function _(e){return e&&e.__esModule?e:{default:e}}var b=0;var x=false;r.isMobile=d;r.removeItems=v.default;r.EventEmitter=s.default;r.pluginTarget=l.default;r.mixins=f;function T(){return++b}function w(e,t){t=t||[];t[0]=(e>>16&255)/255;t[1]=(e>>8&255)/255;t[2]=(e&255)/255;return t}function E(e){e=e.toString(16);e="000000".substr(0,6-e.length)+e;return"#"+e}function S(e){return(e[0]*255<<16)+(e[1]*255<<8)+(e[2]*255|0)}function O(e,t){var r=a.default.RETINA_PREFIX.exec(e);if(r){return parseFloat(r[1])}return t!==undefined?t:1}function M(e){var t=i.DATA_URI.exec(e);if(t){return{mediaType:t[1]?t[1].toLowerCase():undefined,subType:t[2]?t[2].toLowerCase():undefined,encoding:t[3]?t[3].toLowerCase():undefined,data:t[4]}}return undefined}function P(e){var t=i.URL_FILE_EXTENSION.exec(e);if(t){return t[1].toLowerCase()}return undefined}function C(e){var t=i.SVG_SIZE.exec(e);var r={};if(t){r[t[1]]=Math.round(parseFloat(t[3]));r[t[5]]=Math.round(parseFloat(t[7]))}return r}function R(){x=true}function A(e){if(x){return}if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var t=["\n %c %c %c PixiJS "+i.VERSION+" -  "+e+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,t)}else if(window.console){window.console.log("PixiJS "+i.VERSION+" - "+e+" - http://www.pixijs.com/")}x=true}function I(){var e={stencil:true,failIfMajorPerformanceCaveat:true};try{if(!window.WebGLRenderingContext){return false}var t=document.createElement("canvas");var r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);var i=!!(r&&r.getContextAttributes().stencil);if(r){var n=r.getExtension("WEBGL_lose_context");if(n){n.loseContext()}}r=null;return i}catch(e){return false}}function D(e){if(e===0)return 0;return e<0?-1:1}var L=r.TextureCache=Object.create(null);var N=r.BaseTextureCache=Object.create(null);function F(){var e=void 0;for(e in L){L[e].destroy()}for(e in N){N[e].destroy()}}function k(){var e=void 0;for(e in L){delete L[e]}for(e in N){delete N[e]}}var B=r.premultiplyBlendMode=(0,g.default)();function j(e,t){return B[t?1:0][e]}function U(e,t){if(t===1){return(t*255<<24)+e}if(t===0){return 0}var r=e>>16&255;var i=e>>8&255;var n=e&255;r=r*t+.5|0;i=i*t+.5|0;n=n*t+.5|0;return(t*255<<24)+(r<<16)+(i<<8)+n}function X(e,t,r,i){r=r||new Float32Array(4);if(i||i===undefined){r[0]=e[0]*t;r[1]=e[1]*t;r[2]=e[2]*t}else{r[0]=e[0];r[1]=e[1];r[2]=e[2]}r[3]=t;return r}function G(e,t,r,i){r=r||new Float32Array(4);r[0]=(e>>16&255)/255;r[1]=(e>>8&255)/255;r[2]=(e&255)/255;if(i||i===undefined){r[0]*=t;r[1]*=t;r[2]*=t}r[3]=t;return r}},{"../const":46,"../settings":101,"./mapPremultipliedBlendModes":126,"./mixin":128,"./pluginTarget":129,eventemitter3:3,ismobilejs:4,"remove-array-items":31}],126:[function(e,t,r){"use strict";r.__esModule=true;r.default=i;var n=e("../const");function i(){var e=[];var t=[];for(var r=0;r<32;r++){e[r]=r;t[r]=r}e[n.BLEND_MODES.NORMAL_NPM]=n.BLEND_MODES.NORMAL;e[n.BLEND_MODES.ADD_NPM]=n.BLEND_MODES.ADD;e[n.BLEND_MODES.SCREEN_NPM]=n.BLEND_MODES.SCREEN;t[n.BLEND_MODES.NORMAL]=n.BLEND_MODES.NORMAL_NPM;t[n.BLEND_MODES.ADD]=n.BLEND_MODES.ADD_NPM;t[n.BLEND_MODES.SCREEN]=n.BLEND_MODES.SCREEN_NPM;var i=[];i.push(t);i.push(e);return i}},{"../const":46}],127:[function(e,t,r){"use strict";r.__esModule=true;r.default=o;var i=e("ismobilejs");var n=a(i);function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(n.default.tablet||n.default.phone){return 4}return e}},{ismobilejs:4}],128:[function(e,t,r){"use strict";r.__esModule=true;r.mixin=i;r.delayMixin=a;r.performMixins=o;function i(e,t){if(!e||!t)return;var r=Object.keys(t);for(var i=0;i<r.length;++i){var n=r[i];Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}}var n=[];function a(e,t){n.push(e,t)}function o(){for(var e=0;e<n.length;e+=2){i(n[e],n[e+1])}n.length=0}},{}],129:[function(e,t,r){"use strict";r.__esModule=true;function i(i){i.__plugins={};i.registerPlugin=function e(t,r){i.__plugins[t]=r};i.prototype.initPlugins=function e(){this.plugins=this.plugins||{};for(var t in i.__plugins){this.plugins[t]=new i.__plugins[t](this)}};i.prototype.destroyPlugins=function e(){for(var t in this.plugins){this.plugins[t].destroy();this.plugins[t]=null}this.plugins=null}}r.default={mixin:function e(t){i(t)}}},{}],130:[function(e,t,r){"use strict";r.__esModule=true;r.default=i;function i(e){var t=e.width;var r=e.height;var i=e.getContext("2d");var n=i.getImageData(0,0,t,r);var a=n.data;var o=a.length;var s={top:null,left:null,right:null,bottom:null};var u=void 0;var l=void 0;var h=void 0;for(u=0;u<o;u+=4){if(a[u+3]!==0){l=u/4%t;h=~~(u/4/t);if(s.top===null){s.top=h}if(s.left===null){s.left=l}else if(l<s.left){s.left=l}if(s.right===null){s.right=l+1}else if(s.right<l){s.right=l+1}if(s.bottom===null){s.bottom=h}else if(s.bottom<h){s.bottom=h}}}t=s.right-s.left;r=s.bottom-s.top+1;var f=i.getImageData(s.left,s.top,t,r);return{height:r,width:t,data:f}}},{}],131:[function(e,t,r){"use strict";r.__esModule=true;r.default=i;function p(e){var t=(new Error).stack;if(typeof t==="undefined"){console.warn("Deprecation Warning: ",e)}else{t=t.split("\n").splice(3).join("\n");if(console.groupCollapsed){console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e);console.warn(t);console.groupEnd()}else{console.warn("Deprecation Warning: ",e);console.warn(t)}}}function i(i){var t=i.mesh,r=i.particles,n=i.extras,a=i.filters,e=i.prepare,o=i.loaders,s=i.interaction;Object.defineProperties(i,{SpriteBatch:{get:function e(){throw new ReferenceError("SpriteBatch does not exist any more, "+"please use the new ParticleContainer instead.")}},AssetLoader:{get:function e(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, "+"please see the new PIXI.loaders.Loader class.")}},Stage:{get:function e(){p("You do not need to use a PIXI Stage any more, you can simply render any container.");return i.Container}},DisplayObjectContainer:{get:function e(){p("DisplayObjectContainer has been shortened to Container, please use Container from now on.");return i.Container}},Strip:{get:function e(){p("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on.");return t.Mesh}},Rope:{get:function e(){p("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on.");return t.Rope}},ParticleContainer:{get:function e(){p("The ParticleContainer class has been moved to particles.ParticleContainer, "+"please use particles.ParticleContainer from now on.");return r.ParticleContainer}},MovieClip:{get:function e(){p("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite.");return n.AnimatedSprite}},TilingSprite:{get:function e(){p("The TilingSprite class has been moved to extras.TilingSprite, "+"please use extras.TilingSprite from now on.");return n.TilingSprite}},BitmapText:{get:function e(){p("The BitmapText class has been moved to extras.BitmapText, "+"please use extras.BitmapText from now on.");return n.BitmapText}},blendModes:{get:function e(){p("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on.");return i.BLEND_MODES}},scaleModes:{get:function e(){p("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on.");return i.SCALE_MODES}},BaseTextureCache:{get:function e(){p("The BaseTextureCache class has been moved to utils.BaseTextureCache, "+"please use utils.BaseTextureCache from now on.");return i.utils.BaseTextureCache}},TextureCache:{get:function e(){p("The TextureCache class has been moved to utils.TextureCache, "+"please use utils.TextureCache from now on.");return i.utils.TextureCache}},math:{get:function e(){p("The math namespace is deprecated, please access members already accessible on PIXI.");return i}},AbstractFilter:{get:function e(){p("AstractFilter has been renamed to Filter, please use PIXI.Filter");return i.Filter}},TransformManual:{get:function e(){p("TransformManual has been renamed to TransformBase, please update your pixi-spine");return i.TransformBase}},TARGET_FPMS:{get:function e(){p("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS");return i.settings.TARGET_FPMS},set:function e(t){p("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS");i.settings.TARGET_FPMS=t}},FILTER_RESOLUTION:{get:function e(){p("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION");return i.settings.FILTER_RESOLUTION},set:function e(t){p("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION");i.settings.FILTER_RESOLUTION=t}},RESOLUTION:{get:function e(){p("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION");return i.settings.RESOLUTION},set:function e(t){p("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION");i.settings.RESOLUTION=t}},MIPMAP_TEXTURES:{get:function e(){p("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES");return i.settings.MIPMAP_TEXTURES},set:function e(t){p("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES");i.settings.MIPMAP_TEXTURES=t}},SPRITE_BATCH_SIZE:{get:function e(){p("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE");return i.settings.SPRITE_BATCH_SIZE},set:function e(t){p("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE");i.settings.SPRITE_BATCH_SIZE=t}},SPRITE_MAX_TEXTURES:{get:function e(){p("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES");return i.settings.SPRITE_MAX_TEXTURES},set:function e(t){p("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES");i.settings.SPRITE_MAX_TEXTURES=t}},RETINA_PREFIX:{get:function e(){p("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX");return i.settings.RETINA_PREFIX},set:function e(t){p("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX");i.settings.RETINA_PREFIX=t}},DEFAULT_RENDER_OPTIONS:{get:function e(){p("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS");return i.settings.RENDER_OPTIONS}}});var u=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}];var l=function e(t){var r=u[t];Object.defineProperty(i[r.parent],"DEFAULT",{get:function e(){p("PIXI."+r.parent+".DEFAULT has been deprecated, "+("please use PIXI.settings."+r.target));return i.settings[r.target]},set:function e(t){p("PIXI."+r.parent+".DEFAULT has been deprecated, "+("please use PIXI.settings."+r.target));i.settings[r.target]=t}})};for(var h=0;h<u.length;h++){l(h)}Object.defineProperties(i.settings,{PRECISION:{get:function e(){p("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT");return i.settings.PRECISION_FRAGMENT},set:function e(t){p("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT");i.settings.PRECISION_FRAGMENT=t}}});if(n.AnimatedSprite){Object.defineProperties(n,{MovieClip:{get:function e(){p("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on.");return n.AnimatedSprite}}})}if(n){Object.defineProperties(n,{TextureTransform:{get:function e(){p("The TextureTransform class has been renamed to TextureMatrix, "+"please use PIXI.TextureMatrix from now on.");return i.TextureMatrix}}})}i.DisplayObject.prototype.generateTexture=function e(t,r,i){p("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)");return t.generateTexture(this,r,i)};i.Graphics.prototype.generateTexture=function e(t,r){p("graphics generate texture has moved to the renderer. "+"Or to render a graphics to a texture using canvas please use generateCanvasTexture");return this.generateCanvasTexture(t,r)};i.GroupD8.isSwapWidthHeight=function e(t){p("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical");return i.GroupD8.isVertical(t)};i.RenderTexture.prototype.render=function e(t,r,i,n){this.legacyRenderer.render(t,this,i,r,!n);p("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")};i.RenderTexture.prototype.getImage=function e(t){p("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)");return this.legacyRenderer.extract.image(t)};i.RenderTexture.prototype.getBase64=function e(t){p("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)");return this.legacyRenderer.extract.base64(t)};i.RenderTexture.prototype.getCanvas=function e(t){p("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)");return this.legacyRenderer.extract.canvas(t)};i.RenderTexture.prototype.getPixels=function e(t){p("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)");return this.legacyRenderer.pixels(t)};i.Sprite.prototype.setTexture=function e(t){this.texture=t;p("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")};if(n.BitmapText){n.BitmapText.prototype.setText=function e(t){this.text=t;p("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")}}i.Text.prototype.setText=function e(t){this.text=t;p("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")};i.Text.calculateFontProperties=function e(t){p("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont");return i.TextMetrics.measureFont(t)};Object.defineProperties(i.Text,{fontPropertiesCache:{get:function e(){p("Text.fontPropertiesCache is deprecated");return i.TextMetrics._fonts}},fontPropertiesCanvas:{get:function e(){p("Text.fontPropertiesCanvas is deprecated");return i.TextMetrics._canvas}},fontPropertiesContext:{get:function e(){p("Text.fontPropertiesContext is deprecated");return i.TextMetrics._context}}});i.Text.prototype.setStyle=function e(t){this.style=t;p("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")};i.Text.prototype.determineFontProperties=function e(t){p("determineFontProperties is now deprecated, please use TextMetrics.measureFont method");return i.TextMetrics.measureFont(t)};i.Text.getFontStyle=function e(t){p("getFontStyle is now deprecated, please use TextStyle.toFontString() instead");t=t||{};if(!(t instanceof i.TextStyle)){t=new i.TextStyle(t)}return t.toFontString()};Object.defineProperties(i.TextStyle.prototype,{font:{get:function e(){p("text style property 'font' is now deprecated, please use the "+"'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var t=typeof this._fontSize==="number"?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+t+" "+this._fontFamily},set:function e(t){p("text style property 'font' is now deprecated, please use the "+"'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on");if(t.indexOf("italic")>1){this._fontStyle="italic"}else if(t.indexOf("oblique")>-1){this._fontStyle="oblique"}else{this._fontStyle="normal"}if(t.indexOf("small-caps")>-1){this._fontVariant="small-caps"}else{this._fontVariant="normal"}var r=t.split(" ");var i=-1;this._fontSize=26;for(var n=0;n<r.length;++n){if(r[n].match(/(px|pt|em|%)/)){i=n;this._fontSize=r[n];break}}this._fontWeight="normal";for(var a=0;a<i;++a){if(r[a].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=r[a];break}}if(i>-1&&i<r.length-1){this._fontFamily="";for(var o=i+1;o<r.length;++o){this._fontFamily+=r[o]+" "}this._fontFamily=this._fontFamily.slice(0,-1)}else{this._fontFamily="Arial"}this.styleID++}}});i.Texture.prototype.setFrame=function e(t){this.frame=t;p("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")};i.Texture.addTextureToCache=function e(t,r){i.Texture.addToCache(t,r);p("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")};i.Texture.removeTextureFromCache=function e(t){p("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. "+"Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. "+"For that, use BaseTexture.removeFromCache");i.BaseTexture.removeFromCache(t);return i.Texture.removeFromCache(t)};Object.defineProperties(a,{AbstractFilter:{get:function e(){p("AstractFilter has been renamed to Filter, please use PIXI.Filter");return i.AbstractFilter}},SpriteMaskFilter:{get:function e(){p("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on.");return i.SpriteMaskFilter}},VoidFilter:{get:function e(){p("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter");return a.AlphaFilter}}});i.utils.uuid=function(){p("utils.uuid() is deprecated, please use utils.uid() from now on.");return i.utils.uid()};i.utils.canUseNewCanvasBlendModes=function(){p("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on");return i.CanvasTinter.canUseMultiply};var f=true;Object.defineProperty(i.utils,"_saidHello",{set:function e(t){if(t){p("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()");this.skipHello()}f=t},get:function e(){return f}});if(e.BasePrepare){e.BasePrepare.prototype.register=function e(t,r){p("renderer.plugins.prepare.register is now deprecated, "+"please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook");if(t){this.registerFindHook(t)}if(r){this.registerUploadHook(r)}return this}}if(e.canvas){Object.defineProperty(e.canvas,"UPLOADS_PER_FRAME",{set:function e(){p("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set "+"renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function e(){p("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use "+"renderer.plugins.prepare.limiter");return NaN}})}if(e.webgl){Object.defineProperty(e.webgl,"UPLOADS_PER_FRAME",{set:function e(){p("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set "+"renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function e(){p("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use "+"renderer.plugins.prepare.limiter");return NaN}})}if(o.Loader){var c=o.Resource;var d=o.Loader;Object.defineProperties(c.prototype,{isJson:{get:function e(){p("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`.");return this.type===c.TYPE.JSON}},isXml:{get:function e(){p("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`.");return this.type===c.TYPE.XML}},isImage:{get:function e(){p("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`.");return this.type===c.TYPE.IMAGE}},isAudio:{get:function e(){p("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`.");return this.type===c.TYPE.AUDIO}},isVideo:{get:function e(){p("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`.");return this.type===c.TYPE.VIDEO}}});Object.defineProperties(d.prototype,{before:{get:function e(){p("The before() method is deprecated, please use pre().");return this.pre}},after:{get:function e(){p("The after() method is deprecated, please use use().");return this.use}}})}if(s.interactiveTarget){Object.defineProperty(s.interactiveTarget,"defaultCursor",{set:function e(t){p("Property defaultCursor has been replaced with 'cursor'. ");this.cursor=t},get:function e(){p("Property defaultCursor has been replaced with 'cursor'. ");return this.cursor}})}if(s.InteractionManager){Object.defineProperty(s.InteractionManager,"defaultCursorStyle",{set:function e(t){p("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. ");this.cursorStyles.default=t},get:function e(){p("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. ");return this.cursorStyles.default}});Object.defineProperty(s.InteractionManager,"currentCursorStyle",{set:function e(t){p("Property currentCursorStyle has been removed."+"See the currentCursorMode property, which works differently.");this.currentCursorMode=t},get:function e(){p("Property currentCursorStyle has been removed."+"See the currentCursorMode property, which works differently.");return this.currentCursorMode}})}}},{}],132:[function(e,t,r){"use strict";r.__esModule=true;var i=e("../../core");var f=n(i);function n(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var c=new f.Rectangle;var o=function(){function t(e){a(this,t);this.renderer=e;e.extract=this}t.prototype.image=function e(t){var e=new Image;e.src=this.base64(t);return e};t.prototype.base64=function e(t){return this.canvas(t).toDataURL()};t.prototype.canvas=function e(t){var r=this.renderer;var i=void 0;var n=void 0;var a=void 0;var o=void 0;if(t){if(t instanceof f.RenderTexture){o=t}else{o=r.generateTexture(t)}}if(o){i=o.baseTexture._canvasRenderTarget.context;n=o.baseTexture._canvasRenderTarget.resolution;a=o.frame}else{i=r.rootContext;a=c;a.width=this.renderer.width;a.height=this.renderer.height}var s=a.width*n;var u=a.height*n;var l=new f.CanvasRenderTarget(s,u);var h=i.getImageData(a.x*n,a.y*n,s,u);l.context.putImageData(h,0,0);return l.canvas};t.prototype.pixels=function e(t){var r=this.renderer;var i=void 0;var n=void 0;var a=void 0;var o=void 0;if(t){if(t instanceof f.RenderTexture){o=t}else{o=r.generateTexture(t)}}if(o){i=o.baseTexture._canvasRenderTarget.context;n=o.baseTexture._canvasRenderTarget.resolution;a=o.frame}else{i=r.rootContext;a=c;a.width=r.width;a.height=r.height}return i.getImageData(0,0,a.width*n,a.height*n).data};t.prototype.destroy=function e(){this.renderer.extract=null;this.renderer=null};return t}();r.default=o;f.CanvasRenderer.registerPlugin("extract",o)},{"../../core":65}],133:[function(e,t,r){"use strict";r.__esModule=true;var i=e("./webgl/WebGLExtract");Object.defineProperty(r,"webgl",{enumerable:true,get:function e(){return a(i).default}});var n=e("./canvas/CanvasExtract");Object.defineProperty(r,"canvas",{enumerable:true,get:function e(){return a(n).default}});function a(e){return e&&e.__esModule?e:{default:e}}},{"./canvas/CanvasExtract":132,"./webgl/WebGLExtract":134}],134:[function(e,t,r){"use strict";r.__esModule=true;var i=e("../../core");var p=n(i);function n(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var v=new p.Rectangle;var y=4;var o=function(){function t(e){a(this,t);this.renderer=e;e.extract=this}t.prototype.image=function e(t){var e=new Image;e.src=this.base64(t);return e};t.prototype.base64=function e(t){return this.canvas(t).toDataURL()};t.prototype.canvas=function e(t){var r=this.renderer;var i=void 0;var n=void 0;var a=void 0;var o=false;var s=void 0;if(t){if(t instanceof p.RenderTexture){s=t}else{s=this.renderer.generateTexture(t)}}if(s){i=s.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID];n=i.resolution;a=s.frame;o=false}else{i=this.renderer.rootRenderTarget;n=i.resolution;o=true;a=v;a.width=i.size.width;a.height=i.size.height}var u=a.width*n;var l=a.height*n;var h=new p.CanvasRenderTarget(u,l);if(i){r.bindRenderTarget(i);var f=new Uint8Array(y*u*l);var c=r.gl;c.readPixels(a.x*n,a.y*n,u,l,c.RGBA,c.UNSIGNED_BYTE,f);var d=h.context.getImageData(0,0,u,l);d.data.set(f);h.context.putImageData(d,0,0);if(o){h.context.scale(1,-1);h.context.drawImage(h.canvas,0,-l)}}return h.canvas};t.prototype.pixels=function e(t){var r=this.renderer;var i=void 0;var n=void 0;var a=void 0;var o=void 0;if(t){if(t instanceof p.RenderTexture){o=t}else{o=this.renderer.generateTexture(t)}}if(o){i=o.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID];n=i.resolution;a=o.frame}else{i=this.renderer.rootRenderTarget;n=i.resolution;a=v;a.width=i.size.width;a.height=i.size.height}var s=a.width*n;var u=a.height*n;var l=new Uint8Array(y*s*u);if(i){r.bindRenderTarget(i);var h=r.gl;h.readPixels(a.x*n,a.y*n,s,u,h.RGBA,h.UNSIGNED_BYTE,l)}return l};t.prototype.destroy=function e(){this.renderer.extract=null;this.renderer=null};return t}();r.default=o;p.WebGLRenderer.registerPlugin("extract",o)},{"../../core":65}],135:[function(e,t,r){"use strict";r.__esModule=true;var a=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var i=e("../core");var o=n(i);function n(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function l(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var h=function(i){l(n,i);function n(e,t){s(this,n);var r=u(this,i.call(this,e[0]instanceof o.Texture?e[0]:e[0].texture));r._textures=null;r._durations=null;r.textures=e;r._autoUpdate=t!==false;r.animationSpeed=1;r.loop=true;r.onComplete=null;r.onFrameChange=null;r.onLoop=null;r._currentTime=0;r.playing=false;return r}n.prototype.stop=function e(){if(!this.playing){return}this.playing=false;if(this._autoUpdate){o.ticker.shared.remove(this.update,this)}};n.prototype.play=function e(){if(this.playing){return}this.playing=true;if(this._autoUpdate){o.ticker.shared.add(this.update,this,o.UPDATE_PRIORITY.HIGH)}};n.prototype.gotoAndStop=function e(t){this.stop();var r=this.currentFrame;this._currentTime=t;if(r!==this.currentFrame){this.updateTexture()}};n.prototype.gotoAndPlay=function e(t){var r=this.currentFrame;this._currentTime=t;if(r!==this.currentFrame){this.updateTexture()}this.play()};n.prototype.update=function e(t){var r=this.animationSpeed*t;var i=this.currentFrame;if(this._durations!==null){var n=this._currentTime%1*this._durations[this.currentFrame];n+=r/60*1e3;while(n<0){this._currentTime--;n+=this._durations[this.currentFrame]}var a=Math.sign(this.animationSpeed*t);this._currentTime=Math.floor(this._currentTime);while(n>=this._durations[this.currentFrame]){n-=this._durations[this.currentFrame]*a;this._currentTime+=a}this._currentTime+=n/this._durations[this.currentFrame]}else{this._currentTime+=r}if(this._currentTime<0&&!this.loop){this.gotoAndStop(0);if(this.onComplete){this.onComplete()}}else if(this._currentTime>=this._textures.length&&!this.loop){this.gotoAndStop(this._textures.length-1);if(this.onComplete){this.onComplete()}}else if(i!==this.currentFrame){if(this.loop&&this.onLoop){if(this.animationSpeed>0&&this.currentFrame<i){this.onLoop()}else if(this.animationSpeed<0&&this.currentFrame>i){this.onLoop()}}this.updateTexture()}};n.prototype.updateTexture=function e(){this._texture=this._textures[this.currentFrame];this._textureID=-1;this.cachedTint=16777215;if(this.onFrameChange){this.onFrameChange(this.currentFrame)}};n.prototype.destroy=function e(t){this.stop();i.prototype.destroy.call(this,t)};n.fromFrames=function e(t){var r=[];for(var i=0;i<t.length;++i){r.push(o.Texture.fromFrame(t[i]))}return new n(r)};n.fromImages=function e(t){var r=[];for(var i=0;i<t.length;++i){r.push(o.Texture.fromImage(t[i]))}return new n(r)};a(n,[{key:"totalFrames",get:function e(){return this._textures.length}},{key:"textures",get:function e(){return this._textures},set:function e(t){if(t[0]instanceof o.Texture){this._textures=t;this._durations=null}else{this._textures=[];this._durations=[];for(var r=0;r<t.length;r++){this._textures.push(t[r].texture);this._durations.push(t[r].time)}}this.gotoAndStop(0);this.updateTexture()}},{key:"currentFrame",get:function e(){var t=Math.floor(this._currentTime)%this._textures.length;if(t<0){t+=this._textures.length}return t}}]);return n}(o.Sprite);r.default=h},{"../core":65}],136:[function(e,t,r){"use strict";r.__esModule=true;var n=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var i=e("../core");var M=l(i);var a=e("../core/math/ObservablePoint");var o=u(a);var _=e("../core/utils");var s=e("../core/settings");var b=u(s);function u(e){return e&&e.__esModule?e:{default:e}}function l(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var d=function(i){c(O,i);function O(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};h(this,O);var r=f(this,i.call(this));r._textWidth=0;r._textHeight=0;r._glyphs=[];r._font={tint:t.tint!==undefined?t.tint:16777215,align:t.align||"left",name:null,size:0};r.font=t.font;r._text=e;r._maxWidth=0;r._maxLineHeight=0;r._anchor=new o.default(function(){r.dirty=true},r,0,0);r.dirty=false;r.updateText();return r}O.prototype.updateText=function e(){var t=O.fonts[this._font.name];var r=this._font.size/t.size;var i=new M.Point;var n=[];var a=[];var o=null;var s=0;var u=0;var l=0;var h=-1;var f=0;var c=0;var d=0;for(var p=0;p<this.text.length;p++){var v=this.text.charCodeAt(p);if(/(\s)/.test(this.text.charAt(p))){h=p;f=s}if(/(?:\r\n|\r|\n)/.test(this.text.charAt(p))){a.push(s);u=Math.max(u,s);l++;i.x=0;i.y+=t.lineHeight;o=null;continue}if(h!==-1&&this._maxWidth>0&&i.x*r>this._maxWidth){M.utils.removeItems(n,h-c,p-h);p=h;h=-1;++c;a.push(f);u=Math.max(u,f);l++;i.x=0;i.y+=t.lineHeight;o=null;continue}var y=t.chars[v];if(!y){continue}if(o&&y.kerning[o]){i.x+=y.kerning[o]}n.push({texture:y.texture,line:l,charCode:v,position:new M.Point(i.x+y.xOffset,i.y+y.yOffset)});s=i.x+(y.texture.width+y.xOffset);i.x+=y.xAdvance;d=Math.max(d,y.yOffset+y.texture.height);o=v}a.push(s);u=Math.max(u,s);var g=[];for(var m=0;m<=l;m++){var _=0;if(this._font.align==="right"){_=u-a[m]}else if(this._font.align==="center"){_=(u-a[m])/2}g.push(_)}var b=n.length;var x=this.tint;for(var T=0;T<b;T++){var w=this._glyphs[T];if(w){w.texture=n[T].texture}else{w=new M.Sprite(n[T].texture);this._glyphs.push(w)}w.position.x=(n[T].position.x+g[n[T].line])*r;w.position.y=n[T].position.y*r;w.scale.x=w.scale.y=r;w.tint=x;if(!w.parent){this.addChild(w)}}for(var E=b;E<this._glyphs.length;++E){this.removeChild(this._glyphs[E])}this._textWidth=u*r;this._textHeight=(i.y+t.lineHeight)*r;if(this.anchor.x!==0||this.anchor.y!==0){for(var S=0;S<b;S++){this._glyphs[S].x-=this._textWidth*this.anchor.x;this._glyphs[S].y-=this._textHeight*this.anchor.y}}this._maxLineHeight=d*r};O.prototype.updateTransform=function e(){this.validate();this.containerUpdateTransform()};O.prototype.getLocalBounds=function e(){this.validate();return i.prototype.getLocalBounds.call(this)};O.prototype.validate=function e(){if(this.dirty){this.updateText();this.dirty=false}};O.registerFont=function e(t,r){var i={};var n=t.getElementsByTagName("info")[0];var a=t.getElementsByTagName("common")[0];var o=t.getElementsByTagName("page")[0].getAttribute("file");var s=(0,_.getResolutionOfUrl)(o,b.default.RESOLUTION);i.font=n.getAttribute("face");i.size=parseInt(n.getAttribute("size"),10);i.lineHeight=parseInt(a.getAttribute("lineHeight"),10)/s;i.chars={};var u=t.getElementsByTagName("char");for(var l=0;l<u.length;l++){var h=u[l];var f=parseInt(h.getAttribute("id"),10);var c=new M.Rectangle(parseInt(h.getAttribute("x"),10)/s+r.frame.x/s,parseInt(h.getAttribute("y"),10)/s+r.frame.y/s,parseInt(h.getAttribute("width"),10)/s,parseInt(h.getAttribute("height"),10)/s);i.chars[f]={xOffset:parseInt(h.getAttribute("xoffset"),10)/s,yOffset:parseInt(h.getAttribute("yoffset"),10)/s,xAdvance:parseInt(h.getAttribute("xadvance"),10)/s,kerning:{},texture:new M.Texture(r.baseTexture,c)}}var d=t.getElementsByTagName("kerning");for(var p=0;p<d.length;p++){var v=d[p];var y=parseInt(v.getAttribute("first"),10)/s;var g=parseInt(v.getAttribute("second"),10)/s;var m=parseInt(v.getAttribute("amount"),10)/s;if(i.chars[g]){i.chars[g].kerning[y]=m}}O.fonts[i.font]=i;return i};n(O,[{key:"tint",get:function e(){return this._font.tint},set:function e(t){this._font.tint=typeof t==="number"&&t>=0?t:16777215;this.dirty=true}},{key:"align",get:function e(){return this._font.align},set:function e(t){this._font.align=t||"left";this.dirty=true}},{key:"anchor",get:function e(){return this._anchor},set:function e(t){if(typeof t==="number"){this._anchor.set(t)}else{this._anchor.copy(t)}}},{key:"font",get:function e(){return this._font},set:function e(t){if(!t){return}if(typeof t==="string"){t=t.split(" ");this._font.name=t.length===1?t[0]:t.slice(1).join(" ");this._font.size=t.length>=2?parseInt(t[0],10):O.fonts[this._font.name].size}else{this._font.name=t.name;this._font.size=typeof t.size==="number"?t.size:parseInt(t.size,10)}this.dirty=true}},{key:"text",get:function e(){return this._text},set:function e(t){t=t.toString()||" ";if(this._text===t){return}this._text=t;this.dirty=true}},{key:"maxWidth",get:function e(){return this._maxWidth},set:function e(t){if(this._maxWidth===t){return}this._maxWidth=t;this.dirty=true}},{key:"maxLineHeight",get:function e(){this.validate();return this._maxLineHeight}},{key:"textWidth",get:function e(){this.validate();return this._textWidth}},{key:"textHeight",get:function e(){this.validate();return this._textHeight}}]);return O}(M.Container);r.default=d;d.fonts={}},{"../core":65,"../core/math/ObservablePoint":68,"../core/settings":101,"../core/utils":125}],137:[function(e,t,r){"use strict";r.__esModule=true;var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var n=e("../core");var d=s(n);var a=e("../core/sprites/canvas/CanvasTinter");var p=o(a);function o(e){return e&&e.__esModule?e:{default:e}}function s(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var f=new d.Point;var c=function(n){h(o,n);function o(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:100;u(this,o);var i=l(this,n.call(this,e));i.tileTransform=new d.TransformStatic;i._width=t;i._height=r;i._canvasPattern=null;i.uvTransform=e.transform||new d.TextureMatrix(e);i.pluginName="tilingSprite";i.uvRespectAnchor=false;return i}o.prototype._onTextureUpdate=function e(){if(this.uvTransform){this.uvTransform.texture=this._texture}this.cachedTint=16777215};o.prototype._renderWebGL=function e(t){var r=this._texture;if(!r||!r.valid){return}this.tileTransform.updateLocalTransform();this.uvTransform.update();t.setObjectRenderer(t.plugins[this.pluginName]);t.plugins[this.pluginName].render(this)};o.prototype._renderCanvas=function e(t){var r=this._texture;if(!r.baseTexture.hasLoaded){return}var i=t.context;var n=this.worldTransform;var a=t.resolution;var o=r.baseTexture;var s=o.resolution;var u=this.tilePosition.x/this.tileScale.x%r._frame.width*s;var l=this.tilePosition.y/this.tileScale.y%r._frame.height*s;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var h=new d.CanvasRenderTarget(r._frame.width,r._frame.height,s);if(this.tint!==16777215){this.tintedTexture=p.default.getTintedTexture(this,this.tint);h.context.drawImage(this.tintedTexture,0,0)}else{h.context.drawImage(o.source,-r._frame.x*s,-r._frame.y*s)}this.cachedTint=this.tint;this._canvasPattern=h.context.createPattern(h.canvas,"repeat")}i.globalAlpha=this.worldAlpha;i.setTransform(n.a*a,n.b*a,n.c*a,n.d*a,n.tx*a,n.ty*a);t.setBlendMode(this.blendMode);i.fillStyle=this._canvasPattern;i.scale(this.tileScale.x/s,this.tileScale.y/s);var f=this.anchor.x*-this._width;var c=this.anchor.y*-this._height;if(this.uvRespectAnchor){i.translate(u,l);i.fillRect(-u+f,-l+c,this._width/this.tileScale.x*s,this._height/this.tileScale.y*s)}else{i.translate(u+f,l+c);i.fillRect(-u,-l,this._width/this.tileScale.x*s,this._height/this.tileScale.y*s)}};o.prototype._calculateBounds=function e(){var t=this._width*-this._anchor._x;var r=this._height*-this._anchor._y;var i=this._width*(1-this._anchor._x);var n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,r,i,n)};o.prototype.getLocalBounds=function e(t){if(this.children.length===0){this._bounds.minX=this._width*-this._anchor._x;this._bounds.minY=this._height*-this._anchor._y;this._bounds.maxX=this._width*(1-this._anchor._x);this._bounds.maxY=this._height*(1-this._anchor._x);if(!t){if(!this._localBoundsRect){this._localBoundsRect=new d.Rectangle}t=this._localBoundsRect}return this._bounds.getRectangle(t)}return n.prototype.getLocalBounds.call(this,t)};o.prototype.containsPoint=function e(t){this.worldTransform.applyInverse(t,f);var r=this._width;var i=this._height;var n=-r*this.anchor._x;if(f.x>=n&&f.x<n+r){var a=-i*this.anchor._y;if(f.y>=a&&f.y<a+i){return true}}return false};o.prototype.destroy=function e(t){n.prototype.destroy.call(this,t);this.tileTransform=null;this.uvTransform=null};o.from=function e(t,r,i){return new o(d.Texture.from(t),r,i)};o.fromFrame=function e(t,r,i){var n=d.utils.TextureCache[t];if(!n){throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this)}return new o(n,r,i)};o.fromImage=function e(t,r,i,n,a){return new o(d.Texture.fromImage(t,n,a),r,i)};i(o,[{key:"clampMargin",get:function e(){return this.uvTransform.clampMargin},set:function e(t){this.uvTransform.clampMargin=t;this.uvTransform.update(true)}},{key:"tileScale",get:function e(){return this.tileTransform.scale},set:function e(t){this.tileTransform.scale.copy(t)}},{key:"tilePosition",get:function e(){return this.tileTransform.position},set:function e(t){this.tileTransform.position.copy(t)}},{key:"width",get:function e(){return this._width},set:function e(t){this._width=t}},{key:"height",get:function e(){return this._height},set:function e(t){this._height=t}}]);return o}(d.Sprite);r.default=c},{"../core":65,"../core/sprites/canvas/CanvasTinter":104}],138:[function(e,t,r){"use strict";var i=e("../core");var f=s(i);var n=e("../core/textures/Texture");var c=o(n);var a=e("../core/textures/BaseTexture");var d=o(a);var p=e("../core/utils");function o(e){return e&&e.__esModule?e:{default:e}}function s(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var l=f.DisplayObject;var v=new f.Matrix;l.prototype._cacheAsBitmap=false;l.prototype._cacheData=false;var h=function e(){u(this,e);this.textureCacheId=null;this.originalRenderWebGL=null;this.originalRenderCanvas=null;this.originalCalculateBounds=null;this.originalGetLocalBounds=null;this.originalUpdateTransform=null;this.originalHitTest=null;this.originalDestroy=null;this.originalMask=null;this.originalFilterArea=null;this.sprite=null};Object.defineProperties(l.prototype,{cacheAsBitmap:{get:function e(){return this._cacheAsBitmap},set:function e(t){if(this._cacheAsBitmap===t){return}this._cacheAsBitmap=t;var r=void 0;if(t){if(!this._cacheData){this._cacheData=new h}r=this._cacheData;r.originalRenderWebGL=this.renderWebGL;r.originalRenderCanvas=this.renderCanvas;r.originalUpdateTransform=this.updateTransform;r.originalCalculateBounds=this._calculateBounds;r.originalGetLocalBounds=this.getLocalBounds;r.originalDestroy=this.destroy;r.originalContainsPoint=this.containsPoint;r.originalMask=this._mask;r.originalFilterArea=this.filterArea;this.renderWebGL=this._renderCachedWebGL;this.renderCanvas=this._renderCachedCanvas;this.destroy=this._cacheAsBitmapDestroy}else{r=this._cacheData;if(r.sprite){this._destroyCachedDisplayObject()}this.renderWebGL=r.originalRenderWebGL;this.renderCanvas=r.originalRenderCanvas;this._calculateBounds=r.originalCalculateBounds;this.getLocalBounds=r.originalGetLocalBounds;this.destroy=r.originalDestroy;this.updateTransform=r.originalUpdateTransform;this.containsPoint=r.originalContainsPoint;this._mask=r.originalMask;this.filterArea=r.originalFilterArea}}}});l.prototype._renderCachedWebGL=function e(t){if(!this.visible||this.worldAlpha<=0||!this.renderable){return}this._initCachedDisplayObject(t);this._cacheData.sprite._transformID=-1;this._cacheData.sprite.worldAlpha=this.worldAlpha;this._cacheData.sprite._renderWebGL(t)};l.prototype._initCachedDisplayObject=function e(t){if(this._cacheData&&this._cacheData.sprite){return}var r=this.alpha;this.alpha=1;t.currentRenderer.flush();var i=this.getLocalBounds().clone();if(this._filters){var n=this._filters[0].padding;i.pad(n)}var a=t._activeRenderTarget;var o=t.filterManager.filterStack;var s=f.RenderTexture.create(i.width|0,i.height|0);var u="cacheAsBitmap_"+(0,p.uid)();this._cacheData.textureCacheId=u;d.default.addToCache(s.baseTexture,u);c.default.addToCache(s,u);var l=v;l.tx=-i.x;l.ty=-i.y;this.transform.worldTransform.identity();this.renderWebGL=this._cacheData.originalRenderWebGL;t.render(this,s,true,l,true);t.bindRenderTarget(a);t.filterManager.filterStack=o;this.renderWebGL=this._renderCachedWebGL;this.updateTransform=this.displayObjectUpdateTransform;this._mask=null;this.filterArea=null;var h=new f.Sprite(s);h.transform.worldTransform=this.transform.worldTransform;h.anchor.x=-(i.x/i.width);h.anchor.y=-(i.y/i.height);h.alpha=r;h._bounds=this._bounds;this._calculateBounds=this._calculateCachedBounds;this.getLocalBounds=this._getCachedLocalBounds;this._cacheData.sprite=h;this.transform._parentID=-1;if(!this.parent){this.parent=t._tempDisplayObjectParent;this.updateTransform();this.parent=null}else{this.updateTransform()}this.containsPoint=h.containsPoint.bind(h)};l.prototype._renderCachedCanvas=function e(t){if(!this.visible||this.worldAlpha<=0||!this.renderable){return}this._initCachedDisplayObjectCanvas(t);this._cacheData.sprite.worldAlpha=this.worldAlpha;this._cacheData.sprite.renderCanvas(t)};l.prototype._initCachedDisplayObjectCanvas=function e(t){if(this._cacheData&&this._cacheData.sprite){return}var r=this.getLocalBounds();var i=this.alpha;this.alpha=1;var n=t.context;var a=f.RenderTexture.create(r.width|0,r.height|0);var o="cacheAsBitmap_"+(0,p.uid)();this._cacheData.textureCacheId=o;d.default.addToCache(a.baseTexture,o);c.default.addToCache(a,o);var s=v;this.transform.localTransform.copy(s);s.invert();s.tx-=r.x;s.ty-=r.y;this.renderCanvas=this._cacheData.originalRenderCanvas;t.render(this,a,true,s,false);t.context=n;this.renderCanvas=this._renderCachedCanvas;this._calculateBounds=this._calculateCachedBounds;this._mask=null;this.filterArea=null;var u=new f.Sprite(a);u.transform.worldTransform=this.transform.worldTransform;u.anchor.x=-(r.x/r.width);u.anchor.y=-(r.y/r.height);u._bounds=this._bounds;u.alpha=i;if(!this.parent){this.parent=t._tempDisplayObjectParent;this.updateTransform();this.parent=null}else{this.updateTransform()}this.updateTransform=this.displayObjectUpdateTransform;this._cacheData.sprite=u;this.containsPoint=u.containsPoint.bind(u)};l.prototype._calculateCachedBounds=function e(){this._cacheData.sprite._calculateBounds()};l.prototype._getCachedLocalBounds=function e(){return this._cacheData.sprite.getLocalBounds()};l.prototype._destroyCachedDisplayObject=function e(){this._cacheData.sprite._texture.destroy(true);this._cacheData.sprite=null;d.default.removeFromCache(this._cacheData.textureCacheId);c.default.removeFromCache(this._cacheData.textureCacheId);this._cacheData.textureCacheId=null};l.prototype._cacheAsBitmapDestroy=function e(t){this.cacheAsBitmap=false;this.destroy(t)}},{"../core":65,"../core/textures/BaseTexture":112,"../core/textures/Texture":115,"../core/utils":125}],139:[function(e,t,r){"use strict";var i=e("../core");var n=a(i);function a(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}n.DisplayObject.prototype.name=null;n.Container.prototype.getChildByName=function e(t){for(var r=0;r<this.children.length;r++){if(this.children[r].name===t){return this.children[r]}}return null}},{"../core":65}],140:[function(e,t,r){"use strict";var i=e("../core");var n=a(i);function a(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}n.DisplayObject.prototype.getGlobalPosition=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new n.Point;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(this.parent){this.parent.toGlobal(this.position,t,r)}else{t.x=this.position.x;t.y=this.position.y}return t}},{"../core":65}],141:[function(e,t,r){"use strict";r.__esModule=true;r.BitmapText=r.TilingSpriteRenderer=r.TilingSprite=r.AnimatedSprite=undefined;var i=e("./AnimatedSprite");Object.defineProperty(r,"AnimatedSprite",{enumerable:true,get:function e(){return s(i).default}});var n=e("./TilingSprite");Object.defineProperty(r,"TilingSprite",{enumerable:true,get:function e(){return s(n).default}});var a=e("./webgl/TilingSpriteRenderer");Object.defineProperty(r,"TilingSpriteRenderer",{enumerable:true,get:function e(){return s(a).default}});var o=e("./BitmapText");Object.defineProperty(r,"BitmapText",{enumerable:true,get:function e(){return s(o).default}});e("./cacheAsBitmap");e("./getChildByName");e("./getGlobalPosition");function s(e){return e&&e.__esModule?e:{default:e}}},{"./AnimatedSprite":135,"./BitmapText":136,"./TilingSprite":137,"./cacheAsBitmap":138,"./getChildByName":139,"./getGlobalPosition":140,"./webgl/TilingSpriteRenderer":142}],142:[function(e,t,r){"use strict";r.__esModule=true;var i=e("../../core");var v=a(i);var y=e("../../core/const");var n=e("path");function a(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var g=new v.Matrix;var l=function(r){u(i,r);function i(e){o(this,i);var t=s(this,r.call(this,e));t.shader=null;t.simpleShader=null;t.quad=null;return t}i.prototype.onContextChange=function e(){var t=this.renderer.gl;this.shader=new v.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n");this.simpleShader=new v.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n");this.renderer.bindVao(null);this.quad=new v.Quad(t,this.renderer.state.attribState);this.quad.initVao(this.shader)};i.prototype.render=function e(t){var r=this.renderer;var i=this.quad;r.bindVao(i.vao);var n=i.vertices;n[0]=n[6]=t._width*-t.anchor.x;n[1]=n[3]=t._height*-t.anchor.y;n[2]=n[4]=t._width*(1-t.anchor.x);n[5]=n[7]=t._height*(1-t.anchor.y);if(t.uvRespectAnchor){n=i.uvs;n[0]=n[6]=-t.anchor.x;n[1]=n[3]=-t.anchor.y;n[2]=n[4]=1-t.anchor.x;n[5]=n[7]=1-t.anchor.y}i.upload();var a=t._texture;var o=a.baseTexture;var s=t.tileTransform.localTransform;var u=t.uvTransform;var l=o.isPowerOfTwo&&a.frame.width===o.width&&a.frame.height===o.height;if(l){if(!o._glTextures[r.CONTEXT_UID]){if(o.wrapMode===y.WRAP_MODES.CLAMP){o.wrapMode=y.WRAP_MODES.REPEAT}}else{l=o.wrapMode!==y.WRAP_MODES.CLAMP}}var h=l?this.simpleShader:this.shader;r.bindShader(h);var f=a.width;var c=a.height;var d=t._width;var p=t._height;g.set(s.a*f/d,s.b*f/p,s.c*c/d,s.d*c/p,s.tx/d,s.ty/p);g.invert();if(l){g.prepend(u.mapCoord)}else{h.uniforms.uMapCoord=u.mapCoord.toArray(true);h.uniforms.uClampFrame=u.uClampFrame;h.uniforms.uClampOffset=u.uClampOffset}h.uniforms.uTransform=g.toArray(true);h.uniforms.uColor=v.utils.premultiplyTintToRgba(t.tint,t.worldAlpha,h.uniforms.uColor,o.premultipliedAlpha);h.uniforms.translationMatrix=t.transform.worldTransform.toArray(true);h.uniforms.uSampler=r.bindTexture(a);r.setBlendMode(v.utils.correctBlendMode(t.blendMode,o.premultipliedAlpha));i.vao.draw(this.renderer.gl.TRIANGLES,6,0)};return i}(v.ObjectRenderer);r.default=l;v.WebGLRenderer.registerPlugin("tilingSprite",l)},{"../../core":65,"../../core/const":46,path:8}],143:[function(e,t,r){"use strict";r.__esModule=true;var n=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var i=e("../../core");var a=s(i);var o=e("path");function s(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var f=function(r){h(i,r);function i(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;u(this,i);var t=l(this,r.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n"));t.alpha=e;t.glShaderKey="alpha";return t}n(i,[{key:"alpha",get:function e(){return this.uniforms.uAlpha},set:function e(t){this.uniforms.uAlpha=t}}]);return i}(a.Filter);r.default=f},{"../../core":65,path:8}],144:[function(e,t,r){"use strict";r.__esModule=true;var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var n=e("../../core");var s=f(n);var a=e("./BlurXFilter");var u=h(a);var o=e("./BlurYFilter");var l=h(o);function h(e){return e&&e.__esModule?e:{default:e}}function f(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var v=function(a){p(o,a);function o(e,t,r,i){c(this,o);var n=d(this,a.call(this));n.blurXFilter=new u.default(e,t,r,i);n.blurYFilter=new l.default(e,t,r,i);n.padding=0;n.resolution=r||s.settings.RESOLUTION;n.quality=t||4;n.blur=e||8;return n}o.prototype.apply=function e(t,r,i){var n=t.getRenderTarget(true);this.blurXFilter.apply(t,r,n,true);this.blurYFilter.apply(t,n,i,false);t.returnRenderTarget(n)};i(o,[{key:"blur",get:function e(){return this.blurXFilter.blur},set:function e(t){this.blurXFilter.blur=this.blurYFilter.blur=t;this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}},{key:"quality",get:function e(){return this.blurXFilter.quality},set:function e(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:"blurX",get:function e(){return this.blurXFilter.blur},set:function e(t){this.blurXFilter.blur=t;this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}},{key:"blurY",get:function e(){return this.blurYFilter.blur},set:function e(t){this.blurYFilter.blur=t;this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}},{key:"blendMode",get:function e(){return this.blurYFilter._blendMode},set:function e(t){this.blurYFilter._blendMode=t}}]);return o}(s.Filter);r.default=v},{"../../core":65,"./BlurXFilter":145,"./BlurYFilter":146}],145:[function(e,t,r){"use strict";r.__esModule=true;var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var n=e("../../core");var l=h(n);var a=e("./generateBlurVertSource");var c=u(a);var o=e("./generateBlurFragSource");var d=u(o);var s=e("./getMaxBlurKernelSize");var p=u(s);function u(e){return e&&e.__esModule?e:{default:e}}function h(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function v(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var g=function(s){y(u,s);function u(e,t,r,i){f(this,u);i=i||5;var n=(0,c.default)(i,true);var a=(0,d.default)(i);var o=v(this,s.call(this,n,a));o.resolution=r||l.settings.RESOLUTION;o._quality=0;o.quality=t||4;o.strength=e||8;o.firstRun=true;return o}u.prototype.apply=function e(t,r,i,n){if(this.firstRun){var a=t.renderer.gl;var o=(0,p.default)(a);this.vertexSrc=(0,c.default)(o,true);this.fragmentSrc=(0,d.default)(o);this.firstRun=false}this.uniforms.strength=1/i.size.width*(i.size.width/r.size.width);this.uniforms.strength*=this.strength;this.uniforms.strength/=this.passes;if(this.passes===1){t.applyFilter(this,r,i,n)}else{var s=t.getRenderTarget(true);var u=r;var l=s;for(var h=0;h<this.passes-1;h++){t.applyFilter(this,u,l,true);var f=l;l=u;u=f}t.applyFilter(this,u,i,n);t.returnRenderTarget(s)}};i(u,[{key:"blur",get:function e(){return this.strength},set:function e(t){this.padding=Math.abs(t)*2;this.strength=t}},{key:"quality",get:function e(){return this._quality},set:function e(t){this._quality=t;this.passes=t}}]);return u}(l.Filter);r.default=g},{"../../core":65,"./generateBlurFragSource":147,"./generateBlurVertSource":148,"./getMaxBlurKernelSize":149}],146:[function(e,t,r){"use strict";r.__esModule=true;var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var n=e("../../core");var l=h(n);var a=e("./generateBlurVertSource");var c=u(a);var o=e("./generateBlurFragSource");var d=u(o);var s=e("./getMaxBlurKernelSize");var p=u(s);function u(e){return e&&e.__esModule?e:{default:e}}function h(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function v(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var g=function(s){y(u,s);function u(e,t,r,i){f(this,u);i=i||5;var n=(0,c.default)(i,false);var a=(0,d.default)(i);var o=v(this,s.call(this,n,a));o.resolution=r||l.settings.RESOLUTION;o._quality=0;o.quality=t||4;o.strength=e||8;o.firstRun=true;return o}u.prototype.apply=function e(t,r,i,n){if(this.firstRun){var a=t.renderer.gl;var o=(0,p.default)(a);this.vertexSrc=(0,c.default)(o,false);this.fragmentSrc=(0,d.default)(o);this.firstRun=false}this.uniforms.strength=1/i.size.height*(i.size.height/r.size.height);this.uniforms.strength*=this.strength;this.uniforms.strength/=this.passes;if(this.passes===1){t.applyFilter(this,r,i,n)}else{var s=t.getRenderTarget(true);var u=r;var l=s;for(var h=0;h<this.passes-1;h++){t.applyFilter(this,u,l,true);var f=l;l=u;u=f}t.applyFilter(this,u,i,n);t.returnRenderTarget(s)}};i(u,[{key:"blur",get:function e(){return this.strength},set:function e(t){this.padding=Math.abs(t)*2;this.strength=t}},{key:"quality",get:function e(){return this._quality},set:function e(t){this._quality=t;this.passes=t}}]);return u}(l.Filter);r.default=g},{"../../core":65,"./generateBlurFragSource":147,"./generateBlurVertSource":148,"./getMaxBlurKernelSize":149}],147:[function(e,t,r){"use strict";r.__esModule=true;r.default=i;var l={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]};var h=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");function i(e){var t=l[e];var r=t.length;var i=h;var n="";var a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";var o=void 0;for(var s=0;s<e;s++){var u=a.replace("%index%",s);o=s;if(s>=r){o=e-s-1}u=u.replace("%value%",t[o]);n+=u;n+="\n"}i=i.replace("%blur%",n);i=i.replace("%size%",e);return i}},{}],148:[function(e,t,r){"use strict";r.__esModule=true;r.default=i;var u=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n");function i(e,t){var r=Math.ceil(e/2);var i=u;var n="";var a=void 0;if(t){a="vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);"}else{a="vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);"}for(var o=0;o<e;o++){var s=a.replace("%index%",o);s=s.replace("%sampleIndex%",o-(r-1)+".0");n+=s;n+="\n"}i=i.replace("%blur%",n);i=i.replace("%size%",e);return i}},{}],149:[function(e,t,r){"use strict";r.__esModule=true;r.default=i;function i(e){var t=e.getParameter(e.MAX_VARYING_VECTORS);var r=15;while(r>t){r-=2}return r}},{}],150:[function(e,t,r){"use strict";r.__esModule=true;var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var n=e("../../core");var a=s(n);var o=e("path");function s(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var f=function(t){h(r,t);function r(){u(this,r);var e=l(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));e.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];e.alpha=1;return e}r.prototype._loadMatrix=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var i=t;if(r){this._multiply(i,this.uniforms.m,t);i=this._colorMatrix(i)}this.uniforms.m=i};r.prototype._multiply=function e(t,r,i){t[0]=r[0]*i[0]+r[1]*i[5]+r[2]*i[10]+r[3]*i[15];t[1]=r[0]*i[1]+r[1]*i[6]+r[2]*i[11]+r[3]*i[16];t[2]=r[0]*i[2]+r[1]*i[7]+r[2]*i[12]+r[3]*i[17];t[3]=r[0]*i[3]+r[1]*i[8]+r[2]*i[13]+r[3]*i[18];t[4]=r[0]*i[4]+r[1]*i[9]+r[2]*i[14]+r[3]*i[19]+r[4];t[5]=r[5]*i[0]+r[6]*i[5]+r[7]*i[10]+r[8]*i[15];t[6]=r[5]*i[1]+r[6]*i[6]+r[7]*i[11]+r[8]*i[16];t[7]=r[5]*i[2]+r[6]*i[7]+r[7]*i[12]+r[8]*i[17];t[8]=r[5]*i[3]+r[6]*i[8]+r[7]*i[13]+r[8]*i[18];t[9]=r[5]*i[4]+r[6]*i[9]+r[7]*i[14]+r[8]*i[19]+r[9];t[10]=r[10]*i[0]+r[11]*i[5]+r[12]*i[10]+r[13]*i[15];t[11]=r[10]*i[1]+r[11]*i[6]+r[12]*i[11]+r[13]*i[16];t[12]=r[10]*i[2]+r[11]*i[7]+r[12]*i[12]+r[13]*i[17];t[13]=r[10]*i[3]+r[11]*i[8]+r[12]*i[13]+r[13]*i[18];t[14]=r[10]*i[4]+r[11]*i[9]+r[12]*i[14]+r[13]*i[19]+r[14];t[15]=r[15]*i[0]+r[16]*i[5]+r[17]*i[10]+r[18]*i[15];t[16]=r[15]*i[1]+r[16]*i[6]+r[17]*i[11]+r[18]*i[16];t[17]=r[15]*i[2]+r[16]*i[7]+r[17]*i[12]+r[18]*i[17];t[18]=r[15]*i[3]+r[16]*i[8]+r[17]*i[13]+r[18]*i[18];t[19]=r[15]*i[4]+r[16]*i[9]+r[17]*i[14]+r[18]*i[19]+r[19];return t};r.prototype._colorMatrix=function e(t){var r=new Float32Array(t);r[4]/=255;r[9]/=255;r[14]/=255;r[19]/=255;return r};r.prototype.brightness=function e(t,r){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,r)};r.prototype.greyscale=function e(t,r){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,r)};r.prototype.blackAndWhite=function e(t){var r=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(r,t)};r.prototype.hue=function e(t,r){t=(t||0)/180*Math.PI;var i=Math.cos(t);var n=Math.sin(t);var a=Math.sqrt;var o=1/3;var s=a(o);var u=i+(1-i)*o;var l=o*(1-i)-s*n;var h=o*(1-i)+s*n;var f=o*(1-i)+s*n;var c=i+o*(1-i);var d=o*(1-i)-s*n;var p=o*(1-i)-s*n;var v=o*(1-i)+s*n;var y=i+o*(1-i);var g=[u,l,h,0,0,f,c,d,0,0,p,v,y,0,0,0,0,0,1,0];this._loadMatrix(g,r)};r.prototype.contrast=function e(t,r){var i=(t||0)+1;var n=-.5*(i-1);var a=[i,0,0,0,n,0,i,0,0,n,0,0,i,0,n,0,0,0,1,0];this._loadMatrix(a,r)};r.prototype.saturate=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var r=arguments[1];var i=t*2/3+1;var n=(i-1)*-.5;var a=[i,n,n,0,0,n,i,n,0,0,n,n,i,0,0,0,0,0,1,0];this._loadMatrix(a,r)};r.prototype.desaturate=function e(){this.saturate(-1)};r.prototype.negative=function e(t){var r=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(r,t)};r.prototype.sepia=function e(t){var r=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(r,t)};r.prototype.technicolor=function e(t){var r=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(r,t)};r.prototype.polaroid=function e(t){var r=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(r,t)};r.prototype.toBGR=function e(t){var r=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(r,t)};r.prototype.kodachrome=function e(t){var r=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(r,t)};r.prototype.browni=function e(t){var r=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(r,t)};r.prototype.vintage=function e(t){var r=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(r,t)};r.prototype.colorTone=function e(t,r,i,n,a){t=t||.2;r=r||.15;i=i||16770432;n=n||3375104;var o=(i>>16&255)/255;var s=(i>>8&255)/255;var u=(i&255)/255;var l=(n>>16&255)/255;var h=(n>>8&255)/255;var f=(n&255)/255;var c=[.3,.59,.11,0,0,o,s,u,t,0,l,h,f,r,0,o-l,s-h,u-f,0,0];this._loadMatrix(c,a)};r.prototype.night=function e(t,r){t=t||.1;var i=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(i,r)};r.prototype.predator=function e(t,r){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,r)};r.prototype.lsd=function e(t){var r=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(r,t)};r.prototype.reset=function e(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,false)};i(r,[{key:"matrix",get:function e(){return this.uniforms.m},set:function e(t){this.uniforms.m=t}},{key:"alpha",get:function e(){return this.uniforms.uAlpha},set:function e(t){this.uniforms.uAlpha=t}}]);return r}(a.Filter);r.default=f;f.prototype.grayscale=f.prototype.greyscale},{"../../core":65,path:8}],151:[function(e,t,r){"use strict";r.__esModule=true;var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var n=e("../../core");var o=s(n);var a=e("path");function s(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var f=function(n){h(a,n);function a(e,t){u(this,a);var r=new o.Matrix;e.renderable=false;var i=l(this,n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));i.maskSprite=e;i.maskMatrix=r;i.uniforms.mapSampler=e._texture;i.uniforms.filterMatrix=r;i.uniforms.scale={x:1,y:1};if(t===null||t===undefined){t=20}i.scale=new o.Point(t,t);return i}a.prototype.apply=function e(t,r,i){var n=1/i.destinationFrame.width*(i.size.width/r.size.width);this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite);this.uniforms.scale.x=this.scale.x*n;this.uniforms.scale.y=this.scale.y*n;t.applyFilter(this,r,i)};i(a,[{key:"map",get:function e(){return this.uniforms.mapSampler},set:function e(t){this.uniforms.mapSampler=t}}]);return a}(o.Filter);r.default=f},{"../../core":65,path:8}],152:[function(e,t,r){"use strict";r.__esModule=true;var i=e("../../core");var n=o(i);var a=e("path");function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function l(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var h=function(e){l(t,e);function t(){s(this,t);return u(this,e.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return t}(n.Filter);r.default=h},{"../../core":65,path:8}],153:[function(e,t,r){"use strict";r.__esModule=true;var i=e("./fxaa/FXAAFilter");Object.defineProperty(r,"FXAAFilter",{enumerable:true,get:function e(){return f(i).default}});var n=e("./noise/NoiseFilter");Object.defineProperty(r,"NoiseFilter",{enumerable:true,get:function e(){return f(n).default}});var a=e("./displacement/DisplacementFilter");Object.defineProperty(r,"DisplacementFilter",{enumerable:true,get:function e(){return f(a).default}});var o=e("./blur/BlurFilter");Object.defineProperty(r,"BlurFilter",{enumerable:true,get:function e(){return f(o).default}});var s=e("./blur/BlurXFilter");Object.defineProperty(r,"BlurXFilter",{enumerable:true,get:function e(){return f(s).default}});var u=e("./blur/BlurYFilter");Object.defineProperty(r,"BlurYFilter",{enumerable:true,get:function e(){return f(u).default}});var l=e("./colormatrix/ColorMatrixFilter");Object.defineProperty(r,"ColorMatrixFilter",{enumerable:true,get:function e(){return f(l).default}});var h=e("./alpha/AlphaFilter");Object.defineProperty(r,"AlphaFilter",{enumerable:true,get:function e(){return f(h).default}});function f(e){return e&&e.__esModule?e:{default:e}}},{"./alpha/AlphaFilter":143,"./blur/BlurFilter":144,"./blur/BlurXFilter":145,"./blur/BlurYFilter":146,"./colormatrix/ColorMatrixFilter":150,"./displacement/DisplacementFilter":151,"./fxaa/FXAAFilter":152,"./noise/NoiseFilter":154}],154:[function(e,t,r){"use strict";r.__esModule=true;var a=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var i=e("../../core");var n=s(i);var o=e("path");function s(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var f=function(i){h(n,i);function n(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:.5;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Math.random();u(this,n);var r=l(this,i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));r.noise=e;r.seed=t;return r}a(n,[{key:"noise",get:function e(){return this.uniforms.uNoise},set:function e(t){this.uniforms.uNoise=t}},{key:"seed",get:function e(){return this.uniforms.uSeed},set:function e(t){this.uniforms.uSeed=t}}]);return n}(n.Filter);r.default=f},{"../../core":65,path:8}],155:[function(e,t,r){"use strict";r.__esModule=true;var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var n=e("../core");var a=o(n);function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var u=function(){function e(){s(this,e);this.global=new a.Point;this.target=null;this.originalEvent=null;this.identifier=null;this.isPrimary=false;this.button=0;this.buttons=0;this.width=0;this.height=0;this.tiltX=0;this.tiltY=0;this.pointerType=null;this.pressure=0;this.rotationAngle=0;this.twist=0;this.tangentialPressure=0}e.prototype.getLocalPosition=function e(t,r,i){return t.worldTransform.applyInverse(i||this.global,r)};e.prototype._copyEvent=function e(t){if(t.isPrimary){this.isPrimary=true}this.button=t.button;this.buttons=t.buttons;this.width=t.width;this.height=t.height;this.tiltX=t.tiltX;this.tiltY=t.tiltY;this.pointerType=t.pointerType;this.pressure=t.pressure;this.rotationAngle=t.rotationAngle;this.twist=t.twist||0;this.tangentialPressure=t.tangentialPressure||0};e.prototype._reset=function e(){this.isPrimary=false};i(e,[{key:"pointerId",get:function e(){return this.identifier}}]);return e}();r.default=u},{"../core":65}],156:[function(e,t,r){"use strict";r.__esModule=true;function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var n=function(){function e(){i(this,e);this.stopped=false;this.target=null;this.currentTarget=null;this.type=null;this.data=null}e.prototype.stopPropagation=function e(){this.stopped=true};e.prototype._reset=function e(){this.stopped=false;this.currentTarget=null;this.target=null};return e}();r.default=n},{}],157:[function(e,t,r){"use strict";r.__esModule=true;var a=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=e("../core");var o=g(i);var n=e("./InteractionData");var s=y(n);var u=e("./InteractionEvent");var l=y(u);var h=e("./InteractionTrackingData");var d=y(h);var f=e("eventemitter3");var c=y(f);var p=e("./interactiveTarget");var v=y(p);function y(e){return e&&e.__esModule?e:{default:e}}function g(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function m(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function _(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function b(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}o.utils.mixins.delayMixin(o.DisplayObject.prototype,v.default);var x="MOUSE";var T={target:null,data:{global:null}};var w=function(i){b(n,i);function n(e,t){m(this,n);var r=_(this,i.call(this));t=t||{};r.renderer=e;r.autoPreventDefault=t.autoPreventDefault!==undefined?t.autoPreventDefault:true;r.interactionFrequency=t.interactionFrequency||10;r.mouse=new s.default;r.mouse.identifier=x;r.mouse.global.set(-999999);r.activeInteractionData={};r.activeInteractionData[x]=r.mouse;r.interactionDataPool=[];r.eventData=new l.default;r.interactionDOMElement=null;r.moveWhenInside=false;r.eventsAdded=false;r.mouseOverRenderer=false;r.supportsTouchEvents="ontouchstart"in window;r.supportsPointerEvents=!!window.PointerEvent;r.onPointerUp=r.onPointerUp.bind(r);r.processPointerUp=r.processPointerUp.bind(r);r.onPointerCancel=r.onPointerCancel.bind(r);r.processPointerCancel=r.processPointerCancel.bind(r);r.onPointerDown=r.onPointerDown.bind(r);r.processPointerDown=r.processPointerDown.bind(r);r.onPointerMove=r.onPointerMove.bind(r);r.processPointerMove=r.processPointerMove.bind(r);r.onPointerOut=r.onPointerOut.bind(r);r.processPointerOverOut=r.processPointerOverOut.bind(r);r.onPointerOver=r.onPointerOver.bind(r);r.cursorStyles={default:"inherit",pointer:"pointer"};r.currentCursorMode=null;r.cursor=null;r._tempPoint=new o.Point;r.resolution=1;r.setTargetElement(r.renderer.view,r.renderer.resolution);return r}n.prototype.hitTest=function e(t,r){T.target=null;T.data.global=t;if(!r){r=this.renderer._lastObjectRendered}this.processInteractive(T,r,null,true);return T.target};n.prototype.setTargetElement=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;this.removeEvents();this.interactionDOMElement=t;this.resolution=r;this.addEvents()};n.prototype.addEvents=function e(){if(!this.interactionDOMElement){return}o.ticker.shared.add(this.update,this,o.UPDATE_PRIORITY.INTERACTION);if(window.navigator.msPointerEnabled){this.interactionDOMElement.style["-ms-content-zooming"]="none";this.interactionDOMElement.style["-ms-touch-action"]="none"}else if(this.supportsPointerEvents){this.interactionDOMElement.style["touch-action"]="none"}if(this.supportsPointerEvents){window.document.addEventListener("pointermove",this.onPointerMove,true);this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,true);this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,true);this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,true);window.addEventListener("pointercancel",this.onPointerCancel,true);window.addEventListener("pointerup",this.onPointerUp,true)}else{window.document.addEventListener("mousemove",this.onPointerMove,true);this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,true);this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,true);this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,true);window.addEventListener("mouseup",this.onPointerUp,true)}if(this.supportsTouchEvents){this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,true);this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,true);this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,true);this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,true)}this.eventsAdded=true};n.prototype.removeEvents=function e(){if(!this.interactionDOMElement){return}o.ticker.shared.remove(this.update,this);if(window.navigator.msPointerEnabled){this.interactionDOMElement.style["-ms-content-zooming"]="";this.interactionDOMElement.style["-ms-touch-action"]=""}else if(this.supportsPointerEvents){this.interactionDOMElement.style["touch-action"]=""}if(this.supportsPointerEvents){window.document.removeEventListener("pointermove",this.onPointerMove,true);this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,true);this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,true);this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,true);window.removeEventListener("pointercancel",this.onPointerCancel,true);window.removeEventListener("pointerup",this.onPointerUp,true)}else{window.document.removeEventListener("mousemove",this.onPointerMove,true);this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,true);this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,true);this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,true);window.removeEventListener("mouseup",this.onPointerUp,true)}if(this.supportsTouchEvents){this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,true);this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,true);this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,true);this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,true)}this.interactionDOMElement=null;this.eventsAdded=false};n.prototype.update=function e(t){this._deltaTime+=t;if(this._deltaTime<this.interactionFrequency){return}this._deltaTime=0;if(!this.interactionDOMElement){return}if(this.didMove){this.didMove=false;return}this.cursor=null;for(var r in this.activeInteractionData){if(this.activeInteractionData.hasOwnProperty(r)){var i=this.activeInteractionData[r];if(i.originalEvent&&i.pointerType!=="touch"){var n=this.configureInteractionEventForDOMEvent(this.eventData,i.originalEvent,i);this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,true)}}}this.setCursorMode(this.cursor)};n.prototype.setCursorMode=function e(t){t=t||"default";if(this.currentCursorMode===t){return}this.currentCursorMode=t;var r=this.cursorStyles[t];if(r){switch(typeof r==="undefined"?"undefined":a(r)){case"string":this.interactionDOMElement.style.cursor=r;break;case"function":r(t);break;case"object":Object.assign(this.interactionDOMElement.style,r);break}}else if(typeof t==="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)){this.interactionDOMElement.style.cursor=t}};n.prototype.dispatchEvent=function e(t,r,i){if(!i.stopped){i.currentTarget=t;i.type=r;t.emit(r,i);if(t[r]){t[r](i)}}};n.prototype.mapPositionToPoint=function e(t,r,i){var n=void 0;if(!this.interactionDOMElement.parentElement){n={x:0,y:0,width:0,height:0}}else{n=this.interactionDOMElement.getBoundingClientRect()}var a=navigator.isCocoonJS?this.resolution:1/this.resolution;t.x=(r-n.left)*(this.interactionDOMElement.width/n.width)*a;t.y=(i-n.top)*(this.interactionDOMElement.height/n.height)*a};n.prototype.processInteractive=function e(t,r,i,n,a){if(!r||!r.visible){return false}var o=t.data.global;a=r.interactive||a;var s=false;var u=a;if(r.hitArea){u=false}else if(n&&r._mask){if(!r._mask.containsPoint(o)){n=false}}if(r.interactiveChildren&&r.children){var l=r.children;for(var h=l.length-1;h>=0;h--){var f=l[h];var c=this.processInteractive(t,f,i,n,u);if(c){if(!f.parent){continue}u=false;if(c){if(t.target){n=false}s=true}}}}if(a){if(n&&!t.target){if(r.hitArea){r.worldTransform.applyInverse(o,this._tempPoint);if(r.hitArea.contains(this._tempPoint.x,this._tempPoint.y)){s=true}}else if(r.containsPoint){if(r.containsPoint(o)){s=true}}}if(r.interactive){if(s&&!t.target){t.target=r}if(i){i(t,r,!!s)}}}return s};n.prototype.onPointerDown=function e(t){if(this.supportsTouchEvents&&t.pointerType==="touch")return;var r=this.normalizeToPointerData(t);if(this.autoPreventDefault&&r[0].isNormalized){t.preventDefault()}var i=r.length;for(var n=0;n<i;n++){var a=r[n];var o=this.getInteractionDataForPointerId(a);var s=this.configureInteractionEventForDOMEvent(this.eventData,a,o);s.data.originalEvent=t;this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerDown,true);this.emit("pointerdown",s);if(a.pointerType==="touch"){this.emit("touchstart",s)}else if(a.pointerType==="mouse"||a.pointerType==="pen"){var u=a.button===2;this.emit(u?"rightdown":"mousedown",this.eventData)}}};n.prototype.processPointerDown=function e(t,r,i){var n=t.data;var a=t.data.identifier;if(i){if(!r.trackedPointers[a]){r.trackedPointers[a]=new d.default(a)}this.dispatchEvent(r,"pointerdown",t);if(n.pointerType==="touch"){this.dispatchEvent(r,"touchstart",t)}else if(n.pointerType==="mouse"||n.pointerType==="pen"){var o=n.button===2;if(o){r.trackedPointers[a].rightDown=true}else{r.trackedPointers[a].leftDown=true}this.dispatchEvent(r,o?"rightdown":"mousedown",t)}}};n.prototype.onPointerComplete=function e(t,r,i){var n=this.normalizeToPointerData(t);var a=n.length;var o=t.target!==this.interactionDOMElement?"outside":"";for(var s=0;s<a;s++){var u=n[s];var l=this.getInteractionDataForPointerId(u);var h=this.configureInteractionEventForDOMEvent(this.eventData,u,l);h.data.originalEvent=t;this.processInteractive(h,this.renderer._lastObjectRendered,i,r||!o);this.emit(r?"pointercancel":"pointerup"+o,h);if(u.pointerType==="mouse"||u.pointerType==="pen"){var f=u.button===2;this.emit(f?"rightup"+o:"mouseup"+o,h)}else if(u.pointerType==="touch"){this.emit(r?"touchcancel":"touchend"+o,h);this.releaseInteractionDataForPointerId(u.pointerId,l)}}};n.prototype.onPointerCancel=function e(t){if(this.supportsTouchEvents&&t.pointerType==="touch")return;this.onPointerComplete(t,true,this.processPointerCancel)};n.prototype.processPointerCancel=function e(t,r){var i=t.data;var n=t.data.identifier;if(r.trackedPointers[n]!==undefined){delete r.trackedPointers[n];this.dispatchEvent(r,"pointercancel",t);if(i.pointerType==="touch"){this.dispatchEvent(r,"touchcancel",t)}}};n.prototype.onPointerUp=function e(t){if(this.supportsTouchEvents&&t.pointerType==="touch")return;this.onPointerComplete(t,false,this.processPointerUp)};n.prototype.processPointerUp=function e(t,r,i){var n=t.data;var a=t.data.identifier;var o=r.trackedPointers[a];var s=n.pointerType==="touch";var u=n.pointerType==="mouse"||n.pointerType==="pen";if(u){var l=n.button===2;var h=d.default.FLAGS;var f=l?h.RIGHT_DOWN:h.LEFT_DOWN;var c=o!==undefined&&o.flags&f;if(i){this.dispatchEvent(r,l?"rightup":"mouseup",t);if(c){this.dispatchEvent(r,l?"rightclick":"click",t)}}else if(c){this.dispatchEvent(r,l?"rightupoutside":"mouseupoutside",t)}if(o){if(l){o.rightDown=false}else{o.leftDown=false}}}if(i){this.dispatchEvent(r,"pointerup",t);if(s)this.dispatchEvent(r,"touchend",t);if(o){this.dispatchEvent(r,"pointertap",t);if(s){this.dispatchEvent(r,"tap",t);o.over=false}}}else if(o){this.dispatchEvent(r,"pointerupoutside",t);if(s)this.dispatchEvent(r,"touchendoutside",t)}if(o&&o.none){delete r.trackedPointers[a]}};n.prototype.onPointerMove=function e(t){if(this.supportsTouchEvents&&t.pointerType==="touch")return;var r=this.normalizeToPointerData(t);if(r[0].pointerType==="mouse"){this.didMove=true;this.cursor=null}var i=r.length;for(var n=0;n<i;n++){var a=r[n];var o=this.getInteractionDataForPointerId(a);var s=this.configureInteractionEventForDOMEvent(this.eventData,a,o);s.data.originalEvent=t;var u=a.pointerType==="touch"?this.moveWhenInside:true;this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerMove,u);this.emit("pointermove",s);if(a.pointerType==="touch")this.emit("touchmove",s);if(a.pointerType==="mouse"||a.pointerType==="pen")this.emit("mousemove",s)}if(r[0].pointerType==="mouse"){this.setCursorMode(this.cursor)}};n.prototype.processPointerMove=function e(t,r,i){var n=t.data;var a=n.pointerType==="touch";var o=n.pointerType==="mouse"||n.pointerType==="pen";if(o){this.processPointerOverOut(t,r,i)}if(!this.moveWhenInside||i){this.dispatchEvent(r,"pointermove",t);if(a)this.dispatchEvent(r,"touchmove",t);if(o)this.dispatchEvent(r,"mousemove",t)}};n.prototype.onPointerOut=function e(t){if(this.supportsTouchEvents&&t.pointerType==="touch")return;var r=this.normalizeToPointerData(t);var i=r[0];if(i.pointerType==="mouse"){this.mouseOverRenderer=false;this.setCursorMode(null)}var n=this.getInteractionDataForPointerId(i);var a=this.configureInteractionEventForDOMEvent(this.eventData,i,n);a.data.originalEvent=i;this.processInteractive(a,this.renderer._lastObjectRendered,this.processPointerOverOut,false);this.emit("pointerout",a);if(i.pointerType==="mouse"||i.pointerType==="pen"){this.emit("mouseout",a)}else{this.releaseInteractionDataForPointerId(n.identifier)}};n.prototype.processPointerOverOut=function e(t,r,i){var n=t.data;var a=t.data.identifier;var o=n.pointerType==="mouse"||n.pointerType==="pen";var s=r.trackedPointers[a];if(i&&!s){s=r.trackedPointers[a]=new d.default(a)}if(s===undefined)return;if(i&&this.mouseOverRenderer){if(!s.over){s.over=true;this.dispatchEvent(r,"pointerover",t);if(o){this.dispatchEvent(r,"mouseover",t)}}if(o&&this.cursor===null){this.cursor=r.cursor}}else if(s.over){s.over=false;this.dispatchEvent(r,"pointerout",this.eventData);if(o){this.dispatchEvent(r,"mouseout",t)}if(s.none){delete r.trackedPointers[a]}}};n.prototype.onPointerOver=function e(t){var r=this.normalizeToPointerData(t);var i=r[0];var n=this.getInteractionDataForPointerId(i);var a=this.configureInteractionEventForDOMEvent(this.eventData,i,n);a.data.originalEvent=i;if(i.pointerType==="mouse"){this.mouseOverRenderer=true}this.emit("pointerover",a);if(i.pointerType==="mouse"||i.pointerType==="pen"){this.emit("mouseover",a)}};n.prototype.getInteractionDataForPointerId=function e(t){var r=t.pointerId;var i=void 0;if(r===x||t.pointerType==="mouse"){i=this.mouse}else if(this.activeInteractionData[r]){i=this.activeInteractionData[r]}else{i=this.interactionDataPool.pop()||new s.default;i.identifier=r;this.activeInteractionData[r]=i}i._copyEvent(t);return i};n.prototype.releaseInteractionDataForPointerId=function e(t){var r=this.activeInteractionData[t];if(r){delete this.activeInteractionData[t];r._reset();this.interactionDataPool.push(r)}};n.prototype.configureInteractionEventForDOMEvent=function e(t,r,i){t.data=i;this.mapPositionToPoint(i.global,r.clientX,r.clientY);if(navigator.isCocoonJS&&r.pointerType==="touch"){i.global.x=i.global.x/this.resolution;i.global.y=i.global.y/this.resolution}if(r.pointerType==="touch"){r.globalX=i.global.x;r.globalY=i.global.y}i.originalEvent=r;t._reset();return t};n.prototype.normalizeToPointerData=function e(t){var r=[];if(this.supportsTouchEvents&&t instanceof TouchEvent){for(var i=0,n=t.changedTouches.length;i<n;i++){var a=t.changedTouches[i];if(typeof a.button==="undefined")a.button=t.touches.length?1:0;if(typeof a.buttons==="undefined")a.buttons=t.touches.length?1:0;if(typeof a.isPrimary==="undefined"){a.isPrimary=t.touches.length===1&&t.type==="touchstart"}if(typeof a.width==="undefined")a.width=a.radiusX||1;if(typeof a.height==="undefined")a.height=a.radiusY||1;if(typeof a.tiltX==="undefined")a.tiltX=0;if(typeof a.tiltY==="undefined")a.tiltY=0;if(typeof a.pointerType==="undefined")a.pointerType="touch";if(typeof a.pointerId==="undefined")a.pointerId=a.identifier||0;if(typeof a.pressure==="undefined")a.pressure=a.force||.5;a.twist=0;a.tangentialPressure=0;if(typeof a.layerX==="undefined")a.layerX=a.offsetX=a.clientX;if(typeof a.layerY==="undefined")a.layerY=a.offsetY=a.clientY;a.isNormalized=true;r.push(a)}}else if(t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof window.PointerEvent))){if(typeof t.isPrimary==="undefined")t.isPrimary=true;if(typeof t.width==="undefined")t.width=1;if(typeof t.height==="undefined")t.height=1;if(typeof t.tiltX==="undefined")t.tiltX=0;if(typeof t.tiltY==="undefined")t.tiltY=0;if(typeof t.pointerType==="undefined")t.pointerType="mouse";if(typeof t.pointerId==="undefined")t.pointerId=x;if(typeof t.pressure==="undefined")t.pressure=.5;t.twist=0;t.tangentialPressure=0;t.isNormalized=true;r.push(t)}else{r.push(t)}return r};n.prototype.destroy=function e(){this.removeEvents();this.removeAllListeners();this.renderer=null;this.mouse=null;this.eventData=null;this.interactionDOMElement=null;this.onPointerDown=null;this.processPointerDown=null;this.onPointerUp=null;this.processPointerUp=null;this.onPointerCancel=null;this.processPointerCancel=null;this.onPointerMove=null;this.processPointerMove=null;this.onPointerOut=null;this.processPointerOverOut=null;this.onPointerOver=null;this._tempPoint=null};return n}(c.default);r.default=w;o.WebGLRenderer.registerPlugin("interaction",w);o.CanvasRenderer.registerPlugin("interaction",w)},{"../core":65,"./InteractionData":155,"./InteractionEvent":156,"./InteractionTrackingData":158,"./interactiveTarget":160,eventemitter3:3}],158:[function(e,t,r){"use strict";r.__esModule=true;var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=function(){function t(e){n(this,t);this._pointerId=e;this._flags=t.FLAGS.NONE}t.prototype._doSet=function e(t,r){if(r){this._flags=this._flags|t}else{this._flags=this._flags&~t}};i(t,[{key:"pointerId",get:function e(){return this._pointerId}},{key:"flags",get:function e(){return this._flags},set:function e(t){this._flags=t}},{key:"none",get:function e(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function e(){return(this._flags&this.constructor.FLAGS.OVER)!==0},set:function e(t){this._doSet(this.constructor.FLAGS.OVER,t)}},{key:"rightDown",get:function e(){return(this._flags&this.constructor.FLAGS.RIGHT_DOWN)!==0},set:function e(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)}},{key:"leftDown",get:function e(){return(this._flags&this.constructor.FLAGS.LEFT_DOWN)!==0},set:function e(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)}}]);return t}();r.default=a;a.FLAGS=Object.freeze({NONE:0,OVER:1<<0,LEFT_DOWN:1<<1,RIGHT_DOWN:1<<2})},{}],159:[function(e,t,r){"use strict";r.__esModule=true;var i=e("./InteractionData");Object.defineProperty(r,"InteractionData",{enumerable:true,get:function e(){return u(i).default}});var n=e("./InteractionManager");Object.defineProperty(r,"InteractionManager",{enumerable:true,get:function e(){return u(n).default}});var a=e("./interactiveTarget");Object.defineProperty(r,"interactiveTarget",{enumerable:true,get:function e(){return u(a).default}});var o=e("./InteractionTrackingData");Object.defineProperty(r,"InteractionTrackingData",{enumerable:true,get:function e(){return u(o).default}});var s=e("./InteractionEvent");Object.defineProperty(r,"InteractionEvent",{enumerable:true,get:function e(){return u(s).default}});function u(e){return e&&e.__esModule?e:{default:e}}},{"./InteractionData":155,"./InteractionEvent":156,"./InteractionManager":157,"./InteractionTrackingData":158,"./interactiveTarget":160}],160:[function(e,t,r){"use strict";r.__esModule=true;r.default={interactive:false,interactiveChildren:true,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(e){if(e){this.cursor="pointer"}else if(this.cursor==="pointer"){this.cursor=null}},cursor:null,get trackedPointers(){if(this._trackedPointers===undefined)this._trackedPointers={};return this._trackedPointers},_trackedPointers:undefined}},{}],161:[function(e,t,r){"use strict";r.__esModule=true;r.parse=l;r.default=function(){return function e(t,r){if(!t.data||t.type!==u.Resource.TYPE.XML){r();return}if(t.data.getElementsByTagName("page").length===0||t.data.getElementsByTagName("info").length===0||t.data.getElementsByTagName("info")[0].getAttribute("face")===null){r();return}var i=!t.isDataUrl?o.dirname(t.url):"";if(t.isDataUrl){if(i==="."){i=""}if(this.baseUrl&&i){if(this.baseUrl.charAt(this.baseUrl.length-1)==="/"){i+="/"}}}i=i.replace(this.baseUrl,"");if(i&&i.charAt(i.length-1)!=="/"){i+="/"}var n=i+t.data.getElementsByTagName("page")[0].getAttribute("file");if(s.utils.TextureCache[n]){l(t,s.utils.TextureCache[n]);r()}else{var a={crossOrigin:t.crossOrigin,loadType:u.Resource.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata,parentResource:t};this.add(t.name+"_image",n,a,function(e){l(t,e.texture);r()})}}};var i=e("path");var o=a(i);var s=e("../core");var u=e("resource-loader");var n=e("../extras");function a(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function l(e,t){e.bitmapFont=n.BitmapText.registerFont(e.data,t)}},{"../core":65,"../extras":141,path:8,"resource-loader":36}],162:[function(e,t,r){"use strict";r.__esModule=true;r.shared=r.Resource=r.textureParser=r.getResourcePath=r.spritesheetParser=r.parseBitmapFontData=r.bitmapFontParser=r.Loader=undefined;var i=e("./bitmapFontParser");Object.defineProperty(r,"bitmapFontParser",{enumerable:true,get:function e(){return f(i).default}});Object.defineProperty(r,"parseBitmapFontData",{enumerable:true,get:function e(){return i.parse}});var n=e("./spritesheetParser");Object.defineProperty(r,"spritesheetParser",{enumerable:true,get:function e(){return f(n).default}});Object.defineProperty(r,"getResourcePath",{enumerable:true,get:function e(){return n.getResourcePath}});var a=e("./textureParser");Object.defineProperty(r,"textureParser",{enumerable:true,get:function e(){return f(a).default}});var o=e("resource-loader");Object.defineProperty(r,"Resource",{enumerable:true,get:function e(){return o.Resource}});var s=e("../core/Application");var u=f(s);var l=e("./loader");var h=f(l);function f(e){return e&&e.__esModule?e:{default:e}}r.Loader=h.default;var c=new h.default;c.destroy=function(){};r.shared=c;var d=u.default.prototype;d._loader=null;Object.defineProperty(d,"loader",{get:function e(){if(!this._loader){var t=this._options.sharedLoader;this._loader=t?c:new h.default}return this._loader}});d._parentDestroy=d.destroy;d.destroy=function e(t){if(this._loader){this._loader.destroy();this._loader=null}this._parentDestroy(t)}},{"../core/Application":43,"./bitmapFontParser":161,"./loader":163,"./spritesheetParser":164,"./textureParser":165,"resource-loader":36}],163:[function(e,t,r){"use strict";r.__esModule=true;var i=e("resource-loader");var n=p(i);var a=e("resource-loader/lib/middlewares/parsing/blob");var o=e("eventemitter3");var s=p(o);var u=e("./textureParser");var l=p(u);var h=e("./spritesheetParser");var f=p(h);var c=e("./bitmapFontParser");var d=p(c);function p(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function y(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var m=function(n){g(a,n);function a(e,t){v(this,a);var i=y(this,n.call(this,e,t));s.default.call(i);for(var r=0;r<a._pixiMiddleware.length;++r){i.use(a._pixiMiddleware[r]())}i.onStart.add(function(e){return i.emit("start",e)});i.onProgress.add(function(e,t){return i.emit("progress",e,t)});i.onError.add(function(e,t,r){return i.emit("error",e,t,r)});i.onLoad.add(function(e,t){return i.emit("load",e,t)});i.onComplete.add(function(e,t){return i.emit("complete",e,t)});return i}a.addPixiMiddleware=function e(t){a._pixiMiddleware.push(t)};a.prototype.destroy=function e(){this.removeAllListeners();this.reset()};return a}(n.default);r.default=m;for(var _ in s.default.prototype){m.prototype[_]=s.default.prototype[_]}m._pixiMiddleware=[a.blobMiddlewareFactory,l.default,f.default,d.default];var b=n.default.Resource;b.setExtensionXhrType("fnt",b.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":161,"./spritesheetParser":164,"./textureParser":165,eventemitter3:3,"resource-loader":36,"resource-loader/lib/middlewares/parsing/blob":37}],164:[function(e,t,r){"use strict";r.__esModule=true;r.default=function(){return function e(i,n){var t=i.name+"_image";if(!i.data||i.type!==o.Resource.TYPE.JSON||!i.data.frames||this.resources[t]){n();return}var r={crossOrigin:i.crossOrigin,loadType:o.Resource.LOAD_TYPE.IMAGE,metadata:i.metadata.imageMetadata,parentResource:i};var a=u(i,this.baseUrl);this.add(t,a,r,function e(t){var r=new s.Spritesheet(t.texture.baseTexture,i.data,i.url);r.parse(function(){i.spritesheet=r;i.textures=r.textures;n()})})}};r.getResourcePath=u;var o=e("resource-loader");var i=e("url");var n=a(i);var s=e("../core");function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(e.isDataUrl){return e.data.meta.image}return n.default.resolve(e.url.replace(t,""),e.data.meta.image)}},{"../core":65,"resource-loader":36,url:38}],165:[function(e,t,r){"use strict";r.__esModule=true;r.default=function(){return function e(t,r){if(t.data&&t.type===i.Resource.TYPE.IMAGE){t.texture=a.default.fromLoader(t.data,t.url,t.name)}r()}};var i=e("resource-loader");var n=e("../core/textures/Texture");var a=o(n);function o(e){return e&&e.__esModule?e:{default:e}}},{"../core/textures/Texture":115,"resource-loader":36}],166:[function(e,t,r){"use strict";r.__esModule=true;var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var n=e("../core");var s=l(n);var a=e("../core/textures/Texture");var u=o(a);function o(e){return e&&e.__esModule?e:{default:e}}function l(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var p=new s.Point;var v=new s.Polygon;var f=function(o){d(f,o);function f(e,t,r,i,n){h(this,f);var a=c(this,o.call(this));a._texture=e||u.default.EMPTY;a.uvs=r||new Float32Array([0,0,1,0,1,1,0,1]);a.vertices=t||new Float32Array([0,0,100,0,100,100,0,100]);a.indices=i||new Uint16Array([0,1,3,2]);a.dirty=0;a.indexDirty=0;a.blendMode=s.BLEND_MODES.NORMAL;a.canvasPadding=0;a.drawMode=n||f.DRAW_MODES.TRIANGLE_MESH;a.shader=null;a.tintRgb=new Float32Array([1,1,1]);a._glDatas={};a._uvTransform=new s.TextureMatrix(a._texture);a.uploadUvTransform=false;a.pluginName="mesh";return a}f.prototype._renderWebGL=function e(t){this.refresh();t.setObjectRenderer(t.plugins[this.pluginName]);t.plugins[this.pluginName].render(this)};f.prototype._renderCanvas=function e(t){this.refresh();t.plugins[this.pluginName].render(this)};f.prototype._onTextureUpdate=function e(){this._uvTransform.texture=this._texture;this.refresh()};f.prototype.multiplyUvs=function e(){if(!this.uploadUvTransform){this._uvTransform.multiplyUvs(this.uvs)}};f.prototype.refresh=function e(t){if(this._uvTransform.update(t)){this._refresh()}};f.prototype._refresh=function e(){};f.prototype._calculateBounds=function e(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)};f.prototype.containsPoint=function e(t){if(!this.getBounds().contains(t.x,t.y)){return false}this.worldTransform.applyInverse(t,p);var r=this.vertices;var i=v.points;var n=this.indices;var a=this.indices.length;var o=this.drawMode===f.DRAW_MODES.TRIANGLES?3:1;for(var s=0;s+2<a;s+=o){var u=n[s]*2;var l=n[s+1]*2;var h=n[s+2]*2;i[0]=r[u];i[1]=r[u+1];i[2]=r[l];i[3]=r[l+1];i[4]=r[h];i[5]=r[h+1];if(v.contains(p.x,p.y)){return true}}return false};i(f,[{key:"texture",get:function e(){return this._texture},set:function e(t){if(this._texture===t){return}this._texture=t;if(t){if(t.baseTexture.hasLoaded){this._onTextureUpdate()}else{t.once("update",this._onTextureUpdate,this)}}}},{key:"tint",get:function e(){return s.utils.rgb2hex(this.tintRgb)},set:function e(t){this.tintRgb=s.utils.hex2rgb(t,this.tintRgb)}}]);return f}(s.Container);r.default=f;f.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":65,"../core/textures/Texture":115}],167:[function(e,t,r){"use strict";r.__esModule=true;var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var n=e("./Plane");var a=o(n);function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var f=10;var s=function(o){h(s,o);function s(e,t,r,i,n){u(this,s);var a=l(this,o.call(this,e,4,4));a._origWidth=e.orig.width;a._origHeight=e.orig.height;a._width=a._origWidth;a._height=a._origHeight;a.leftWidth=typeof t!=="undefined"?t:f;a.rightWidth=typeof i!=="undefined"?i:f;a.topHeight=typeof r!=="undefined"?r:f;a.bottomHeight=typeof n!=="undefined"?n:f;a.refresh(true);return a}s.prototype.updateHorizontalVertices=function e(){var t=this.vertices;t[9]=t[11]=t[13]=t[15]=this._topHeight;t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight;t[25]=t[27]=t[29]=t[31]=this._height};s.prototype.updateVerticalVertices=function e(){var t=this.vertices;t[2]=t[10]=t[18]=t[26]=this._leftWidth;t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth;t[6]=t[14]=t[22]=t[30]=this._width};s.prototype._renderCanvas=function e(t){var r=t.context;r.globalAlpha=this.worldAlpha;var i=this.worldTransform;var n=t.resolution;if(t.roundPixels){r.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n|0,i.ty*n|0)}else{r.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n,i.ty*n)}var a=this._texture.baseTexture;var o=a.source;var s=a.width*a.resolution;var u=a.height*a.resolution;this.drawSegment(r,o,s,u,0,1,10,11);this.drawSegment(r,o,s,u,2,3,12,13);this.drawSegment(r,o,s,u,4,5,14,15);this.drawSegment(r,o,s,u,8,9,18,19);this.drawSegment(r,o,s,u,10,11,20,21);this.drawSegment(r,o,s,u,12,13,22,23);this.drawSegment(r,o,s,u,16,17,26,27);this.drawSegment(r,o,s,u,18,19,28,29);this.drawSegment(r,o,s,u,20,21,30,31)};s.prototype.drawSegment=function e(t,r,i,n,a,o,s,u){var l=this.uvs;var h=this.vertices;var f=(l[s]-l[a])*i;var c=(l[u]-l[o])*n;var d=h[s]-h[a];var p=h[u]-h[o];if(f<1){f=1}if(c<1){c=1}if(d<1){d=1}if(p<1){p=1}t.drawImage(r,l[a]*i,l[o]*n,f,c,h[a],h[o],d,p)};s.prototype._refresh=function e(){o.prototype._refresh.call(this);var t=this.uvs;var r=this._texture;this._origWidth=r.orig.width;this._origHeight=r.orig.height;var i=1/this._origWidth;var n=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0;t[1]=t[3]=t[5]=t[7]=0;t[6]=t[14]=t[22]=t[30]=1;t[25]=t[27]=t[29]=t[31]=1;t[2]=t[10]=t[18]=t[26]=i*this._leftWidth;t[4]=t[12]=t[20]=t[28]=1-i*this._rightWidth;t[9]=t[11]=t[13]=t[15]=n*this._topHeight;t[17]=t[19]=t[21]=t[23]=1-n*this._bottomHeight;this.updateHorizontalVertices();this.updateVerticalVertices();this.dirty++;this.multiplyUvs()};i(s,[{key:"width",get:function e(){return this._width},set:function e(t){this._width=t;this._refresh()}},{key:"height",get:function e(){return this._height},set:function e(t){this._height=t;this._refresh()}},{key:"leftWidth",get:function e(){return this._leftWidth},set:function e(t){this._leftWidth=t;this._refresh()}},{key:"rightWidth",get:function e(){return this._rightWidth},set:function e(t){this._rightWidth=t;this._refresh()}},{key:"topHeight",get:function e(){return this._topHeight},set:function e(t){this._topHeight=t;this._refresh()}},{key:"bottomHeight",get:function e(){return this._bottomHeight},set:function e(t){this._bottomHeight=t;this._refresh()}}]);return s}(a.default);r.default=s},{"./Plane":168}],168:[function(e,t,r){"use strict";r.__esModule=true;var i=e("./Mesh");var o=n(i);function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function l(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var a=function(n){l(a,n);function a(e,t,r){s(this,a);var i=u(this,n.call(this,e));i._ready=true;i.verticesX=t||10;i.verticesY=r||10;i.drawMode=o.default.DRAW_MODES.TRIANGLES;i.refresh();return i}a.prototype._refresh=function e(){var t=this._texture;var r=this.verticesX*this.verticesY;var i=[];var n=[];var a=[];var o=[];var s=this.verticesX-1;var u=this.verticesY-1;var l=t.width/s;var h=t.height/u;for(var f=0;f<r;f++){var c=f%this.verticesX;var d=f/this.verticesX|0;i.push(c*l,d*h);a.push(c/s,d/u)}var p=s*u;for(var v=0;v<p;v++){var y=v%s;var g=v/s|0;var m=g*this.verticesX+y;var _=g*this.verticesX+y+1;var b=(g+1)*this.verticesX+y;var x=(g+1)*this.verticesX+y+1;o.push(m,_,b);o.push(_,x,b)}this.vertices=new Float32Array(i);this.uvs=new Float32Array(a);this.colors=new Float32Array(n);this.indices=new Uint16Array(o);this.dirty++;this.indexDirty++;this.multiplyUvs()};a.prototype._onTextureUpdate=function e(){o.default.prototype._onTextureUpdate.call(this);if(this._ready){this.refresh()}};return a}(o.default);r.default=a},{"./Mesh":166}],169:[function(e,t,r){"use strict";r.__esModule=true;var i=e("./Mesh");var n=a(i);function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var l=function(i){u(n,i);function n(e,t){o(this,n);var r=s(this,i.call(this,e));r.points=t;r.vertices=new Float32Array(t.length*4);r.uvs=new Float32Array(t.length*4);r.colors=new Float32Array(t.length*2);r.indices=new Uint16Array(t.length*2);r.autoUpdate=true;r.refresh();return r}n.prototype._refresh=function e(){var t=this.points;if(t.length<1||!this._texture._uvs){return}if(this.vertices.length/4!==t.length){this.vertices=new Float32Array(t.length*4);this.uvs=new Float32Array(t.length*4);this.colors=new Float32Array(t.length*2);this.indices=new Uint16Array(t.length*2)}var r=this.uvs;var i=this.indices;var n=this.colors;r[0]=0;r[1]=0;r[2]=0;r[3]=1;n[0]=1;n[1]=1;i[0]=0;i[1]=1;var a=t.length;for(var o=1;o<a;o++){var s=o*4;var u=o/(a-1);r[s]=u;r[s+1]=0;r[s+2]=u;r[s+3]=1;s=o*2;n[s]=1;n[s+1]=1;s=o*2;i[s]=s;i[s+1]=s+1}this.dirty++;this.indexDirty++;this.multiplyUvs();this.refreshVertices()};n.prototype.refreshVertices=function e(){var t=this.points;if(t.length<1){return}var r=t[0];var i=void 0;var n=0;var a=0;var o=this.vertices;var s=t.length;for(var u=0;u<s;u++){var l=t[u];var h=u*4;if(u<t.length-1){i=t[u+1]}else{i=l}a=-(i.x-r.x);n=i.y-r.y;var f=(1-u/(s-1))*10;if(f>1){f=1}var c=Math.sqrt(n*n+a*a);var d=this._texture.height/2;n/=c;a/=c;n*=d;a*=d;o[h]=l.x+n;o[h+1]=l.y+a;o[h+2]=l.x-n;o[h+3]=l.y-a;r=l}};n.prototype.updateTransform=function e(){if(this.autoUpdate){this.refreshVertices()}this.containerUpdateTransform()};return n}(n.default);r.default=l},{"./Mesh":166}],170:[function(e,t,r){"use strict";r.__esModule=true;var i=e("../../core");var n=u(i);var a=e("../Mesh");var o=s(a);function s(e){return e&&e.__esModule?e:{default:e}}function u(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var h=function(){function t(e){l(this,t);this.renderer=e}t.prototype.render=function e(t){var r=this.renderer;var i=r.context;var n=t.worldTransform;var a=r.resolution;if(r.roundPixels){i.setTransform(n.a*a,n.b*a,n.c*a,n.d*a,n.tx*a|0,n.ty*a|0)}else{i.setTransform(n.a*a,n.b*a,n.c*a,n.d*a,n.tx*a,n.ty*a)}r.setBlendMode(t.blendMode);if(t.drawMode===o.default.DRAW_MODES.TRIANGLE_MESH){this._renderTriangleMesh(t)}else{this._renderTriangles(t)}};t.prototype._renderTriangleMesh=function e(t){var r=t.vertices.length/2;for(var i=0;i<r-2;i++){var n=i*2;this._renderDrawTriangle(t,n,n+2,n+4)}};t.prototype._renderTriangles=function e(t){var r=t.indices;var i=r.length;for(var n=0;n<i;n+=3){var a=r[n]*2;var o=r[n+1]*2;var s=r[n+2]*2;this._renderDrawTriangle(t,a,o,s)}};t.prototype._renderDrawTriangle=function e(t,r,i,n){var a=this.renderer.context;var o=t.uvs;var s=t.vertices;var u=t._texture;if(!u.valid){return}var l=u.baseTexture;var h=l.source;var f=l.width;var c=l.height;var d=void 0;var p=void 0;var v=void 0;var y=void 0;var g=void 0;var m=void 0;if(t.uploadUvTransform){var _=t._uvTransform.mapCoord;d=(o[r]*_.a+o[r+1]*_.c+_.tx)*l.width;p=(o[i]*_.a+o[i+1]*_.c+_.tx)*l.width;v=(o[n]*_.a+o[n+1]*_.c+_.tx)*l.width;y=(o[r]*_.b+o[r+1]*_.d+_.ty)*l.height;g=(o[i]*_.b+o[i+1]*_.d+_.ty)*l.height;m=(o[n]*_.b+o[n+1]*_.d+_.ty)*l.height}else{d=o[r]*l.width;p=o[i]*l.width;v=o[n]*l.width;y=o[r+1]*l.height;g=o[i+1]*l.height;m=o[n+1]*l.height}var b=s[r];var x=s[i];var T=s[n];var w=s[r+1];var E=s[i+1];var S=s[n+1];if(t.canvasPadding>0){var O=t.canvasPadding/t.worldTransform.a;var M=t.canvasPadding/t.worldTransform.d;var P=(b+x+T)/3;var C=(w+E+S)/3;var R=b-P;var A=w-C;var I=Math.sqrt(R*R+A*A);b=P+R/I*(I+O);w=C+A/I*(I+M);R=x-P;A=E-C;I=Math.sqrt(R*R+A*A);x=P+R/I*(I+O);E=C+A/I*(I+M);R=T-P;A=S-C;I=Math.sqrt(R*R+A*A);T=P+R/I*(I+O);S=C+A/I*(I+M)}a.save();a.beginPath();a.moveTo(b,w);a.lineTo(x,E);a.lineTo(T,S);a.closePath();a.clip();var D=d*g+y*v+p*m-g*v-y*p-d*m;var L=b*g+y*T+x*m-g*T-y*x-b*m;var N=d*x+b*v+p*T-x*v-b*p-d*T;var F=d*g*T+y*x*v+b*p*m-b*g*v-y*p*T-d*x*m;var k=w*g+y*S+E*m-g*S-y*E-w*m;var B=d*E+w*v+p*S-E*v-w*p-d*S;var j=d*g*S+y*E*v+w*p*m-w*g*v-y*p*S-d*E*m;a.transform(L/D,k/D,N/D,B/D,F/D,j/D);a.drawImage(h,0,0,f*l.resolution,c*l.resolution,0,0,f,c);a.restore();this.renderer.invalidateBlendMode()};t.prototype.renderMeshFlat=function e(t){var r=this.renderer.context;var i=t.vertices;var n=i.length/2;r.beginPath();for(var a=1;a<n-2;++a){var o=a*2;var s=i[o];var u=i[o+1];var l=i[o+2];var h=i[o+3];var f=i[o+4];var c=i[o+5];r.moveTo(s,u);r.lineTo(l,h);r.lineTo(f,c)}r.fillStyle="#FF0000";r.fill();r.closePath()};t.prototype.destroy=function e(){this.renderer=null};return t}();r.default=h;n.CanvasRenderer.registerPlugin("mesh",h)},{"../../core":65,"../Mesh":166}],171:[function(e,t,r){"use strict";r.__esModule=true;var i=e("./Mesh");Object.defineProperty(r,"Mesh",{enumerable:true,get:function e(){return l(i).default}});var n=e("./webgl/MeshRenderer");Object.defineProperty(r,"MeshRenderer",{enumerable:true,get:function e(){return l(n).default}});var a=e("./canvas/CanvasMeshRenderer");Object.defineProperty(r,"CanvasMeshRenderer",{enumerable:true,get:function e(){return l(a).default}});var o=e("./Plane");Object.defineProperty(r,"Plane",{enumerable:true,get:function e(){return l(o).default}});var s=e("./NineSlicePlane");Object.defineProperty(r,"NineSlicePlane",{enumerable:true,get:function e(){return l(s).default}});var u=e("./Rope");Object.defineProperty(r,"Rope",{enumerable:true,get:function e(){return l(u).default}});function l(e){return e&&e.__esModule?e:{default:e}}},{"./Mesh":166,"./NineSlicePlane":167,"./Plane":168,"./Rope":169,"./canvas/CanvasMeshRenderer":170,"./webgl/MeshRenderer":172}],172:[function(e,t,r){"use strict";r.__esModule=true;var i=e("../../core");var s=f(i);var n=e("pixi-gl-core");var u=h(n);var a=e("../Mesh");var l=h(a);var o=e("path");function h(e){return e&&e.__esModule?e:{default:e}}function f(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var v=s.Matrix.IDENTITY;var y=function(r){p(i,r);function i(e){c(this,i);var t=d(this,r.call(this,e));t.shader=null;return t}i.prototype.onContextChange=function e(){var t=this.renderer.gl;this.shader=new s.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")};i.prototype.render=function e(t){var r=this.renderer;var i=r.gl;var n=t._texture;if(!n.valid){return}var a=t._glDatas[r.CONTEXT_UID];if(!a){r.bindVao(null);a={shader:this.shader,vertexBuffer:u.default.GLBuffer.createVertexBuffer(i,t.vertices,i.STREAM_DRAW),uvBuffer:u.default.GLBuffer.createVertexBuffer(i,t.uvs,i.STREAM_DRAW),indexBuffer:u.default.GLBuffer.createIndexBuffer(i,t.indices,i.STATIC_DRAW),vao:null,dirty:t.dirty,indexDirty:t.indexDirty};a.vao=new u.default.VertexArrayObject(i).addIndex(a.indexBuffer).addAttribute(a.vertexBuffer,a.shader.attributes.aVertexPosition,i.FLOAT,false,2*4,0).addAttribute(a.uvBuffer,a.shader.attributes.aTextureCoord,i.FLOAT,false,2*4,0);t._glDatas[r.CONTEXT_UID]=a}r.bindVao(a.vao);if(t.dirty!==a.dirty){a.dirty=t.dirty;a.uvBuffer.upload(t.uvs)}if(t.indexDirty!==a.indexDirty){a.indexDirty=t.indexDirty;a.indexBuffer.upload(t.indices)}a.vertexBuffer.upload(t.vertices);r.bindShader(a.shader);a.shader.uniforms.uSampler=r.bindTexture(n);r.state.setBlendMode(s.utils.correctBlendMode(t.blendMode,n.baseTexture.premultipliedAlpha));if(a.shader.uniforms.uTransform){if(t.uploadUvTransform){a.shader.uniforms.uTransform=t._uvTransform.mapCoord.toArray(true)}else{a.shader.uniforms.uTransform=v.toArray(true)}}a.shader.uniforms.translationMatrix=t.worldTransform.toArray(true);a.shader.uniforms.uColor=s.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,a.shader.uniforms.uColor,n.baseTexture.premultipliedAlpha);var o=t.drawMode===l.default.DRAW_MODES.TRIANGLE_MESH?i.TRIANGLE_STRIP:i.TRIANGLES;a.vao.draw(o,t.indices.length,0)};return i}(s.ObjectRenderer);r.default=y;s.WebGLRenderer.registerPlugin("mesh",y)},{"../../core":65,"../Mesh":166,path:8,"pixi-gl-core":15}],173:[function(e,t,r){"use strict";r.__esModule=true;var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var n=e("../core");var u=o(n);var a=e("../core/utils");function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var s=function(o){f(s,o);function s(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1500;var t=arguments[1];var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:16384;var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;l(this,s);var n=h(this,o.call(this));var a=16384;if(r>a){r=a}if(r>e){r=e}n._properties=[false,true,false,false,false];n._maxSize=e;n._batchSize=r;n._glBuffers={};n._bufferToUpdate=0;n.interactiveChildren=false;n.blendMode=u.BLEND_MODES.NORMAL;n.autoResize=i;n.roundPixels=true;n.baseTexture=null;n.setProperties(t);n._tint=0;n.tintRgb=new Float32Array(4);n.tint=16777215;return n}s.prototype.setProperties=function e(t){if(t){this._properties[0]="scale"in t?!!t.scale:this._properties[0];this._properties[1]="position"in t?!!t.position:this._properties[1];this._properties[2]="rotation"in t?!!t.rotation:this._properties[2];this._properties[3]="uvs"in t?!!t.uvs:this._properties[3];this._properties[4]="alpha"in t||"tint"in t?!!t.alpha||!!t.tint:this._properties[4]}};s.prototype.updateTransform=function e(){this.displayObjectUpdateTransform()};s.prototype.renderWebGL=function e(t){var r=this;if(!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable){return}if(!this.baseTexture){this.baseTexture=this.children[0]._texture.baseTexture;if(!this.baseTexture.hasLoaded){this.baseTexture.once("update",function(){return r.onChildrenChange(0)})}}t.setObjectRenderer(t.plugins.particle);t.plugins.particle.render(this)};s.prototype.onChildrenChange=function e(t){var r=Math.floor(t/this._batchSize);if(r<this._bufferToUpdate){this._bufferToUpdate=r}};s.prototype.renderCanvas=function e(t){if(!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable){return}var r=t.context;var i=this.worldTransform;var n=true;var a=0;var o=0;var s=0;var u=0;t.setBlendMode(this.blendMode);r.globalAlpha=this.worldAlpha;this.displayObjectUpdateTransform();for(var l=0;l<this.children.length;++l){var h=this.children[l];if(!h.visible){continue}var f=h._texture.frame;r.globalAlpha=this.worldAlpha*h.alpha;if(h.rotation%(Math.PI*2)===0){if(n){r.setTransform(i.a,i.b,i.c,i.d,i.tx*t.resolution,i.ty*t.resolution);n=false}a=h.anchor.x*(-f.width*h.scale.x)+h.position.x+.5;o=h.anchor.y*(-f.height*h.scale.y)+h.position.y+.5;s=f.width*h.scale.x;u=f.height*h.scale.y}else{if(!n){n=true}h.displayObjectUpdateTransform();var c=h.worldTransform;if(t.roundPixels){r.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution|0,c.ty*t.resolution|0)}else{r.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution,c.ty*t.resolution)}a=h.anchor.x*-f.width+.5;o=h.anchor.y*-f.height+.5;s=f.width;u=f.height}var d=h._texture.baseTexture.resolution;r.drawImage(h._texture.baseTexture.source,f.x*d,f.y*d,f.width*d,f.height*d,a*t.resolution,o*t.resolution,s*t.resolution,u*t.resolution)}};s.prototype.destroy=function e(t){o.prototype.destroy.call(this,t);if(this._buffers){for(var r=0;r<this._buffers.length;++r){this._buffers[r].destroy()}}this._properties=null;this._buffers=null};i(s,[{key:"tint",get:function e(){return this._tint},set:function e(t){this._tint=t;(0,a.hex2rgb)(t,this.tintRgb)}}]);return s}(u.Container);r.default=s},{"../core":65,"../core/utils":125}],174:[function(e,t,r){"use strict";r.__esModule=true;var i=e("./ParticleContainer");Object.defineProperty(r,"ParticleContainer",{enumerable:true,get:function e(){return a(i).default}});var n=e("./webgl/ParticleRenderer");Object.defineProperty(r,"ParticleRenderer",{enumerable:true,get:function e(){return a(n).default}});function a(e){return e&&e.__esModule?e:{default:e}}},{"./ParticleContainer":173,"./webgl/ParticleRenderer":176}],175:[function(e,t,r){"use strict";r.__esModule=true;var i=e("pixi-gl-core");var p=a(i);var n=e("../../core/utils/createIndicesForQuads");var v=a(n);function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function o(e,t,r,i){s(this,o);this.gl=e;this.size=i;this.dynamicProperties=[];this.staticProperties=[];for(var n=0;n<t.length;++n){var a=t[n];a={attribute:a.attribute,size:a.size,uploadFunction:a.uploadFunction,unsignedByte:a.unsignedByte,offset:a.offset};if(r[n]){this.dynamicProperties.push(a)}else{this.staticProperties.push(a)}}this.staticStride=0;this.staticBuffer=null;this.staticData=null;this.staticDataUint32=null;this.dynamicStride=0;this.dynamicBuffer=null;this.dynamicData=null;this.dynamicDataUint32=null;this.initBuffers()}o.prototype.initBuffers=function e(){var t=this.gl;var r=0;this.indices=(0,v.default)(this.size);this.indexBuffer=p.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW);this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var n=this.dynamicProperties[i];n.offset=r;r+=n.size;this.dynamicStride+=n.size}var a=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(a);this.dynamicDataUint32=new Uint32Array(a);this.dynamicBuffer=p.default.GLBuffer.createVertexBuffer(t,a,t.STREAM_DRAW);var o=0;this.staticStride=0;for(var s=0;s<this.staticProperties.length;++s){var u=this.staticProperties[s];u.offset=o;o+=u.size;this.staticStride+=u.size}var l=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(l);this.staticDataUint32=new Uint32Array(l);this.staticBuffer=p.default.GLBuffer.createVertexBuffer(t,l,t.STATIC_DRAW);this.vao=new p.default.VertexArrayObject(t).addIndex(this.indexBuffer);for(var h=0;h<this.dynamicProperties.length;++h){var f=this.dynamicProperties[h];if(f.unsignedByte){this.vao.addAttribute(this.dynamicBuffer,f.attribute,t.UNSIGNED_BYTE,true,this.dynamicStride*4,f.offset*4)}else{this.vao.addAttribute(this.dynamicBuffer,f.attribute,t.FLOAT,false,this.dynamicStride*4,f.offset*4)}}for(var c=0;c<this.staticProperties.length;++c){var d=this.staticProperties[c];if(d.unsignedByte){this.vao.addAttribute(this.staticBuffer,d.attribute,t.UNSIGNED_BYTE,true,this.staticStride*4,d.offset*4)}else{this.vao.addAttribute(this.staticBuffer,d.attribute,t.FLOAT,false,this.staticStride*4,d.offset*4)}}};o.prototype.uploadDynamic=function e(t,r,i){for(var n=0;n<this.dynamicProperties.length;n++){var a=this.dynamicProperties[n];a.uploadFunction(t,r,i,a.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,a.offset)}this.dynamicBuffer.upload()};o.prototype.uploadStatic=function e(t,r,i){for(var n=0;n<this.staticProperties.length;n++){var a=this.staticProperties[n];a.uploadFunction(t,r,i,a.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,a.offset)}this.staticBuffer.upload()};o.prototype.destroy=function e(){this.dynamicProperties=null;this.dynamicBuffer.destroy();this.dynamicBuffer=null;this.dynamicData=null;this.dynamicDataUint32=null;this.staticProperties=null;this.staticBuffer.destroy();this.staticBuffer=null;this.staticData=null;this.staticDataUint32=null};return o}();r.default=o},{"../../core/utils/createIndicesForQuads":123,"pixi-gl-core":15}],176:[function(e,t,r){"use strict";r.__esModule=true;var i=e("../../core");var v=l(i);var n=e("./ParticleShader");var a=s(n);var o=e("./ParticleBuffer");var u=s(o);var c=e("../../core/utils");function s(e){return e&&e.__esModule?e:{default:e}}function l(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var p=function(r){d(i,r);function i(e){h(this,i);var t=f(this,r.call(this,e));t.shader=null;t.indexBuffer=null;t.properties=null;t.tempMatrix=new v.Matrix;t.CONTEXT_UID=0;return t}i.prototype.onContextChange=function e(){var t=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID;this.shader=new a.default(t);this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:true,uploadFunction:this.uploadTint,offset:0}]};i.prototype.start=function e(){this.renderer.bindShader(this.shader)};i.prototype.render=function e(t){var r=t.children;var i=t._maxSize;var n=t._batchSize;var a=this.renderer;var o=r.length;if(o===0){return}else if(o>i){o=i}var s=t._glBuffers[a.CONTEXT_UID];if(!s){s=t._glBuffers[a.CONTEXT_UID]=this.generateBuffers(t)}var u=r[0]._texture.baseTexture;this.renderer.setBlendMode(v.utils.correctBlendMode(t.blendMode,u.premultipliedAlpha));var l=a.gl;var h=t.worldTransform.copy(this.tempMatrix);h.prepend(a._activeRenderTarget.projectionMatrix);this.shader.uniforms.projectionMatrix=h.toArray(true);this.shader.uniforms.uColor=v.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,u.premultipliedAlpha);this.shader.uniforms.uSampler=a.bindTexture(u);for(var f=0,c=0;f<o;f+=n,c+=1){var d=o-f;if(d>n){d=n}if(c>=s.length){if(!t.autoResize){break}s.push(this._generateOneMoreBuffer(t))}var p=s[c];p.uploadDynamic(r,f,d);if(t._bufferToUpdate===c){p.uploadStatic(r,f,d);t._bufferToUpdate=c+1}a.bindVao(p.vao);p.vao.draw(l.TRIANGLES,d*6)}};i.prototype.generateBuffers=function e(t){var r=this.renderer.gl;var i=[];var n=t._maxSize;var a=t._batchSize;var o=t._properties;for(var s=0;s<n;s+=a){i.push(new u.default(r,this.properties,o,a))}return i};i.prototype._generateOneMoreBuffer=function e(t){var r=this.renderer.gl;var i=t._batchSize;var n=t._properties;return new u.default(r,this.properties,n,i)};i.prototype.uploadVertices=function e(t,r,i,n,a,o){var s=0;var u=0;var l=0;var h=0;for(var f=0;f<i;++f){var c=t[r+f];var d=c._texture;var p=c.scale.x;var v=c.scale.y;var y=d.trim;var g=d.orig;if(y){u=y.x-c.anchor.x*g.width;s=u+y.width;h=y.y-c.anchor.y*g.height;l=h+y.height}else{s=g.width*(1-c.anchor.x);u=g.width*-c.anchor.x;l=g.height*(1-c.anchor.y);h=g.height*-c.anchor.y}n[o]=u*p;n[o+1]=h*v;n[o+a]=s*p;n[o+a+1]=h*v;n[o+a*2]=s*p;n[o+a*2+1]=l*v;n[o+a*3]=u*p;n[o+a*3+1]=l*v;o+=a*4}};i.prototype.uploadPosition=function e(t,r,i,n,a,o){for(var s=0;s<i;s++){var u=t[r+s].position;n[o]=u.x;n[o+1]=u.y;n[o+a]=u.x;n[o+a+1]=u.y;n[o+a*2]=u.x;n[o+a*2+1]=u.y;n[o+a*3]=u.x;n[o+a*3+1]=u.y;o+=a*4}};i.prototype.uploadRotation=function e(t,r,i,n,a,o){for(var s=0;s<i;s++){var u=t[r+s].rotation;n[o]=u;n[o+a]=u;n[o+a*2]=u;n[o+a*3]=u;o+=a*4}};i.prototype.uploadUvs=function e(t,r,i,n,a,o){for(var s=0;s<i;++s){var u=t[r+s]._texture._uvs;if(u){n[o]=u.x0;n[o+1]=u.y0;n[o+a]=u.x1;n[o+a+1]=u.y1;n[o+a*2]=u.x2;n[o+a*2+1]=u.y2;n[o+a*3]=u.x3;n[o+a*3+1]=u.y3;o+=a*4}else{n[o]=0;n[o+1]=0;n[o+a]=0;n[o+a+1]=0;n[o+a*2]=0;n[o+a*2+1]=0;n[o+a*3]=0;n[o+a*3+1]=0;o+=a*4}}};i.prototype.uploadTint=function e(t,r,i,n,a,o){for(var s=0;s<i;++s){var u=t[r+s];var l=u._texture.baseTexture.premultipliedAlpha;var h=u.alpha;var f=h<1&&l?(0,c.premultiplyTint)(u._tintRGB,h):u._tintRGB+(h*255<<24);n[o]=f;n[o+a]=f;n[o+a*2]=f;n[o+a*3]=f;o+=a*4}};i.prototype.destroy=function e(){if(this.renderer.gl){this.renderer.gl.deleteBuffer(this.indexBuffer)}r.prototype.destroy.call(this);this.shader.destroy();this.indices=null;this.tempMatrix=null};return i}(v.ObjectRenderer);r.default=p;v.WebGLRenderer.registerPlugin("particle",p)},{"../../core":65,"../../core/utils":125,"./ParticleBuffer":175,"./ParticleShader":177}],177:[function(e,t,r){"use strict";r.__esModule=true;var i=e("../../core/Shader");var n=a(i);function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var l=function(t){u(r,t);function r(e){o(this,r);return s(this,t.call(this,e,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   vec2 v = vec2(x, y);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  gl_FragColor = color;","}"].join("\n")))}return r}(n.default);r.default=l},{"../../core/Shader":44}],178:[function(e,t,r){"use strict";if(!Math.sign){Math.sign=function e(t){t=Number(t);if(t===0||isNaN(t)){return t}return t>0?1:-1}}},{}],179:[function(e,t,r){"use strict";var i=e("object-assign");var n=a(i);function a(e){return e&&e.__esModule?e:{default:e}}if(!Object.assign){Object.assign=n.default}},{"object-assign":6}],180:[function(e,t,r){"use strict";e("./Object.assign");e("./requestAnimationFrame");e("./Math.sign");if(!window.ArrayBuffer){window.ArrayBuffer=Array}if(!window.Float32Array){window.Float32Array=Array}if(!window.Uint32Array){window.Uint32Array=Array}if(!window.Uint16Array){window.Uint16Array=Array}},{"./Math.sign":178,"./Object.assign":179,"./requestAnimationFrame":181}],181:[function(e,t,r){(function(e){"use strict";var i=16;if(!(Date.now&&Date.prototype.getTime)){Date.now=function e(){return(new Date).getTime()}}if(!(e.performance&&e.performance.now)){var t=Date.now();if(!e.performance){e.performance={}}e.performance.now=function(){return Date.now()-t}}var n=Date.now();var r=["ms","moz","webkit","o"];for(var a=0;a<r.length&&!e.requestAnimationFrame;++a){var o=r[a];e.requestAnimationFrame=e[o+"RequestAnimationFrame"];e.cancelAnimationFrame=e[o+"CancelAnimationFrame"]||e[o+"CancelRequestAnimationFrame"]}if(!e.requestAnimationFrame){e.requestAnimationFrame=function(e){if(typeof e!=="function"){throw new TypeError(e+"is not a function")}var t=Date.now();var r=i+n-t;if(r<0){r=0}n=t;return setTimeout(function(){n=Date.now();e(performance.now())},r)}}if(!e.cancelAnimationFrame){e.cancelAnimationFrame=function(e){return clearTimeout(e)}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],182:[function(e,t,r){"use strict";r.__esModule=true;var i=e("../core");var u=s(i);var n=e("./limiters/CountLimiter");var a=o(n);function o(e){return e&&e.__esModule?e:{default:e}}function s(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var h=u.ticker.shared;u.settings.UPLOADS_PER_FRAME=4;var f=function(){function r(e){var t=this;l(this,r);this.limiter=new a.default(u.settings.UPLOADS_PER_FRAME);this.renderer=e;this.uploadHookHelper=null;this.queue=[];this.addHooks=[];this.uploadHooks=[];this.completes=[];this.ticking=false;this.delayedTick=function(){if(!t.queue){return}t.prepareItems()};this.registerFindHook(g);this.registerFindHook(m);this.registerFindHook(c);this.registerFindHook(d);this.registerFindHook(p);this.registerUploadHook(v);this.registerUploadHook(y)}r.prototype.upload=function e(t,r){if(typeof t==="function"){r=t;t=null}if(t){this.add(t)}if(this.queue.length){if(r){this.completes.push(r)}if(!this.ticking){this.ticking=true;h.addOnce(this.tick,this,u.UPDATE_PRIORITY.UTILITY)}}else if(r){r()}};r.prototype.tick=function e(){setTimeout(this.delayedTick,0)};r.prototype.prepareItems=function e(){this.limiter.beginFrame();while(this.queue.length&&this.limiter.allowedToUpload()){var t=this.queue[0];var r=false;if(t&&!t._destroyed){for(var i=0,n=this.uploadHooks.length;i<n;i++){if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift();r=true;break}}}if(!r){this.queue.shift()}}if(!this.queue.length){this.ticking=false;var a=this.completes.slice(0);this.completes.length=0;for(var o=0,s=a.length;o<s;o++){a[o]()}}else{h.addOnce(this.tick,this,u.UPDATE_PRIORITY.UTILITY)}};r.prototype.registerFindHook=function e(t){if(t){this.addHooks.push(t)}return this};r.prototype.registerUploadHook=function e(t){if(t){this.uploadHooks.push(t)}return this};r.prototype.add=function e(t){for(var r=0,i=this.addHooks.length;r<i;r++){if(this.addHooks[r](t,this.queue)){break}}if(t instanceof u.Container){for(var n=t.children.length-1;n>=0;n--){this.add(t.children[n])}}return this};r.prototype.destroy=function e(){if(this.ticking){h.remove(this.tick,this)}this.ticking=false;this.addHooks=null;this.uploadHooks=null;this.renderer=null;this.completes=null;this.queue=null;this.limiter=null;this.uploadHookHelper=null};return r}();r.default=f;function c(e,t){var r=false;if(e&&e._textures&&e._textures.length){for(var i=0;i<e._textures.length;i++){if(e._textures[i]instanceof u.Texture){var n=e._textures[i].baseTexture;if(t.indexOf(n)===-1){t.push(n);r=true}}}}return r}function d(e,t){if(e instanceof u.BaseTexture){if(t.indexOf(e)===-1){t.push(e)}return true}return false}function p(e,t){if(e._texture&&e._texture instanceof u.Texture){var r=e._texture.baseTexture;if(t.indexOf(r)===-1){t.push(r)}return true}return false}function v(e,t){if(t instanceof u.Text){t.updateText(true);return true}return false}function y(e,t){if(t instanceof u.TextStyle){var r=t.toFontString();u.TextMetrics.measureFont(r);return true}return false}function g(e,t){if(e instanceof u.Text){if(t.indexOf(e.style)===-1){t.push(e.style)}if(t.indexOf(e)===-1){t.push(e)}var r=e._texture.baseTexture;if(t.indexOf(r)===-1){t.push(r)}return true}return false}function m(e,t){if(e instanceof u.TextStyle){if(t.indexOf(e)===-1){t.push(e)}return true}return false}},{"../core":65,"./limiters/CountLimiter":185}],183:[function(e,t,r){"use strict";r.__esModule=true;var i=e("../../core");var a=u(i);var n=e("../BasePrepare");var o=s(n);function s(e){return e&&e.__esModule?e:{default:e}}function u(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var c=16;var d=function(r){f(i,r);function i(e){l(this,i);var t=h(this,r.call(this,e));t.uploadHookHelper=t;t.canvas=document.createElement("canvas");t.canvas.width=c;t.canvas.height=c;t.ctx=t.canvas.getContext("2d");t.registerUploadHook(p);return t}i.prototype.destroy=function e(){r.prototype.destroy.call(this);this.ctx=null;this.canvas=null};return i}(o.default);r.default=d;function p(e,t){if(t instanceof a.BaseTexture){var r=t.source;var i=r.width===0?e.canvas.width:Math.min(e.canvas.width,r.width);var n=r.height===0?e.canvas.height:Math.min(e.canvas.height,r.height);e.ctx.drawImage(r,0,0,i,n,0,0,e.canvas.width,e.canvas.height);return true}return false}a.CanvasRenderer.registerPlugin("prepare",d)},{"../../core":65,"../BasePrepare":182}],184:[function(e,t,r){"use strict";r.__esModule=true;var i=e("./webgl/WebGLPrepare");Object.defineProperty(r,"webgl",{enumerable:true,get:function e(){return u(i).default}});var n=e("./canvas/CanvasPrepare");Object.defineProperty(r,"canvas",{enumerable:true,get:function e(){return u(n).default}});var a=e("./BasePrepare");Object.defineProperty(r,"BasePrepare",{enumerable:true,get:function e(){return u(a).default}});var o=e("./limiters/CountLimiter");Object.defineProperty(r,"CountLimiter",{enumerable:true,get:function e(){return u(o).default}});var s=e("./limiters/TimeLimiter");Object.defineProperty(r,"TimeLimiter",{enumerable:true,get:function e(){return u(s).default}});function u(e){return e&&e.__esModule?e:{default:e}}},{"./BasePrepare":182,"./canvas/CanvasPrepare":183,"./limiters/CountLimiter":185,"./limiters/TimeLimiter":186,"./webgl/WebGLPrepare":187}],185:[function(e,t,r){"use strict";r.__esModule=true;function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var n=function(){function t(e){i(this,t);this.maxItemsPerFrame=e;this.itemsLeft=0}t.prototype.beginFrame=function e(){this.itemsLeft=this.maxItemsPerFrame};t.prototype.allowedToUpload=function e(){return this.itemsLeft-- >0};return t}();r.default=n},{}],186:[function(e,t,r){"use strict";r.__esModule=true;function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var n=function(){function t(e){i(this,t);this.maxMilliseconds=e;this.frameStart=0}t.prototype.beginFrame=function e(){this.frameStart=Date.now()};t.prototype.allowedToUpload=function e(){return Date.now()-this.frameStart<this.maxMilliseconds};return t}();r.default=n},{}],187:[function(e,t,r){"use strict";r.__esModule=true;var i=e("../../core");var n=u(i);var a=e("../BasePrepare");var o=s(a);function s(e){return e&&e.__esModule?e:{default:e}}function u(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var c=function(r){f(i,r);function i(e){l(this,i);var t=h(this,r.call(this,e));t.uploadHookHelper=t.renderer;t.registerFindHook(v);t.registerUploadHook(d);t.registerUploadHook(p);return t}return i}(o.default);r.default=c;function d(e,t){if(t instanceof n.BaseTexture){if(!t._glTextures[e.CONTEXT_UID]){e.textureManager.updateTexture(t)}return true}return false}function p(e,t){if(t instanceof n.Graphics){if(t.dirty||t.clearDirty||!t._webGL[e.plugins.graphics.CONTEXT_UID]){e.plugins.graphics.updateGraphics(t)}return true}return false}function v(e,t){if(e instanceof n.Graphics){t.push(e);return true}return false}n.WebGLRenderer.registerPlugin("prepare",c)},{"../../core":65,"../BasePrepare":182}],188:[function(O,e,M){(function(e){"use strict";M.__esModule=true;M.loader=M.prepare=M.particles=M.mesh=M.loaders=M.interaction=M.filters=M.extras=M.extract=M.accessibility=undefined;var r=O("./polyfill");Object.keys(r).forEach(function(t){if(t==="default"||t==="__esModule")return;Object.defineProperty(M,t,{enumerable:true,get:function e(){return r[t]}})});var i=O("./core");Object.keys(i).forEach(function(t){if(t==="default"||t==="__esModule")return;Object.defineProperty(M,t,{enumerable:true,get:function e(){return i[t]}})});var t=O("./deprecation");var n=E(t);var a=O("./accessibility");var o=w(a);var s=O("./extract");var u=w(s);var l=O("./extras");var h=w(l);var f=O("./filters");var c=w(f);var d=O("./interaction");var p=w(d);var v=O("./loaders");var y=w(v);var g=O("./mesh");var m=w(g);var _=O("./particles");var b=w(_);var x=O("./prepare");var T=w(x);function w(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function E(e){return e&&e.__esModule?e:{default:e}}i.utils.mixins.performMixins();var S=y.shared||null;M.accessibility=o;M.extract=u;M.extras=h;M.filters=c;M.interaction=p;M.loaders=y;M.mesh=m;M.particles=b;M.prepare=T;M.loader=S;if(typeof n.default==="function"){(0,n.default)(M)}e.PIXI=M}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./accessibility":42,"./core":65,"./deprecation":131,"./extract":133,"./extras":141,"./filters":153,"./interaction":159,"./loaders":162,"./mesh":171,"./particles":174,"./polyfill":180,"./prepare":184}]},{},[188])(188)});